(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=s(u);fetch(u.href,h)}})();const Ns=!1;var Us=Array.isArray,dc=Array.prototype.indexOf,is=Array.from,hc=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,lo=Object.getOwnPropertyDescriptors,fc=Object.prototype,vc=Array.prototype,Vs=Object.getPrototypeOf,Fa=Object.isExtensible;function vr(n){return typeof n=="function"}function _c(n){return n()}function Zs(n){for(var r=0;r<n.length;r++)n[r]()}function co(){var n,r,s=new Promise((o,u)=>{n=o,r=u});return{promise:s,resolve:n,reject:r}}function br(n,r){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const s=[];for(const o of n)if(s.push(o),s.length===r)break;return s}const ti=2,Gs=4,ns=8,uo=1<<24,an=16,on=32,wn=64,rs=128,$i=512,ni=1024,pi=2048,ji=4096,xi=8192,tn=16384,Ys=32768,sn=65536,Ha=1<<17,ho=1<<18,$n=1<<19,fo=1<<20,Qi=1<<25,On=32768,Bs=1<<21,Js=1<<22,pn=1<<23,Ri=Symbol("$state"),vo=Symbol("legacy props"),pc=Symbol(""),Yn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function mc(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function gc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function yc(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function bc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function wc(n){throw new Error("https://svelte.dev/e/effect_orphan")}function xc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pc(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function kc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Tc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ec(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Sc=1,zc=2,_o=4,Mc=8,Cc=16,Ac=1,Oc=2,po=4,Ic=8,$c=16,Dc=1,Nc=2,Xe=Symbol(),Zc="http://www.w3.org/1999/xhtml",Bc="http://www.w3.org/2000/svg",qc="@attach";function Rc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function jc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function mo(n){return n===this.v}function Fc(n,r){return n!=n?r==r:n!==r||n!==null&&typeof n=="object"||typeof n=="function"}function go(n){return!Fc(n,this.v)}let nr=!1,Hc=!1;function Wc(){nr=!0}let je=null;function Kn(n){je=n}function Fi(n,r=!1,s){je={p:je,i:!1,c:null,e:null,s:n,x:null,l:nr&&!r?{s:null,u:null,$:[]}:null}}function Hi(n){var r=je,s=r.e;if(s!==null){r.e=null;for(var o of s)$o(o)}return r.i=!0,je=r.p,{}}function Cr(){return!nr||je!==null&&je.l===null}let Sn=[];function yo(){var n=Sn;Sn=[],Zs(n)}function Dn(n){if(Sn.length===0&&!xr){var r=Sn;queueMicrotask(()=>{r===Sn&&yo()})}Sn.push(n)}function Uc(){for(;Sn.length>0;)yo()}function bo(n){var r=ce;if(r===null)return le.f|=pn,n;if((r.f&Ys)===0){if((r.f&rs)===0)throw n;r.b.error(n)}else Xn(n,r)}function Xn(n,r){for(;r!==null;){if((r.f&rs)!==0)try{r.b.error(n);return}catch(s){n=s}r=r.parent}throw n}const Yr=new Set;let de=null,wr=null,Si=null,Li=[],ss=null,qs=!1,xr=!1;class Oi{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#n=0;#i=0;#l=null;#s=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#i>0}process(r){Li=[],wr=null,this.apply();var s={parent:null,effect:null,effects:[],render_effects:[]};for(const o of r)this.#a(o,s);this.is_fork||this.#u(),this.is_deferred()?(this.#o(s.effects),this.#o(s.render_effects)):(wr=this,de=null,Wa(s.render_effects),Wa(s.effects),wr=null,this.#l?.resolve()),Si=null}#a(r,s){r.f^=ni;for(var o=r.first;o!==null;){var u=o.f,h=(u&(on|wn))!==0,d=h&&(u&ni)!==0,_=d||(u&xi)!==0||this.skipped_effects.has(o);if((o.f&rs)!==0&&o.b?.is_pending()&&(s={parent:s,effect:o,effects:[],render_effects:[]}),!_&&o.fn!==null){h?o.f^=ni:(u&Gs)!==0?s.effects.push(o):Ir(o)&&((o.f&an)!==0&&this.#s.add(o),Sr(o));var p=o.first;if(p!==null){o=p;continue}}var y=o.parent;for(o=o.next;o===null&&y!==null;)y===s.effect&&(this.#o(s.effects),this.#o(s.render_effects),s=s.parent),o=y.next,y=y.parent}}#o(r){for(const s of r)(s.f&pi)!==0?this.#s.add(s):(s.f&ji)!==0&&this.#r.add(s),this.#c(s.deps),ri(s,ni)}#c(r){if(r!==null)for(const s of r)(s.f&ti)===0||(s.f&On)===0||(s.f^=On,this.#c(s.deps))}capture(r,s){this.previous.has(r)||this.previous.set(r,s),(r.f&pn)===0&&(this.current.set(r,r.v),Si?.set(r,r.v))}activate(){de=this,this.apply()}deactivate(){de===this&&(de=null,Si=null)}flush(){if(this.activate(),Li.length>0){if(wo(),de!==null&&de!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#e)r(this);this.#e.clear()}#u(){if(this.#i===0){for(const r of this.#t)r();this.#t.clear()}this.#n===0&&this.#d()}#d(){if(Yr.size>1){this.previous.clear();var r=Si,s=!0,o={parent:null,effect:null,effects:[],render_effects:[]};for(const h of Yr){if(h===this){s=!1;continue}const d=[];for(const[p,y]of this.current){if(h.current.has(p))if(s&&y!==h.current.get(p))h.current.set(p,y);else continue;d.push(p)}if(d.length===0)continue;const _=[...h.current.keys()].filter(p=>!this.current.has(p));if(_.length>0){var u=Li;Li=[];const p=new Set,y=new Map;for(const x of d)xo(x,_,p,y);if(Li.length>0){de=h,h.apply();for(const x of Li)h.#a(x,o);h.deactivate()}Li=u}}de=null,Si=r}this.committed=!0,Yr.delete(this)}increment(r){this.#n+=1,r&&(this.#i+=1)}decrement(r){this.#n-=1,r&&(this.#i-=1),this.revive()}revive(){for(const r of this.#s)this.#r.delete(r),ri(r,pi),In(r);for(const r of this.#r)ri(r,ji),In(r);this.flush()}oncommit(r){this.#t.add(r)}ondiscard(r){this.#e.add(r)}settled(){return(this.#l??=co()).promise}static ensure(){if(de===null){const r=de=new Oi;Yr.add(de),xr||Oi.enqueue(()=>{de===r&&r.flush()})}return de}static enqueue(r){Dn(r)}apply(){}}function Vc(n){var r=xr;xr=!0;try{for(var s;;){if(Uc(),Li.length===0&&(de?.flush(),Li.length===0))return ss=null,s;wo()}}finally{xr=r}}function wo(){var n=Cn;qs=!0;var r=null;try{var s=0;for(Qr(!0);Li.length>0;){var o=Oi.ensure();if(s++>1e3){var u,h;Gc()}o.process(Li),mn.clear()}}finally{qs=!1,Qr(n),ss=null}}function Gc(){try{xc()}catch(n){Xn(n,ss)}}let Xi=null;function Wa(n){var r=n.length;if(r!==0){for(var s=0;s<r;){var o=n[s++];if((o.f&(tn|xi))===0&&Ir(o)&&(Xi=new Set,Sr(o),o.deps===null&&o.first===null&&o.nodes===null&&(o.teardown===null&&o.ac===null?qo(o):o.fn=null),Xi?.size>0)){mn.clear();for(const u of Xi){if((u.f&(tn|xi))!==0)continue;const h=[u];let d=u.parent;for(;d!==null;)Xi.has(d)&&(Xi.delete(d),h.push(d)),d=d.parent;for(let _=h.length-1;_>=0;_--){const p=h[_];(p.f&(tn|xi))===0&&Sr(p)}}Xi.clear()}}Xi=null}}function xo(n,r,s,o){if(!s.has(n)&&(s.add(n),n.reactions!==null))for(const u of n.reactions){const h=u.f;(h&ti)!==0?xo(u,r,s,o):(h&(Js|an))!==0&&(h&pi)===0&&Po(u,r,o)&&(ri(u,pi),In(u))}}function Po(n,r,s){const o=s.get(n);if(o!==void 0)return o;if(n.deps!==null)for(const u of n.deps){if(r.includes(u))return!0;if((u.f&ti)!==0&&Po(u,r,s))return s.set(u,!0),!0}return s.set(n,!1),!1}function In(n){for(var r=ss=n;r.parent!==null;){r=r.parent;var s=r.f;if(qs&&r===ce&&(s&an)!==0&&(s&ho)===0)return;if((s&(wn|on))!==0){if((s&ni)===0)return;r.f^=ni}}Li.push(r)}function Yc(n){let r=0,s=gn(0),o;return()=>{Lr()&&(c(s),Qs(()=>(r===0&&(o=bn(()=>n(()=>Pr(s)))),r+=1,()=>{Dn(()=>{r-=1,r===0&&(o?.(),o=void 0,Pr(s))})})))}}var Jc=sn|$n|rs;function Kc(n,r,s){new Xc(n,r,s)}class Xc{parent;#t=!1;#e;#n=null;#i;#l;#s;#r=null;#a=null;#o=null;#c=null;#u=null;#d=0;#h=0;#v=!1;#f=null;#y=Yc(()=>(this.#f=gn(this.#d),()=>{this.#f=null}));constructor(r,s,o){this.#e=r,this.#i=s,this.#l=o,this.parent=ce.b,this.#t=!!this.#i.pending,this.#s=rr(()=>{ce.b=this;{var u=this.#m();try{this.#r=vi(()=>o(u))}catch(h){this.error(h)}this.#h>0?this.#p():this.#t=!1}return()=>{this.#u?.remove()}},Jc)}#b(){try{this.#r=vi(()=>this.#l(this.#e))}catch(r){this.error(r)}this.#t=!1}#w(){const r=this.#i.pending;r&&(this.#a=vi(()=>r(this.#e)),Oi.enqueue(()=>{var s=this.#m();this.#r=this.#_(()=>(Oi.ensure(),vi(()=>this.#l(s)))),this.#h>0?this.#p():(Mn(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#m(){var r=this.#e;return this.#t&&(this.#u=en(),this.#e.before(this.#u),r=this.#u),r}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#i.pending}#_(r){var s=ce,o=le,u=je;zi(this.#s),_i(this.#s),Kn(this.#s.ctx);try{return r()}catch(h){return bo(h),null}finally{zi(s),_i(o),Kn(u)}}#p(){const r=this.#i.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Fo(this.#r,this.#c)),this.#a===null&&(this.#a=vi(()=>r(this.#e)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#t=!1,this.#a&&Mn(this.#a,()=>{this.#a=null}),this.#c&&(this.#e.before(this.#c),this.#c=null))}update_pending_count(r){this.#g(r),this.#d+=r,this.#f&&Qn(this.#f,this.#d)}get_effect_pending(){return this.#y(),c(this.#f)}error(r){var s=this.#i.onerror;let o=this.#i.failed;if(this.#v||!s&&!o)throw r;this.#r&&(Ve(this.#r),this.#r=null),this.#a&&(Ve(this.#a),this.#a=null),this.#o&&(Ve(this.#o),this.#o=null);var u=!1,h=!1;const d=()=>{if(u){jc();return}u=!0,h&&Ec(),Oi.ensure(),this.#d=0,this.#o!==null&&Mn(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#r=this.#_(()=>(this.#v=!1,vi(()=>this.#l(this.#e)))),this.#h>0?this.#p():this.#t=!1};var _=le;try{_i(null),h=!0,s?.(r,d),h=!1}catch(p){Xn(p,this.#s&&this.#s.parent)}finally{_i(_)}o&&Dn(()=>{this.#o=this.#_(()=>{Oi.ensure(),this.#v=!0;try{return vi(()=>{o(this.#e,()=>r,()=>d)})}catch(p){return Xn(p,this.#s.parent),null}finally{this.#v=!1}})})}}function ko(n,r,s,o){const u=Cr()?Ar:Ks;if(s.length===0&&n.length===0){o(r.map(u));return}var h=de,d=ce,_=Qc();function p(){Promise.all(s.map(y=>tu(y))).then(y=>{_();try{o([...r.map(u),...y])}catch(x){(d.f&tn)===0&&Xn(x,d)}h?.deactivate(),Xr()}).catch(y=>{Xn(y,d)})}n.length>0?Promise.all(n).then(()=>{_();try{return p()}finally{h?.deactivate(),Xr()}}):p()}function Qc(){var n=ce,r=le,s=je,o=de;return function(h=!0){zi(n),_i(r),Kn(s),h&&o?.activate()}}function Xr(){zi(null),_i(null),Kn(null)}function Ar(n){var r=ti|pi,s=le!==null&&(le.f&ti)!==0?le:null;return ce!==null&&(ce.f|=$n),{ctx:je,deps:null,effects:null,equals:mo,f:r,fn:n,reactions:null,rv:0,v:Xe,wv:0,parent:s??ce,ac:null}}function tu(n,r){let s=ce;s===null&&gc();var o=s.b,u=void 0,h=gn(Xe),d=!le,_=new Map;return hu(()=>{var p=co();u=p.promise;try{Promise.resolve(n()).then(p.resolve,p.reject).then(()=>{y===de&&y.committed&&y.deactivate(),Xr()})}catch(P){p.reject(P),Xr()}var y=de;if(d){var x=!o.is_pending();o.update_pending_count(1),y.increment(x),_.get(y)?.reject(Yn),_.delete(y),_.set(y,p)}const b=(P,S=void 0)=>{if(y.activate(),S)S!==Yn&&(h.f|=pn,Qn(h,S));else{(h.f&pn)!==0&&(h.f^=pn),Qn(h,P);for(const[N,O]of _){if(_.delete(N),N===y)break;O.reject(Yn)}}d&&(o.update_pending_count(-1),y.decrement(x))};p.promise.then(b,P=>b(null,P||"unknown"))}),os(()=>{for(const p of _.values())p.reject(Yn)}),new Promise(p=>{function y(x){function b(){x===u?p(h):y(u)}x.then(b,b)}y(u)})}function oe(n){const r=Ar(n);return Ho(r),r}function Ks(n){const r=Ar(n);return r.equals=go,r}function To(n){var r=n.effects;if(r!==null){n.effects=null;for(var s=0;s<r.length;s+=1)Ve(r[s])}}function eu(n){for(var r=n.parent;r!==null;){if((r.f&ti)===0)return(r.f&tn)===0?r:null;r=r.parent}return null}function Xs(n){var r,s=ce;zi(eu(n));try{n.f&=~On,To(n),r=Go(n)}finally{zi(s)}return r}function Lo(n){var r=Xs(n);if(n.equals(r)||(de?.is_fork||(n.v=r),n.wv=Uo()),!Nn)if(Si!==null)(Lr()||de?.is_fork)&&Si.set(n,r);else{var s=(n.f&$i)===0?ji:ni;ri(n,s)}}let Rs=new Set;const mn=new Map;let Eo=!1;function gn(n,r){var s={f:0,v:n,reactions:null,equals:mo,rv:0,wv:0};return s}function St(n,r){const s=gn(n);return Ho(s),s}function iu(n,r=!1,s=!0){const o=gn(n);return r||(o.equals=go),nr&&s&&je!==null&&je.l!==null&&(je.l.s??=[]).push(o),o}function M(n,r,s=!1){le!==null&&(!qi||(le.f&Ha)!==0)&&Cr()&&(le.f&(ti|an|Js|Ha))!==0&&!nn?.includes(n)&&Lc();let o=s?ui(r):r;return Qn(n,o)}function Qn(n,r){if(!n.equals(r)){var s=n.v;Nn?mn.set(n,r):mn.set(n,s),n.v=r;var o=Oi.ensure();o.capture(n,s),(n.f&ti)!==0&&((n.f&pi)!==0&&Xs(n),ri(n,(n.f&$i)!==0?ni:ji)),n.wv=Uo(),So(n,pi),Cr()&&ce!==null&&(ce.f&ni)!==0&&(ce.f&(on|wn))===0&&(Ti===null?_u([n]):Ti.push(n)),!o.is_fork&&Rs.size>0&&!Eo&&nu()}return r}function nu(){Eo=!1;var n=Cn;Qr(!0);const r=Array.from(Rs);try{for(const s of r)(s.f&ni)!==0&&ri(s,ji),Ir(s)&&Sr(s)}finally{Qr(n)}Rs.clear()}function tr(n,r=1){var s=c(n),o=r===1?s++:s--;return M(n,s),o}function Pr(n){M(n,n.v+1)}function So(n,r){var s=n.reactions;if(s!==null)for(var o=Cr(),u=s.length,h=0;h<u;h++){var d=s[h],_=d.f;if(!(!o&&d===ce)){var p=(_&pi)===0;if(p&&ri(d,r),(_&ti)!==0){var y=d;Si?.delete(y),(_&On)===0&&(_&$i&&(d.f|=On),So(y,ji))}else p&&((_&an)!==0&&Xi!==null&&Xi.add(d),In(d))}}}function ui(n){if(typeof n!="object"||n===null||Ri in n)return n;const r=Vs(n);if(r!==fc&&r!==vc)return n;var s=new Map,o=Us(n),u=St(0),h=An,d=_=>{if(An===h)return _();var p=le,y=An;_i(null),Ja(h);var x=_();return _i(p),Ja(y),x};return o&&s.set("length",St(n.length)),new Proxy(n,{defineProperty(_,p,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&kc();var x=s.get(p);return x===void 0?x=d(()=>{var b=St(y.value);return s.set(p,b),b}):M(x,y.value,!0),!0},deleteProperty(_,p){var y=s.get(p);if(y===void 0){if(p in _){const x=d(()=>St(Xe));s.set(p,x),Pr(u)}}else M(y,Xe),Pr(u);return!0},get(_,p,y){if(p===Ri)return n;var x=s.get(p),b=p in _;if(x===void 0&&(!b||_n(_,p)?.writable)&&(x=d(()=>{var S=ui(b?_[p]:Xe),N=St(S);return N}),s.set(p,x)),x!==void 0){var P=c(x);return P===Xe?void 0:P}return Reflect.get(_,p,y)},getOwnPropertyDescriptor(_,p){var y=Reflect.getOwnPropertyDescriptor(_,p);if(y&&"value"in y){var x=s.get(p);x&&(y.value=c(x))}else if(y===void 0){var b=s.get(p),P=b?.v;if(b!==void 0&&P!==Xe)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return y},has(_,p){if(p===Ri)return!0;var y=s.get(p),x=y!==void 0&&y.v!==Xe||Reflect.has(_,p);if(y!==void 0||ce!==null&&(!x||_n(_,p)?.writable)){y===void 0&&(y=d(()=>{var P=x?ui(_[p]):Xe,S=St(P);return S}),s.set(p,y));var b=c(y);if(b===Xe)return!1}return x},set(_,p,y,x){var b=s.get(p),P=p in _;if(o&&p==="length")for(var S=y;S<b.v;S+=1){var N=s.get(S+"");N!==void 0?M(N,Xe):S in _&&(N=d(()=>St(Xe)),s.set(S+"",N))}if(b===void 0)(!P||_n(_,p)?.writable)&&(b=d(()=>St(void 0)),M(b,ui(y)),s.set(p,b));else{P=b.v!==Xe;var O=d(()=>ui(y));M(b,O)}var C=Reflect.getOwnPropertyDescriptor(_,p);if(C?.set&&C.set.call(x,y),!P){if(o&&typeof p=="string"){var Z=s.get("length"),ot=Number(p);Number.isInteger(ot)&&ot>=Z.v&&M(Z,ot+1)}Pr(u)}return!0},ownKeys(_){c(u);var p=Reflect.ownKeys(_).filter(b=>{var P=s.get(b);return P===void 0||P.v!==Xe});for(var[y,x]of s)x.v!==Xe&&!(y in _)&&p.push(y);return p},setPrototypeOf(){Tc()}})}function Ua(n){try{if(n!==null&&typeof n=="object"&&Ri in n)return n[Ri]}catch{}return n}function ru(n,r){return Object.is(Ua(n),Ua(r))}var Va,zo,Mo,Co;function su(){if(Va===void 0){Va=window,zo=/Firefox/.test(navigator.userAgent);var n=Element.prototype,r=Node.prototype,s=Text.prototype;Mo=_n(r,"firstChild").get,Co=_n(r,"nextSibling").get,Fa(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Fa(s)&&(s.__t=void 0)}}function en(n=""){return document.createTextNode(n)}function er(n){return Mo.call(n)}function Or(n){return Co.call(n)}function v(n,r){return er(n)}function rt(n,r=!1){{var s=er(n);return s instanceof Comment&&s.data===""?Or(s):s}}function g(n,r=1,s=!1){let o=n;for(;r--;)o=Or(o);return o}function au(n){n.textContent=""}function Ao(){return!1}function ou(n,r){if(r){const s=document.body;n.autofocus=!0,Dn(()=>{document.activeElement===s&&n.focus()})}}let Ga=!1;function lu(){Ga||(Ga=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const r of n.target.elements)r.__on_r?.()})},{capture:!0}))}function as(n){var r=le,s=ce;_i(null),zi(null);try{return n()}finally{_i(r),zi(s)}}function Oo(n,r,s,o=s){n.addEventListener(r,()=>as(s));const u=n.__on_r;u?n.__on_r=()=>{u(),o(!0)}:n.__on_r=()=>o(!0),lu()}function Io(n){ce===null&&(le===null&&wc(),bc()),Nn&&yc()}function cu(n,r){var s=r.last;s===null?r.last=r.first=n:(s.next=n,n.prev=s,r.last=n)}function Mi(n,r,s){var o=ce;o!==null&&(o.f&xi)!==0&&(n|=xi);var u={ctx:je,deps:null,nodes:null,f:n|pi|$i,first:null,fn:r,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{Sr(u),u.f|=Ys}catch(_){throw Ve(u),_}else r!==null&&In(u);var h=u;if(s&&h.deps===null&&h.teardown===null&&h.nodes===null&&h.first===h.last&&(h.f&$n)===0&&(h=h.first,(n&an)!==0&&(n&sn)!==0&&h!==null&&(h.f|=sn)),h!==null&&(h.parent=o,o!==null&&cu(h,o),le!==null&&(le.f&ti)!==0&&(n&wn)===0)){var d=le;(d.effects??=[]).push(h)}return u}function Lr(){return le!==null&&!qi}function os(n){const r=Mi(ns,null,!1);return ri(r,ni),r.teardown=n,r}function yn(n){Io();var r=ce.f,s=!le&&(r&on)!==0&&(r&Ys)===0;if(s){var o=je;(o.e??=[]).push(n)}else return $o(n)}function $o(n){return Mi(Gs|fo,n,!1)}function uu(n){return Io(),Mi(ns|fo,n,!0)}function Do(n){Oi.ensure();const r=Mi(wn|$n,n,!0);return()=>{Ve(r)}}function du(n){Oi.ensure();const r=Mi(wn|$n,n,!0);return(s={})=>new Promise(o=>{s.outro?Mn(r,()=>{Ve(r),o(void 0)}):(Ve(r),o(void 0))})}function ls(n){return Mi(Gs,n,!1)}function hu(n){return Mi(Js|$n,n,!0)}function Qs(n,r=0){return Mi(ns|r,n,!0)}function G(n,r=[],s=[],o=[]){ko(o,r,s,u=>{Mi(ns,()=>n(...u.map(c)),!0)})}function rr(n,r=0){var s=Mi(an|r,n,!0);return s}function No(n,r=0){var s=Mi(uo|r,n,!0);return s}function vi(n){return Mi(on|$n,n,!0)}function Zo(n){var r=n.teardown;if(r!==null){const s=Nn,o=le;Ya(!0),_i(null);try{r.call(null)}finally{Ya(s),_i(o)}}}function Bo(n,r=!1){var s=n.first;for(n.first=n.last=null;s!==null;){const u=s.ac;u!==null&&as(()=>{u.abort(Yn)});var o=s.next;(s.f&wn)!==0?s.parent=null:Ve(s,r),s=o}}function fu(n){for(var r=n.first;r!==null;){var s=r.next;(r.f&on)===0&&Ve(r),r=s}}function Ve(n,r=!0){var s=!1;(r||(n.f&ho)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(vu(n.nodes.start,n.nodes.end),s=!0),Bo(n,r&&!s),ts(n,0),ri(n,tn);var o=n.nodes&&n.nodes.t;if(o!==null)for(const h of o)h.stop();Zo(n);var u=n.parent;u!==null&&u.first!==null&&qo(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function vu(n,r){for(;n!==null;){var s=n===r?null:Or(n);n.remove(),n=s}}function qo(n){var r=n.parent,s=n.prev,o=n.next;s!==null&&(s.next=o),o!==null&&(o.prev=s),r!==null&&(r.first===n&&(r.first=o),r.last===n&&(r.last=s))}function Mn(n,r,s=!0){var o=[];Ro(n,o,!0);var u=()=>{s&&Ve(n),r&&r()},h=o.length;if(h>0){var d=()=>--h||u();for(var _ of o)_.out(d)}else u()}function Ro(n,r,s){if((n.f&xi)===0){n.f^=xi;var o=n.nodes&&n.nodes.t;if(o!==null)for(const _ of o)(_.is_global||s)&&r.push(_);for(var u=n.first;u!==null;){var h=u.next,d=(u.f&sn)!==0||(u.f&on)!==0&&(n.f&an)!==0;Ro(u,r,d?s:!1),u=h}}}function ta(n){jo(n,!0)}function jo(n,r){if((n.f&xi)!==0){n.f^=xi,(n.f&ni)===0&&(ri(n,pi),In(n));for(var s=n.first;s!==null;){var o=s.next,u=(s.f&sn)!==0||(s.f&on)!==0;jo(s,u?r:!1),s=o}var h=n.nodes&&n.nodes.t;if(h!==null)for(const d of h)(d.is_global||r)&&d.in()}}function Fo(n,r){if(n.nodes)for(var s=n.nodes.start,o=n.nodes.end;s!==null;){var u=s===o?null:Or(s);r.append(s),s=u}}let Cn=!1;function Qr(n){Cn=n}let Nn=!1;function Ya(n){Nn=n}let le=null,qi=!1;function _i(n){le=n}let ce=null;function zi(n){ce=n}let nn=null;function Ho(n){le!==null&&(nn===null?nn=[n]:nn.push(n))}let ci=null,yi=0,Ti=null;function _u(n){Ti=n}let Wo=1,Er=0,An=Er;function Ja(n){An=n}function Uo(){return++Wo}function Ir(n){var r=n.f;if((r&pi)!==0)return!0;if(r&ti&&(n.f&=~On),(r&ji)!==0){var s=n.deps;if(s!==null)for(var o=s.length,u=0;u<o;u++){var h=s[u];if(Ir(h)&&Lo(h),h.wv>n.wv)return!0}(r&$i)!==0&&Si===null&&ri(n,ni)}return!1}function Vo(n,r,s=!0){var o=n.reactions;if(o!==null&&!nn?.includes(n))for(var u=0;u<o.length;u++){var h=o[u];(h.f&ti)!==0?Vo(h,r,!1):r===h&&(s?ri(h,pi):(h.f&ni)!==0&&ri(h,ji),In(h))}}function Go(n){var r=ci,s=yi,o=Ti,u=le,h=nn,d=je,_=qi,p=An,y=n.f;ci=null,yi=0,Ti=null,le=(y&(on|wn))===0?n:null,nn=null,Kn(n.ctx),qi=!1,An=++Er,n.ac!==null&&(as(()=>{n.ac.abort(Yn)}),n.ac=null);try{n.f|=Bs;var x=n.fn,b=x(),P=n.deps;if(ci!==null){var S;if(ts(n,yi),P!==null&&yi>0)for(P.length=yi+ci.length,S=0;S<ci.length;S++)P[yi+S]=ci[S];else n.deps=P=ci;if(Lr()&&(n.f&$i)!==0)for(S=yi;S<P.length;S++)(P[S].reactions??=[]).push(n)}else P!==null&&yi<P.length&&(ts(n,yi),P.length=yi);if(Cr()&&Ti!==null&&!qi&&P!==null&&(n.f&(ti|ji|pi))===0)for(S=0;S<Ti.length;S++)Vo(Ti[S],n);return u!==null&&u!==n&&(Er++,Ti!==null&&(o===null?o=Ti:o.push(...Ti))),(n.f&pn)!==0&&(n.f^=pn),b}catch(N){return bo(N)}finally{n.f^=Bs,ci=r,yi=s,Ti=o,le=u,nn=h,Kn(d),qi=_,An=p}}function pu(n,r){let s=r.reactions;if(s!==null){var o=dc.call(s,n);if(o!==-1){var u=s.length-1;u===0?s=r.reactions=null:(s[o]=s[u],s.pop())}}s===null&&(r.f&ti)!==0&&(ci===null||!ci.includes(r))&&(ri(r,ji),(r.f&$i)!==0&&(r.f^=$i,r.f&=~On),To(r),ts(r,0))}function ts(n,r){var s=n.deps;if(s!==null)for(var o=r;o<s.length;o++)pu(n,s[o])}function Sr(n){var r=n.f;if((r&tn)===0){ri(n,ni);var s=ce,o=Cn;ce=n,Cn=!0;try{(r&(an|uo))!==0?fu(n):Bo(n),Zo(n);var u=Go(n);n.teardown=typeof u=="function"?u:null,n.wv=Wo;var h;Ns&&Hc&&(n.f&pi)!==0&&n.deps}finally{Cn=o,ce=s}}}async function mu(){await Promise.resolve(),Vc()}function c(n){var r=n.f,s=(r&ti)!==0;if(le!==null&&!qi){var o=ce!==null&&(ce.f&tn)!==0;if(!o&&!nn?.includes(n)){var u=le.deps;if((le.f&Bs)!==0)n.rv<Er&&(n.rv=Er,ci===null&&u!==null&&u[yi]===n?yi++:ci===null?ci=[n]:ci.includes(n)||ci.push(n));else{(le.deps??=[]).push(n);var h=n.reactions;h===null?n.reactions=[le]:h.includes(le)||h.push(le)}}}if(Nn){if(mn.has(n))return mn.get(n);if(s){var d=n,_=d.v;return((d.f&ni)===0&&d.reactions!==null||Jo(d))&&(_=Xs(d)),mn.set(d,_),_}}else s&&(!Si?.has(n)||de?.is_fork&&!Lr())&&(d=n,Ir(d)&&Lo(d),Cn&&Lr()&&(d.f&$i)===0&&Yo(d));if(Si?.has(n))return Si.get(n);if((n.f&pn)!==0)throw n.v;return n.v}function Yo(n){if(n.deps!==null){n.f^=$i;for(const r of n.deps)(r.reactions??=[]).push(n),(r.f&ti)!==0&&(r.f&$i)===0&&Yo(r)}}function Jo(n){if(n.v===Xe)return!0;if(n.deps===null)return!1;for(const r of n.deps)if(mn.has(r)||(r.f&ti)!==0&&Jo(r))return!0;return!1}function bn(n){var r=qi;try{return qi=!0,n()}finally{qi=r}}const gu=-7169;function ri(n,r){n.f=n.f&gu|r}function Gn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Ri in n)js(n);else if(!Array.isArray(n))for(let r in n){const s=n[r];typeof s=="object"&&s&&Ri in s&&js(s)}}}function js(n,r=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!r.has(n)){r.add(n),n instanceof Date&&n.getTime();for(let o in n)try{js(n[o],r)}catch{}const s=Vs(n);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const o=lo(s);for(let u in o){const h=o[u].get;if(h)try{h.call(n)}catch{}}}}}function yu(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const bu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function wu(n){return bu.includes(n)}const xu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Pu(n){return n=n.toLowerCase(),xu[n]??n}const ku=["touchstart","touchmove"];function Tu(n){return ku.includes(n)}const Ko=new Set,Fs=new Set;function Xo(n,r,s,o={}){function u(h){if(o.capture||mr.call(r,h),!h.cancelBubble)return as(()=>s?.call(this,h))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Dn(()=>{r.addEventListener(n,u,o)}):r.addEventListener(n,u,o),u}function As(n,r,s,o,u){var h={capture:o,passive:u},d=Xo(n,r,s,h);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&os(()=>{r.removeEventListener(n,d,h)})}function Zn(n){for(var r=0;r<n.length;r++)Ko.add(n[r]);for(var s of Fs)s(n)}let Ka=null;function mr(n){var r=this,s=r.ownerDocument,o=n.type,u=n.composedPath?.()||[],h=u[0]||n.target;Ka=n;var d=0,_=Ka===n&&n.__root;if(_){var p=u.indexOf(_);if(p!==-1&&(r===document||r===window)){n.__root=r;return}var y=u.indexOf(r);if(y===-1)return;p<=y&&(d=p)}if(h=u[d]||n.target,h!==r){hc(n,"currentTarget",{configurable:!0,get(){return h||s}});var x=le,b=ce;_i(null),zi(null);try{for(var P,S=[];h!==null;){var N=h.assignedSlot||h.parentNode||h.host||null;try{var O=h["__"+o];O!=null&&(!h.disabled||n.target===h)&&O.call(h,n)}catch(C){P?S.push(C):P=C}if(n.cancelBubble||N===r||N===null)break;h=N}if(P){for(let C of S)queueMicrotask(()=>{throw C});throw P}}finally{n.__root=r,delete n.currentTarget,_i(x),zi(b)}}}function Qo(n){var r=document.createElement("template");return r.innerHTML=n.replaceAll("<!>","<!---->"),r.content}function zr(n,r){var s=ce;s.nodes===null&&(s.nodes={start:n,end:r,a:null,t:null})}function D(n,r){var s=(r&Dc)!==0,o=(r&Nc)!==0,u,h=!n.startsWith("<!>");return()=>{u===void 0&&(u=Qo(h?n:"<!>"+n),s||(u=er(u)));var d=o||zo?document.importNode(u,!0):u.cloneNode(!0);if(s){var _=er(d),p=d.lastChild;zr(_,p)}else zr(d,d);return d}}function Lu(n,r,s="svg"){var o=!n.startsWith("<!>"),u=`<${s}>${o?n:"<!>"+n}</${s}>`,h;return()=>{if(!h){var d=Qo(u),_=er(d);h=er(_)}var p=h.cloneNode(!0);return zr(p,p),p}}function tl(n,r){return Lu(n,r,"svg")}function Nt(){var n=document.createDocumentFragment(),r=document.createComment(""),s=en();return n.append(r,s),zr(r,s),n}function E(n,r){n!==null&&n.before(r)}function z(n,r){var s=r==null?"":typeof r=="object"?r+"":r;s!==(n.__t??=n.nodeValue)&&(n.__t=s,n.nodeValue=s+"")}function Eu(n,r){return Su(n,r)}const Un=new Map;function Su(n,{target:r,anchor:s,props:o={},events:u,context:h,intro:d=!0}){su();var _=new Set,p=b=>{for(var P=0;P<b.length;P++){var S=b[P];if(!_.has(S)){_.add(S);var N=Tu(S);r.addEventListener(S,mr,{passive:N});var O=Un.get(S);O===void 0?(document.addEventListener(S,mr,{passive:N}),Un.set(S,1)):Un.set(S,O+1)}}};p(is(Ko)),Fs.add(p);var y=void 0,x=du(()=>{var b=s??r.appendChild(en());return Kc(b,{pending:()=>{}},P=>{if(h){Fi({});var S=je;S.c=h}u&&(o.$$events=u),y=n(P,o)||{},h&&Hi()}),()=>{for(var P of _){r.removeEventListener(P,mr);var S=Un.get(P);--S===0?(document.removeEventListener(P,mr),Un.delete(P)):Un.set(P,S)}Fs.delete(p),b!==s&&b.parentNode?.removeChild(b)}});return zu.set(y,x),y}let zu=new WeakMap;class cs{anchor;#t=new Map;#e=new Map;#n=new Map;#i=new Set;#l=!0;constructor(r,s=!0){this.anchor=r,this.#l=s}#s=()=>{var r=de;if(this.#t.has(r)){var s=this.#t.get(r),o=this.#e.get(s);if(o)ta(o),this.#i.delete(s);else{var u=this.#n.get(s);u&&(this.#e.set(s,u.effect),this.#n.delete(s),u.fragment.lastChild.remove(),this.anchor.before(u.fragment),o=u.effect)}for(const[h,d]of this.#t){if(this.#t.delete(h),h===r)break;const _=this.#n.get(d);_&&(Ve(_.effect),this.#n.delete(d))}for(const[h,d]of this.#e){if(h===s||this.#i.has(h))continue;const _=()=>{if(Array.from(this.#t.values()).includes(h)){var y=document.createDocumentFragment();Fo(d,y),y.append(en()),this.#n.set(h,{effect:d,fragment:y})}else Ve(d);this.#i.delete(h),this.#e.delete(h)};this.#l||!o?(this.#i.add(h),Mn(d,_,!1)):_()}}};#r=r=>{this.#t.delete(r);const s=Array.from(this.#t.values());for(const[o,u]of this.#n)s.includes(o)||(Ve(u.effect),this.#n.delete(o))};ensure(r,s){var o=de,u=Ao();if(s&&!this.#e.has(r)&&!this.#n.has(r))if(u){var h=document.createDocumentFragment(),d=en();h.append(d),this.#n.set(r,{effect:vi(()=>s(d)),fragment:h})}else this.#e.set(r,vi(()=>s(this.anchor)));if(this.#t.set(o,r),u){for(const[_,p]of this.#e)_===r?o.skipped_effects.delete(p):o.skipped_effects.add(p);for(const[_,p]of this.#n)_===r?o.skipped_effects.delete(p.effect):o.skipped_effects.add(p.effect);o.oncommit(this.#s),o.ondiscard(this.#r)}else this.#s()}}function tt(n,r,s=!1){var o=new cs(n),u=s?sn:0;function h(d,_){o.ensure(d,_)}rr(()=>{var d=!1;r((_,p=!0)=>{d=!0,h(p,_)}),d||h(!1,null)},u)}function Qe(n,r){return r}function Mu(n,r,s){for(var o=[],u=r.length,h,d=r.length,_=0;_<u;_++){let b=r[_];Mn(b,()=>{if(h){if(h.pending.delete(b),h.done.add(b),h.pending.size===0){var P=n.outrogroups;Hs(is(h.done)),P.delete(h),P.size===0&&(n.outrogroups=null)}}else d-=1},!1)}if(d===0){var p=o.length===0&&s!==null;if(p){var y=s,x=y.parentNode;au(x),x.append(y),n.items.clear()}Hs(r,!p)}else h={pending:new Set(r),done:new Set},(n.outrogroups??=new Set).add(h)}function Hs(n,r=!0){for(var s=0;s<n.length;s++)Ve(n[s],r)}var Xa;function Ie(n,r,s,o,u,h=null){var d=n,_=new Map,p=(r&_o)!==0;if(p){var y=n;d=y.appendChild(en())}var x=null,b=Ks(()=>{var Z=s();return Us(Z)?Z:Z==null?[]:is(Z)}),P,S=!0;function N(){C.fallback=x,Cu(C,P,d,r,o),x!==null&&(P.length===0?(x.f&Qi)===0?ta(x):(x.f^=Qi,gr(x,null,d)):Mn(x,()=>{x=null}))}var O=rr(()=>{P=c(b);for(var Z=P.length,ot=new Set,j=de,R=Ao(),K=0;K<Z;K+=1){var Y=P[K],J=o(Y,K),F=S?null:_.get(J);F?(F.v&&Qn(F.v,Y),F.i&&Qn(F.i,K),R&&j.skipped_effects.delete(F.e)):(F=Au(_,S?d:Xa??=en(),Y,J,K,u,r,s),S||(F.e.f|=Qi),_.set(J,F)),ot.add(J)}if(Z===0&&h&&!x&&(S?x=vi(()=>h(d)):(x=vi(()=>h(Xa??=en())),x.f|=Qi)),!S)if(R){for(const[st,lt]of _)ot.has(st)||j.skipped_effects.add(lt.e);j.oncommit(N),j.ondiscard(()=>{})}else N();c(b)}),C={effect:O,items:_,outrogroups:null,fallback:x};S=!1}function Cu(n,r,s,o,u){var h=(o&Mc)!==0,d=r.length,_=n.items,p=n.effect.first,y,x=null,b,P=[],S=[],N,O,C,Z;if(h)for(Z=0;Z<d;Z+=1)N=r[Z],O=u(N,Z),C=_.get(O).e,(C.f&Qi)===0&&(C.nodes?.a?.measure(),(b??=new Set).add(C));for(Z=0;Z<d;Z+=1){if(N=r[Z],O=u(N,Z),C=_.get(O).e,n.outrogroups!==null)for(const lt of n.outrogroups)lt.pending.delete(C),lt.done.delete(C);if((C.f&Qi)!==0)if(C.f^=Qi,C===p)gr(C,null,s);else{var ot=x?x.next:p;C===n.effect.last&&(n.effect.last=C.prev),C.prev&&(C.prev.next=C.next),C.next&&(C.next.prev=C.prev),vn(n,x,C),vn(n,C,ot),gr(C,ot,s),x=C,P=[],S=[],p=x.next;continue}if((C.f&xi)!==0&&(ta(C),h&&(C.nodes?.a?.unfix(),(b??=new Set).delete(C))),C!==p){if(y!==void 0&&y.has(C)){if(P.length<S.length){var j=S[0],R;x=j.prev;var K=P[0],Y=P[P.length-1];for(R=0;R<P.length;R+=1)gr(P[R],j,s);for(R=0;R<S.length;R+=1)y.delete(S[R]);vn(n,K.prev,Y.next),vn(n,x,K),vn(n,Y,j),p=j,x=Y,Z-=1,P=[],S=[]}else y.delete(C),gr(C,p,s),vn(n,C.prev,C.next),vn(n,C,x===null?n.effect.first:x.next),vn(n,x,C),x=C;continue}for(P=[],S=[];p!==null&&p!==C;)(y??=new Set).add(p),S.push(p),p=p.next;if(p===null)continue}(C.f&Qi)===0&&P.push(C),x=C,p=C.next}if(n.outrogroups!==null){for(const lt of n.outrogroups)lt.pending.size===0&&(Hs(is(lt.done)),n.outrogroups?.delete(lt));n.outrogroups.size===0&&(n.outrogroups=null)}if(p!==null||y!==void 0){var J=[];if(y!==void 0)for(C of y)(C.f&xi)===0&&J.push(C);for(;p!==null;)(p.f&xi)===0&&p!==n.fallback&&J.push(p),p=p.next;var F=J.length;if(F>0){var st=(o&_o)!==0&&d===0?s:null;if(h){for(Z=0;Z<F;Z+=1)J[Z].nodes?.a?.measure();for(Z=0;Z<F;Z+=1)J[Z].nodes?.a?.fix()}Mu(n,J,st)}}h&&Dn(()=>{if(b!==void 0)for(C of b)C.nodes?.a?.apply()})}function Au(n,r,s,o,u,h,d,_){var p=(d&Sc)!==0?(d&Cc)===0?iu(s,!1,!1):gn(s):null,y=(d&zc)!==0?gn(u):null;return{v:p,i:y,e:vi(()=>(h(r,p??s,y??u,_),()=>{n.delete(o)}))}}function gr(n,r,s){if(n.nodes)for(var o=n.nodes.start,u=n.nodes.end,h=r&&(r.f&Qi)===0?r.nodes.start:s;o!==null;){var d=Or(o);if(h.before(o),o===u)return;o=d}}function vn(n,r,s){r===null?n.effect.first=s:r.next=s,s===null?n.effect.last=r:s.prev=r}function be(n,r,s,o,u){var h=r.$$slots?.[s],d=!1;h===!0&&(h=r.children,d=!0),h===void 0||h(n,d?()=>o:o)}function Ou(n,r,...s){var o=new cs(n);rr(()=>{const u=r()??null;o.ensure(u,u&&(h=>u(h,...s)))},sn)}function rn(n,r,s){var o=new cs(n);rr(()=>{var u=r()??null;o.ensure(u,u&&(h=>s(h,u)))},sn)}function Iu(n,r,s,o,u,h){var d=null,_=n,p=new cs(_,!1);rr(()=>{const y=r()||null;var x=Bc;if(y===null){p.ensure(null,null);return}return p.ensure(y,b=>{if(y){if(d=document.createElementNS(x,y),zr(d,d),o){var P=d.appendChild(en());o(d,P)}ce.nodes.end=d,b.before(d)}}),()=>{}},sn),os(()=>{})}function $u(n,r){var s=void 0,o;No(()=>{s!==(s=r())&&(o&&(Ve(o),o=null),s&&(o=vi(()=>{ls(()=>s(n))})))})}function el(n){var r,s,o="";if(typeof n=="string"||typeof n=="number")o+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(r=0;r<u;r++)n[r]&&(s=el(n[r]))&&(o&&(o+=" "),o+=s)}else for(s in n)n[s]&&(o&&(o+=" "),o+=s);return o}function Du(){for(var n,r,s=0,o="",u=arguments.length;s<u;s++)(n=arguments[s])&&(r=el(n))&&(o&&(o+=" "),o+=r);return o}function Nu(n){return typeof n=="object"?Du(n):n??""}const Qa=[...` 	
\r\fÂ \v\uFEFF`];function Zu(n,r,s){var o=n==null?"":""+n;if(r&&(o=o?o+" "+r:r),s){for(var u in s)if(s[u])o=o?o+" "+u:u;else if(o.length)for(var h=u.length,d=0;(d=o.indexOf(u,d))>=0;){var _=d+h;(d===0||Qa.includes(o[d-1]))&&(_===o.length||Qa.includes(o[_]))?o=(d===0?"":o.substring(0,d))+o.substring(_+1):d=_}}return o===""?null:o}function to(n,r=!1){var s=r?" !important;":";",o="";for(var u in n){var h=n[u];h!=null&&h!==""&&(o+=" "+u+": "+h+s)}return o}function Os(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function Bu(n,r){if(r){var s="",o,u;if(Array.isArray(r)?(o=r[0],u=r[1]):o=r,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var h=!1,d=0,_=!1,p=[];o&&p.push(...Object.keys(o).map(Os)),u&&p.push(...Object.keys(u).map(Os));var y=0,x=-1;const O=n.length;for(var b=0;b<O;b++){var P=n[b];if(_?P==="/"&&n[b-1]==="*"&&(_=!1):h?h===P&&(h=!1):P==="/"&&n[b+1]==="*"?_=!0:P==='"'||P==="'"?h=P:P==="("?d++:P===")"&&d--,!_&&h===!1&&d===0){if(P===":"&&x===-1)x=b;else if(P===";"||b===O-1){if(x!==-1){var S=Os(n.substring(y,x).trim());if(!p.includes(S)){P!==";"&&b++;var N=n.substring(y,b).trim();s+=" "+N+";"}}y=b+1,x=-1}}}}return o&&(s+=to(o)),u&&(s+=to(u,!0)),s=s.trim(),s===""?null:s}return n==null?null:String(n)}function wi(n,r,s,o,u,h){var d=n.__className;if(d!==s||d===void 0){var _=Zu(s,o,h);_==null?n.removeAttribute("class"):r?n.className=_:n.setAttribute("class",_),n.__className=s}else if(h&&u!==h)for(var p in h){var y=!!h[p];(u==null||y!==!!u[p])&&n.classList.toggle(p,y)}return h}function Is(n,r={},s,o){for(var u in s){var h=s[u];r[u]!==h&&(s[u]==null?n.style.removeProperty(u):n.style.setProperty(u,h,o))}}function ii(n,r,s,o){var u=n.__style;if(u!==r){var h=Bu(r,o);h==null?n.removeAttribute("style"):n.style.cssText=h,n.__style=r}else o&&(Array.isArray(o)?(Is(n,s?.[0],o[0]),Is(n,s?.[1],o[1],"important")):Is(n,s,o));return o}function es(n,r,s=!1){if(n.multiple){if(r==null)return;if(!Us(r))return Rc();for(var o of n.options)o.selected=r.includes(kr(o));return}for(o of n.options){var u=kr(o);if(ru(u,r)){o.selected=!0;return}}(!s||r!==void 0)&&(n.selectedIndex=-1)}function il(n){var r=new MutationObserver(()=>{es(n,n.__value)});r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),os(()=>{r.disconnect()})}function nl(n,r,s=r){var o=new WeakSet,u=!0;Oo(n,"change",h=>{var d=h?"[selected]":":checked",_;if(n.multiple)_=[].map.call(n.querySelectorAll(d),kr);else{var p=n.querySelector(d)??n.querySelector("option:not([disabled])");_=p&&kr(p)}s(_),de!==null&&o.add(de)}),ls(()=>{var h=r();if(n===document.activeElement){var d=wr??de;if(o.has(d))return}if(es(n,h,u),u&&h===void 0){var _=n.querySelector(":checked");_!==null&&(h=kr(_),s(h))}n.__value=h,u=!1}),il(n)}function kr(n){return"__value"in n?n.__value:n.value}const _r=Symbol("class"),pr=Symbol("style"),rl=Symbol("is custom element"),sl=Symbol("is html");function qu(n,r){r?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function De(n,r,s,o){var u=al(n);u[r]!==(u[r]=s)&&(r==="loading"&&(n[pc]=s),s==null?n.removeAttribute(r):typeof s!="string"&&ol(n).includes(r)?n[r]=s:n.setAttribute(r,s))}function Ru(n,r,s,o,u=!1,h=!1){var d=al(n),_=d[rl],p=!d[sl],y=r||{},x=n.tagName==="OPTION";for(var b in r)b in s||(s[b]=null);s.class?s.class=Nu(s.class):s[_r]&&(s.class=null),s[pr]&&(s.style??=null);var P=ol(n);for(const R in s){let K=s[R];if(x&&R==="value"&&K==null){n.value=n.__value="",y[R]=K;continue}if(R==="class"){var S=n.namespaceURI==="http://www.w3.org/1999/xhtml";wi(n,S,K,o,r?.[_r],s[_r]),y[R]=K,y[_r]=s[_r];continue}if(R==="style"){ii(n,K,r?.[pr],s[pr]),y[R]=K,y[pr]=s[pr];continue}var N=y[R];if(!(K===N&&!(K===void 0&&n.hasAttribute(R)))){y[R]=K;var O=R[0]+R[1];if(O!=="$$")if(O==="on"){const Y={},J="$$"+R;let F=R.slice(2);var C=wu(F);if(yu(F)&&(F=F.slice(0,-7),Y.capture=!0),!C&&N){if(K!=null)continue;n.removeEventListener(F,y[J],Y),y[J]=null}if(K!=null)if(C)n[`__${F}`]=K,Zn([F]);else{let st=function(lt){y[R].call(this,lt)};var j=st;y[J]=Xo(F,n,st,Y)}else C&&(n[`__${F}`]=void 0)}else if(R==="style")De(n,R,K);else if(R==="autofocus")ou(n,!!K);else if(!_&&(R==="__value"||R==="value"&&K!=null))n.value=n.__value=K;else if(R==="selected"&&x)qu(n,K);else{var Z=R;p||(Z=Pu(Z));var ot=Z==="defaultValue"||Z==="defaultChecked";if(K==null&&!_&&!ot)if(d[R]=null,Z==="value"||Z==="checked"){let Y=n;const J=r===void 0;if(Z==="value"){let F=Y.defaultValue;Y.removeAttribute(Z),Y.defaultValue=F,Y.value=Y.__value=J?F:null}else{let F=Y.defaultChecked;Y.removeAttribute(Z),Y.defaultChecked=F,Y.checked=J?F:!1}}else n.removeAttribute(R);else ot||P.includes(Z)&&(_||typeof K!="string")?(n[Z]=K,Z in d&&(d[Z]=Xe)):typeof K!="function"&&De(n,Z,K)}}}return y}function eo(n,r,s=[],o=[],u=[],h,d=!1,_=!1){ko(u,s,o,p=>{var y=void 0,x={},b=n.nodeName==="SELECT",P=!1;if(No(()=>{var N=r(...p.map(c)),O=Ru(n,y,N,h,d,_);P&&b&&"value"in N&&es(n,N.value);for(let Z of Object.getOwnPropertySymbols(x))N[Z]||Ve(x[Z]);for(let Z of Object.getOwnPropertySymbols(N)){var C=N[Z];Z.description===qc&&(!y||C!==y[Z])&&(x[Z]&&Ve(x[Z]),x[Z]=vi(()=>$u(n,()=>C))),O[Z]=C}y=O}),b){var S=n;ls(()=>{es(S,y.value,!0),il(S)})}P=!0})}function al(n){return n.__attributes??={[rl]:n.nodeName.includes("-"),[sl]:n.namespaceURI===Zc}}var io=new Map;function ol(n){var r=n.getAttribute("is")||n.nodeName,s=io.get(r);if(s)return s;io.set(r,s=[]);for(var o,u=n,h=Element.prototype;h!==u;){o=lo(u);for(var d in o)o[d].set&&s.push(d);u=Vs(u)}return s}function Ii(n,r,s=r){var o=new WeakSet;Oo(n,"input",async u=>{var h=u?n.defaultValue:n.value;if(h=$s(n)?Ds(h):h,s(h),de!==null&&o.add(de),await mu(),h!==(h=r())){var d=n.selectionStart,_=n.selectionEnd,p=n.value.length;if(n.value=h??"",_!==null){var y=n.value.length;d===_&&_===p&&y>p?(n.selectionStart=y,n.selectionEnd=y):(n.selectionStart=d,n.selectionEnd=Math.min(_,y))}}}),bn(r)==null&&n.value&&(s($s(n)?Ds(n.value):n.value),de!==null&&o.add(de)),Qs(()=>{var u=r();if(n===document.activeElement){var h=wr??de;if(o.has(h))return}$s(n)&&u===Ds(n.value)||n.type==="date"&&!u&&!n.value||u!==n.value&&(n.value=u??"")})}function $s(n){var r=n.type;return r==="number"||r==="range"}function Ds(n){return n===""?null:+n}function no(n,r){return n===r||n?.[Ri]===r}function ju(n={},r,s,o){return ls(()=>{var u,h;return Qs(()=>{u=h,h=[],bn(()=>{n!==s(...h)&&(r(n,...h),u&&no(s(...u),n)&&r(null,...u))})}),()=>{Dn(()=>{h&&no(s(...h),n)&&r(null,...h)})}}),n}function Fu(n=!1){const r=je,s=r.l.u;if(!s)return;let o=()=>Gn(r.s);if(n){let u=0,h={};const d=Ar(()=>{let _=!1;const p=r.s;for(const y in p)p[y]!==h[y]&&(h[y]=p[y],_=!0);return _&&u++,u});o=()=>c(d)}s.b.length&&uu(()=>{ro(r,o),Zs(s.b)}),yn(()=>{const u=bn(()=>s.m.map(_c));return()=>{for(const h of u)typeof h=="function"&&h()}}),s.a.length&&yn(()=>{ro(r,o),Zs(s.a)})}function ro(n,r){if(n.l.s)for(const s of n.l.s)c(s);r()}let Jr=!1;function Hu(n){var r=Jr;try{return Jr=!1,[n(),Jr]}finally{Jr=r}}const Wu={get(n,r){if(!n.exclude.includes(r))return c(n.version),r in n.special?n.special[r]():n.props[r]},set(n,r,s){if(!(r in n.special)){var o=ce;try{zi(n.parent_effect),n.special[r]=bi({get[r](){return n.props[r]}},r,po)}finally{zi(o)}}return n.special[r](s),tr(n.version),!0},getOwnPropertyDescriptor(n,r){if(!n.exclude.includes(r)&&r in n.props)return{enumerable:!0,configurable:!0,value:n.props[r]}},deleteProperty(n,r){return n.exclude.includes(r)||(n.exclude.push(r),tr(n.version)),!0},has(n,r){return n.exclude.includes(r)?!1:r in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(r=>!n.exclude.includes(r))}};function ve(n,r){return new Proxy({props:n,exclude:r,special:{},version:gn(0),parent_effect:ce},Wu)}const Uu={get(n,r){let s=n.props.length;for(;s--;){let o=n.props[s];if(vr(o)&&(o=o()),typeof o=="object"&&o!==null&&r in o)return o[r]}},set(n,r,s){let o=n.props.length;for(;o--;){let u=n.props[o];vr(u)&&(u=u());const h=_n(u,r);if(h&&h.set)return h.set(s),!0}return!1},getOwnPropertyDescriptor(n,r){let s=n.props.length;for(;s--;){let o=n.props[s];if(vr(o)&&(o=o()),typeof o=="object"&&o!==null&&r in o){const u=_n(o,r);return u&&!u.configurable&&(u.configurable=!0),u}}},has(n,r){if(r===Ri||r===vo)return!1;for(let s of n.props)if(vr(s)&&(s=s()),s!=null&&r in s)return!0;return!1},ownKeys(n){const r=[];for(let s of n.props)if(vr(s)&&(s=s()),!!s){for(const o in s)r.includes(o)||r.push(o);for(const o of Object.getOwnPropertySymbols(s))r.includes(o)||r.push(o)}return r}};function ke(...n){return new Proxy({props:n},Uu)}function bi(n,r,s,o){var u=!nr||(s&Oc)!==0,h=(s&Ic)!==0,d=(s&$c)!==0,_=o,p=!0,y=()=>(p&&(p=!1,_=d?bn(o):o),_),x;if(h){var b=Ri in n||vo in n;x=_n(n,r)?.set??(b&&r in n?j=>n[r]=j:void 0)}var P,S=!1;h?[P,S]=Hu(()=>n[r]):P=n[r],P===void 0&&o!==void 0&&(P=y(),x&&(u&&Pc(),x(P)));var N;if(u?N=()=>{var j=n[r];return j===void 0?y():(p=!0,j)}:N=()=>{var j=n[r];return j!==void 0&&(_=void 0),j===void 0?_:j},u&&(s&po)===0)return N;if(x){var O=n.$$legacy;return(function(j,R){return arguments.length>0?((!u||!R||O||S)&&x(R?N():j),j):N()})}var C=!1,Z=((s&Ac)!==0?Ar:Ks)(()=>(C=!1,N()));h&&c(Z);var ot=ce;return(function(j,R){if(arguments.length>0){const K=R?c(Z):u&&h?ui(j):j;return M(Z,K),C=!0,_!==void 0&&(_=K),j}return Nn&&C||(ot.f&tn)!==0?Z.v:c(Z)})}function Vu(n){je===null&&mc(),nr&&je.l!==null?Gu(je).m.push(n):yn(()=>{const r=bn(n);if(typeof r=="function")return r})}function Gu(n){var r=n.l;return r.u??={a:[],b:[],m:[]}}const Yu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Yu);Wc();const Ju={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ku=tl("<svg><!><!></svg>");function Te(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]),o=ve(s,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Fi(r,!1);let u=bi(r,"name",8,void 0),h=bi(r,"color",8,"currentColor"),d=bi(r,"size",8,24),_=bi(r,"strokeWidth",8,2),p=bi(r,"absoluteStrokeWidth",8,!1),y=bi(r,"iconNode",24,()=>[]);const x=(...N)=>N.filter((O,C,Z)=>!!O&&Z.indexOf(O)===C).join(" ");Fu();var b=Ku();eo(b,(N,O)=>({...Ju,...o,width:d(),height:d(),stroke:h(),"stroke-width":N,class:O}),[()=>(Gn(p()),Gn(_()),Gn(d()),bn(()=>p()?Number(_())*24/Number(d()):_())),()=>(Gn(u()),Gn(s),bn(()=>x("lucide-icon","lucide",u()?`lucide-${u()}`:"",s.class)))]);var P=v(b);Ie(P,1,y,Qe,(N,O)=>{var C=oe(()=>br(c(O),2));let Z=()=>c(C)[0],ot=()=>c(C)[1];var j=Nt(),R=rt(j);Iu(R,Z,!0,(K,Y)=>{eo(K,()=>({...ot()}))}),E(N,j)});var S=g(P);be(S,r,"default",{}),E(n,b),Hi()}function Xu(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];Te(n,ke({name:"book"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function Ws(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];Te(n,ke({name:"calendar"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ll(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"}],["circle",{cx:"7",cy:"17",r:"2"}],["path",{d:"M9 17h6"}],["circle",{cx:"17",cy:"17",r:"2"}]];Te(n,ke({name:"car"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function Qu(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M20 6 9 17l-5-5"}]];Te(n,ke({name:"check"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function cl(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m15 18-6-6 6-6"}]];Te(n,ke({name:"chevron-left"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ul(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m9 18 6-6-6-6"}]];Te(n,ke({name:"chevron-right"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function so(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];Te(n,ke({name:"clock"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function td(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}],["path",{d:"M16 14v6"}],["path",{d:"M8 14v6"}],["path",{d:"M12 16v6"}]];Te(n,ke({name:"cloud-rain"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ed(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}],["path",{d:"M8 15h.01"}],["path",{d:"M8 19h.01"}],["path",{d:"M12 17h.01"}],["path",{d:"M12 21h.01"}],["path",{d:"M16 15h.01"}],["path",{d:"M16 19h.01"}]];Te(n,ke({name:"cloud-snow"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function id(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];Te(n,ke({name:"cloud"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ea(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];Te(n,ke({name:"dollar-sign"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ia(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];Te(n,ke({name:"download"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function nd(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];Te(n,ke({name:"ellipsis-vertical"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function dl(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"}]];Te(n,ke({name:"heart"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function hl(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];Te(n,ke({name:"house"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function rd(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];Te(n,ke({name:"image"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ao(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];Te(n,ke({name:"languages"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function sd(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];Te(n,ke({name:"loader-circle"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function Jn(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}],["circle",{cx:"12",cy:"10",r:"3"}]];Te(n,ke({name:"map-pin"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function fl(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]];Te(n,ke({name:"package"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function Mr(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];Te(n,ke({name:"plus"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ad(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Te(n,ke({name:"search"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function vl(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]];Te(n,ke({name:"shopping-cart"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function Kr(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];Te(n,ke({name:"square-pen"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function od(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];Te(n,ke({name:"sun"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function zn(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Te(n,ke({name:"trash-2"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function _l(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}],["path",{d:"M7 2v20"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"}]];Te(n,ke({name:"utensils"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function ld(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2"}]];Te(n,ke({name:"wind"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}function Tr(n,r){const s=ve(r,["children","$$slots","$$events","$$legacy"]);const o=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Te(n,ke({name:"x"},()=>s,{get iconNode(){return o},children:(u,h)=>{var d=Nt(),_=rt(d);be(_,r,"default",{}),E(u,d)},$$slots:{default:!0}}))}const cd=["TWD","JPY","USD"],Ei={TWD:"NT$",JPY:"Â¥",USD:"$"};class ud{#t=St(ui([]));get trips(){return c(this.#t)}set trips(r){M(this.#t,r,!0)}constructor(){if(typeof localStorage<"u"){const r=localStorage.getItem("trips");if(r)try{const s=JSON.parse(r);s.forEach(o=>{o.currency||(o.currency="USD"),o.generalExpenses||(o.generalExpenses=[]),o.days.forEach(u=>{u.journals||(u.journals=[],u.journal&&(u.journal.content||u.journal.location)&&u.journals.push({id:ir(),timestamp:"12:00",content:u.journal.content||"",weather:u.journal.weather||null,location:u.journal.location||"",photos:[]}),delete u.journal),u.journals.forEach(h=>{h.photos||(h.photos=[])}),u.activities.forEach(h=>{h.actualCost&&!h.expenses?h.expenses=[{id:ir(),amount:h.actualCost,category:h.category||"other",date:u.date,currency:o.currency}]:h.expenses||(h.expenses=[]),h.expenses.forEach(d=>{d.currency||(d.currency=o.currency)}),delete h.actualCost,delete h.category})})}),this.trips=s}catch(s){console.error("Failed to parse trips",s)}Do(()=>{yn(()=>{localStorage.setItem("trips",JSON.stringify(this.trips))})})}}addTrip(r){r.days.forEach(s=>{s.journals||(s.journals=[])}),r.generalExpenses||(r.generalExpenses=[]),this.trips.push(r)}removeTrip(r){this.trips=this.trips.filter(s=>s.id!==r)}updateTrip(r){const s=this.trips.findIndex(o=>o.id===r.id);s!==-1&&(this.trips[s]=r)}getTrip(r){return this.trips.find(s=>s.id===r)}addJournalEntry(r,s,o){const u=this.getTrip(r);u&&u.days[s]&&(u.days[s].journals.push(o),u.days[s].journals.sort((h,d)=>h.timestamp.localeCompare(d.timestamp)))}updateJournalEntry(r,s,o){const u=this.getTrip(r);if(u&&u.days[s]){const h=u.days[s].journals.findIndex(d=>d.id===o.id);h!==-1&&(u.days[s].journals[h]=o,u.days[s].journals.sort((d,_)=>d.timestamp.localeCompare(_.timestamp)))}}removeJournalEntry(r,s,o){const u=this.getTrip(r);u&&u.days[s]&&(u.days[s].journals=u.days[s].journals.filter(h=>h.id!==o))}addActivity(r,s,o){const u=this.getTrip(r);u&&u.days[s]&&u.days[s].activities.push(o)}updateActivity(r,s,o){const u=this.getTrip(r);if(u&&u.days[s]){const h=u.days[s].activities.findIndex(d=>d.id===o.id);h!==-1&&(u.days[s].activities[h]=o)}}removeActivity(r,s,o){const u=this.getTrip(r);u&&u.days[s]&&u.days[s].activities.splice(o,1)}addExpense(r,s,o,u){const h=this.getTrip(r);if(h){const d=h.days[s]?.activities.find(_=>_.id===o);d&&d.expenses.push(u)}}updateExpense(r,s,o,u){const h=this.getTrip(r);if(h){const d=h.days[s]?.activities.find(_=>_.id===o);if(d){const _=d.expenses.findIndex(p=>p.id===u.id);_!==-1&&(d.expenses[_]=u)}}}removeExpense(r,s,o,u){const h=this.getTrip(r);if(h){const d=h.days[s]?.activities.find(_=>_.id===o);d&&(d.expenses=d.expenses.filter(_=>_.id!==u))}}addGeneralExpense(r,s){const o=this.getTrip(r);o&&(o.generalExpenses||(o.generalExpenses=[]),o.generalExpenses.push(s))}updateGeneralExpense(r,s){const o=this.getTrip(r);if(o&&o.generalExpenses){const u=o.generalExpenses.findIndex(h=>h.id===s.id);u!==-1&&(o.generalExpenses[u]=s)}}removeGeneralExpense(r,s){const o=this.getTrip(r);o&&o.generalExpenses&&(o.generalExpenses=o.generalExpenses.filter(u=>u.id!==s))}}const Re=new ud;function ir(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).substring(2)}const dd={en:{"nav.myTrip":"My Trip","nav.expenses":"Expenses","nav.journal":"Journal","nav.travelAssistant":"Travel Assistant","finance.selectTrip":"Select a Trip to View Finances","finance.noTrips":'No trips found. Go to "My Trip" to create one.',"finance.back":"All Trips","finance.finances":"Finances","finance.view.all":"All Trip","finance.view.daily":"Daily","finance.totalEstimated":"Total Estimated","finance.totalActual":"Total Actual Spent","finance.breakdown":"Category Breakdown","finance.detailed":"Detailed Expenses","finance.day":"Day","finance.general":"General","journal.selectTrip":"Select a Trip to Write Journal","journal.back":"All Trips","journal.title":"Journal","journal.placeholder":"Write about your day...","journal.weather":"Weather","journal.location":"Location","journal.locationPlaceholder":"Where are you today?","journal.sunny":"Sunny","journal.cloudy":"Cloudy","journal.rainy":"Rainy","journal.snowy":"Snowy","journal.windy":"Windy","journal.addEntry":"Add Entry","journal.editEntry":"Edit Entry","journal.time":"Time","journal.delete":"Delete","journal.empty":"No journal entries yet. Tap + to add one!","journal.photos":"Photos","journal.addPhotos":"Add Photos","journal.viewEntry":"View Entry","journal.edit":"Edit","journal.close":"Close","journal.export":"Export as HTML","cat.transport":"Transport","cat.food":"Food","cat.stay":"Accommodation","cat.shopping":"Shopping","cat.medical":"Medical","cat.other":"Other","trip.myTrips":"My Trips","trip.planNew":"Plan a new trip","trip.destination":"Destination","trip.startDate":"Start Date","trip.endDate":"End Date","trip.currency":"Currency","trip.create":"Create Trip","trip.cancel":"Cancel","trip.newTrip":"New Trip","trip.back":"Trips","trip.addActivity":"Add Activity","trip.emptyActivities":"No activities yet. Click 'Add Activity' to start planning!","trip.editPlan":"Edit Plan","trip.googleMaps":"Google Maps","trip.backToList":"Back to list","trip.newActivity":"New Activity","trip.editActivity":"Edit Activity","trip.searchLocation":"Search Location","trip.name":"Name","trip.notes":"Notes","trip.totalActual":"Total Actual:","trip.deleteActivity":"Delete Activity","trip.saveChanges":"Save Changes","trip.expenses":"Expenses","modal.addExpense":"Add Expense","modal.editExpense":"Edit Expense","modal.amount":"Amount","modal.save":"Save","modal.expensesFor":"Expenses for","modal.noExpenses":"No expenses logged for this activity.","modal.addNewExpense":"Add New Expense","csv.export":"Export CSV","csv.summary":"Summary","csv.details":"Details","csv.headers.date":"Date","csv.headers.day":"Day","csv.headers.activity":"Activity","csv.headers.category":"Category","csv.headers.currency":"Currency","csv.headers.amount":"Amount","csv.headers.notes":"Notes","csv.headers.total":"Total","nav.back":"Back","trip.planNewAdventure":"Plan a New Adventure","trip.fillBasicInfo":"Fill in basic trip information to start your journey","trip.basicInfo":"Basic Information","trip.dates":"Dates","trip.otherSettings":"Other Settings","trip.startYourPlan":"Start Planning","trip.empty":"No trips yet","trip.days":"days","trip.deleteTrip":"Delete Trip","trip.showMap":"Show Map","trip.hideMap":"Hide Map"},zh:{"nav.myTrip":"æçè¡ç¨","nav.expenses":"è²»ç¨","nav.journal":"æéæ¥è¨","nav.travelAssistant":"æéå©æ","finance.selectTrip":"é¸æè¡ç¨ä»¥æ¥çè²»ç¨","finance.noTrips":"æ²ææ¾å°è¡ç¨ãè«åå¾ãæçè¡ç¨ãå»ºç«ä¸åã","finance.back":"å¨é¨è¡ç¨","finance.finances":"è²»ç¨çµ±è¨","finance.view.all":"å¨é¨è¡ç¨","finance.view.daily":"æ¯æ¥","finance.totalEstimated":"é ä¼°ç¸½è±è²»","finance.totalActual":"å¯¦éç¸½è±è²»","finance.breakdown":"æ¶è²»é¡å¥çµ±è¨","finance.detailed":"æ¶è²»æç´°","finance.day":"ç¬¬","finance.general":"éç¨è²»ç¨","journal.selectTrip":"é¸æè¡ç¨ä»¥æ°å¯«æ¥è¨","journal.back":"å¨é¨è¡ç¨","journal.title":"æéæ¥è¨","journal.placeholder":"è¨éä»å¤©ç¼ççæäº...","journal.weather":"å¤©æ°£","journal.location":"å°é»","journal.locationPlaceholder":"ä»å¤©å¨åªè£¡ï¼","journal.sunny":"æ´å¤©","journal.cloudy":"å¤é²","journal.rainy":"é¨å¤©","journal.snowy":"éªå¤©","journal.windy":"å®é¢¨","journal.addEntry":"æ°å¢æ¥è¨","journal.editEntry":"ç·¨è¼¯æ¥è¨","journal.time":"æé","journal.delete":"åªé¤","journal.empty":"å°ç¡æ¥è¨ãé»æ + æ°å¢ä¸ç¯ï¼","journal.photos":"ç§ç","journal.addPhotos":"æ°å¢ç§ç","journal.viewEntry":"æ¥çæ¥è¨","journal.edit":"ç·¨è¼¯","journal.close":"éé","journal.export":"å¯åºæç¶²é ","cat.transport":"äº¤é","cat.food":"é£ç©","cat.stay":"ä½å®¿","cat.shopping":"è³¼ç©","cat.medical":"é«ç","cat.other":"å¶ä»","trip.myTrips":"æçè¡ç¨","trip.planNew":"å»ºç«æ°è¡ç¨","trip.destination":"ç®çå°","trip.startDate":"éå§æ¥æ","trip.endDate":"çµææ¥æ","trip.currency":"è²¨å¹£","trip.create":"å»ºç«è¡ç¨","trip.cancel":"åæ¶","trip.newTrip":"æ°è¡ç¨","trip.back":"è¡ç¨åè¡¨","trip.addActivity":"æ°å¢æ´»å","trip.emptyActivities":"å°ç¡æ´»åãé»æãæ°å¢æ´»åãéå§è¦åï¼","trip.editPlan":"ç·¨è¼¯è¨ç«","trip.googleMaps":"Google å°å","trip.backToList":"è¿ååè¡¨","trip.newActivity":"æ°å¢æ´»å","trip.editActivity":"ç·¨è¼¯æ´»å","trip.searchLocation":"æå°å°é»","trip.name":"åç¨±","trip.notes":"ç­è¨","trip.totalActual":"å¯¦éç¸½è¨:","trip.deleteActivity":"åªé¤æ´»å","trip.saveChanges":"å²å­è®æ´","trip.expenses":"è²»ç¨","modal.addExpense":"æ°å¢è²»ç¨","modal.editExpense":"ç·¨è¼¯è²»ç¨","modal.amount":"éé¡","modal.save":"å²å­","modal.expensesFor":"çè²»ç¨","modal.noExpenses":"æ­¤æ´»åå°ç¡è²»ç¨è¨éã","modal.addNewExpense":"æ°å¢è²»ç¨é ç®","csv.export":"å¯åº CSV","csv.summary":"æ¶è²»çµ±è¨","csv.details":"è©³ç´°æç´°","csv.headers.date":"æ¥æ","csv.headers.day":"å¤©æ¸","csv.headers.activity":"æ´»ååç¨±","csv.headers.category":"é¡å¥","csv.headers.currency":"å¹£å¥","csv.headers.amount":"éé¡","csv.headers.notes":"åè¨»","csv.headers.total":"ç¸½è¨","nav.back":"è¿å","trip.planNewAdventure":"è¦åæ°çåéª","trip.fillBasicInfo":"å¡«å¯«è¡ç¨åºæ¬è³è¨éå§æ¨çæç¨","trip.basicInfo":"åºæ¬è³è¨","trip.dates":"æ¥æ","trip.otherSettings":"å¶ä»è¨­å®","trip.startYourPlan":"éå§è¦å","trip.empty":"æ«ç¡è¡ç¨","trip.days":"å¤©","trip.deleteTrip":"åªé¤è¡ç¨","trip.showMap":"é¡¯ç¤ºå°å","trip.hideMap":"é±èå°å"}};class hd{#t=St("en");get lang(){return c(this.#t)}set lang(r){M(this.#t,r,!0)}constructor(){if(typeof localStorage<"u"){const r=localStorage.getItem("app_lang");(r==="en"||r==="zh")&&(this.lang=r)}}toggle(){this.lang=this.lang==="en"?"zh":"en",typeof localStorage<"u"&&localStorage.setItem("app_lang",this.lang)}t(r){return dd[this.lang][r]||r}day(r){return this.lang==="zh"?`ç¬¬ ${r} å¤©`:`Day ${r}`}}const k=new hd;var fd=D('<button class="back-btn svelte-whg6dh"> </button>'),vd=D("<button><!> <span> </span></button>"),_d=D('<button class="back-btn-mobile svelte-whg6dh">â è¿å</button>'),pd=D('<button><!> <span class="sr-only svelte-whg6dh"> </span></button>'),md=D('<div class="app-shell svelte-whg6dh"><aside class="sidebar svelte-whg6dh"><div><!> <div class="logo svelte-whg6dh"><img alt="TripFlow Logo" class="logo-img svelte-whg6dh"/> <span> </span></div> <nav class="svelte-whg6dh"></nav></div> <div class="sidebar-footer"><button class="lang-btn svelte-whg6dh"><!> <span> </span></button></div></aside> <div class="main-content svelte-whg6dh"><header class="mobile-header svelte-whg6dh"><!> <h1 class="svelte-whg6dh"> </h1> <button class="icon-btn svelte-whg6dh"><!></button></header> <main class="svelte-whg6dh"><!></main> <nav class="bottom-nav svelte-whg6dh"></nav></div></div>');function gd(n,r){Fi(r,!0);let s=bi(r,"view",15,"itinerary"),o=bi(r,"hasTrip",3,!1),u=oe(()=>[{id:"itinerary",label:k.t("nav.myTrip"),icon:Ws},{id:"finance",label:k.t("nav.expenses"),icon:ea},{id:"journal",label:k.t("nav.journal"),icon:Xu}]);var h=md(),d=v(h),_=v(d),p=v(_);{var y=Wt=>{var dt=fd();dt.__click=function(...B){r.onBackTrip?.apply(this,B)};var H=v(dt);G(B=>z(H,`â ${B??""}`),[()=>k.t("nav.back")||"è¿å"]),E(Wt,dt)};tt(p,Wt=>{o()&&Wt(y)})}var x=g(p,2),b=v(x),P=g(b,2),S=v(P),N=g(x,2);Ie(N,21,()=>c(u),Qe,(Wt,dt)=>{var H=vd();H.__click=()=>s(c(dt).id);let B;var Tt=v(H);rn(Tt,()=>c(dt).icon,(mt,ft)=>{ft(mt,{size:20})});var q=g(Tt,2),et=v(q);G(()=>{B=wi(H,1,"svelte-whg6dh",null,B,{active:s()===c(dt).id}),z(et,c(dt).label)}),E(Wt,H)});var O=g(_,2),C=v(O);C.__click=()=>k.toggle();var Z=v(C);ao(Z,{size:20});var ot=g(Z,2),j=v(ot),R=g(d,2),K=v(R),Y=v(K);{var J=Wt=>{var dt=_d();dt.__click=function(...H){r.onBackTrip?.apply(this,H)},E(Wt,dt)};tt(Y,Wt=>{o()&&Wt(J)})}var F=g(Y,2),st=v(F),lt=g(F,2);lt.__click=()=>k.toggle();var Pt=v(lt);ao(Pt,{size:20});var Ot=g(K,2),_e=v(Ot);Ou(_e,()=>r.children);var ne=g(Ot,2);Ie(ne,21,()=>c(u),Qe,(Wt,dt)=>{var H=pd();H.__click=()=>s(c(dt).id);let B;var Tt=v(H);rn(Tt,()=>c(dt).icon,(mt,ft)=>{ft(mt,{size:24})});var q=g(Tt,2),et=v(q);G(()=>{De(H,"aria-label",c(dt).label),B=wi(H,1,"svelte-whg6dh",null,B,{active:s()===c(dt).id}),z(et,c(dt).label)}),E(Wt,H)}),G((Wt,dt)=>{De(b,"src","/tripplanner_Web/logo.png"),z(S,Wt),z(j,k.lang==="en"?"ä¸­æ":"English"),z(st,dt)},[()=>k.t("nav.travelAssistant"),()=>c(u).find(Wt=>Wt.id===s())?.label]),E(n,h),Hi()}Zn(["click"]);function yd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yr={exports:{}};var bd=yr.exports,oo;function wd(){return oo||(oo=1,(function(n,r){(function(s,o){o(r)})(bd,(function(s){var o="1.9.4";function u(t){var e,i,a,l;for(i=1,a=arguments.length;i<a;i++){l=arguments[i];for(e in l)t[e]=l[e]}return t}var h=Object.create||(function(){function t(){}return function(e){return t.prototype=e,new t}})();function d(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var a=i.call(arguments,2);return function(){return t.apply(e,a.length?a.concat(i.call(arguments)):arguments)}}var _=0;function p(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function y(t,e,i){var a,l,f,m;return m=function(){a=!1,l&&(f.apply(i,l),l=!1)},f=function(){a?l=arguments:(t.apply(i,arguments),setTimeout(m,e),a=!0)},f}function x(t,e,i){var a=e[1],l=e[0],f=a-l;return t===a&&i?t:((t-l)%f+f)%f+l}function b(){return!1}function P(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return S(t).split(/\s+/)}function O(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function C(t,e,i){var a=[];for(var l in t)a.push(encodeURIComponent(i?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!e||e.indexOf("?")===-1?"?":"&")+a.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function ot(t,e){return t.replace(Z,function(i,a){var l=e[a];if(l===void 0)throw new Error("No value provided for variable "+i);return typeof l=="function"&&(l=l(e)),l})}var j=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function R(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var J=0;function F(t){var e=+new Date,i=Math.max(0,16-(e-J));return J=e+i,window.setTimeout(t,i)}var st=window.requestAnimationFrame||Y("RequestAnimationFrame")||F,lt=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Pt(t,e,i){if(i&&st===F)t.call(e);else return st.call(window,d(t,e))}function Ot(t){t&&lt.call(window,t)}var _e={__proto__:null,extend:u,create:h,bind:d,get lastId(){return _},stamp:p,throttle:y,wrapNum:x,falseFn:b,formatNum:P,trim:S,splitWords:N,setOptions:O,getParamString:C,template:ot,isArray:j,indexOf:R,emptyImageUrl:K,requestFn:st,cancelFn:lt,requestAnimFrame:Pt,cancelAnimFrame:Ot};function ne(){}ne.extend=function(t){var e=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,a=h(i);a.constructor=e,e.prototype=a;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(e[l]=this[l]);return t.statics&&u(e,t.statics),t.includes&&(Wt(t.includes),u.apply(null,[a].concat(t.includes))),u(a,t),delete a.statics,delete a.includes,a.options&&(a.options=i.options?h(i.options):{},u(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,m=a._initHooks.length;f<m;f++)a._initHooks[f].call(this)}},e},ne.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},ne.mergeOptions=function(t){return u(this.prototype.options,t),this},ne.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function Wt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=j(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(t,e,i){if(typeof t=="object")for(var a in t)this._on(a,t[a],e);else{t=N(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var a in t)this._off(a,t[a],e);else{t=N(t);for(var l=arguments.length===1,f=0,m=t.length;f<m;f++)l?this._off(t[f]):this._off(t[f],e,i)}return this},_on:function(t,e,i,a){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var l={fn:e,ctx:i};a&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,e,i){var a,l,f;if(this._events&&(a=this._events[t],!!a)){if(arguments.length===1){if(this._firingCount)for(l=0,f=a.length;l<f;l++)a[l].fn=b;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var m=this._listens(t,e,i);if(m!==!1){var w=a[m];this._firingCount&&(w.fn=b,this._events[t]=a=a.slice()),a.splice(m,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var a=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,m=l.length;f<m;f++){var w=l[f],T=w.fn;w.once&&this.off(t,T,w.ctx),T.call(w.ctx||this,a)}this._firingCount--}}return i&&this._propagateEvent(a),this},listens:function(t,e,i,a){typeof t!="string"&&console.warn('"string" type argument expected');var l=e;typeof e!="function"&&(a=!!e,l=void 0,i=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,l,i)!==!1)return!0;if(a){for(var m in this._eventParents)if(this._eventParents[m].listens(t,e,i,a))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var a=this._events[t]||[];if(!e)return!!a.length;i===this&&(i=void 0);for(var l=0,f=a.length;l<f;l++)if(a[l].fn===e&&a[l].ctx===i)return l;return!1},once:function(t,e,i){if(typeof t=="object")for(var a in t)this._on(a,t[a],e,!0);else{t=N(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[p(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[p(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var H=ne.extend(dt);function B(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var Tt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(q(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(q(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Tt(this.x),this.y=Tt(this.y),this},distanceTo:function(t){t=q(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=q(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=q(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function q(t,e,i){return t instanceof B?t:j(t)?new B(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,e,i)}function et(t,e){if(t)for(var i=e?[t,e]:t,a=0,l=i.length;a<l;a++)this.extend(i[a])}et.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof B||typeof t[0]=="number"||"x"in t)e=i=q(t);else if(t=mt(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof B?t=q(t):t=mt(t),t instanceof et?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=mt(t);var e=this.min,i=this.max,a=t.min,l=t.max,f=l.x>=e.x&&a.x<=i.x,m=l.y>=e.y&&a.y<=i.y;return f&&m},overlaps:function(t){t=mt(t);var e=this.min,i=this.max,a=t.min,l=t.max,f=l.x>e.x&&a.x<i.x,m=l.y>e.y&&a.y<i.y;return f&&m},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,a=Math.abs(e.x-i.x)*t,l=Math.abs(e.y-i.y)*t;return mt(q(e.x-a,e.y-l),q(i.x+a,i.y+l))},equals:function(t){return t?(t=mt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function mt(t,e){return!t||t instanceof et?t:new et(t,e)}function ft(t,e){if(t)for(var i=e?[t,e]:t,a=0,l=i.length;a<l;a++)this.extend(i[a])}ft.prototype={extend:function(t){var e=this._southWest,i=this._northEast,a,l;if(t instanceof gt)a=t,l=t;else if(t instanceof ft){if(a=t._southWest,l=t._northEast,!a||!l)return this}else return t?this.extend(W(t)||ct(t)):this;return!e&&!i?(this._southWest=new gt(a.lat,a.lng),this._northEast=new gt(l.lat,l.lng)):(e.lat=Math.min(a.lat,e.lat),e.lng=Math.min(a.lng,e.lng),i.lat=Math.max(l.lat,i.lat),i.lng=Math.max(l.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,a=Math.abs(e.lat-i.lat)*t,l=Math.abs(e.lng-i.lng)*t;return new ft(new gt(e.lat-a,e.lng-l),new gt(i.lat+a,i.lng+l))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof gt||"lat"in t?t=W(t):t=ct(t);var e=this._southWest,i=this._northEast,a,l;return t instanceof ft?(a=t.getSouthWest(),l=t.getNorthEast()):a=l=t,a.lat>=e.lat&&l.lat<=i.lat&&a.lng>=e.lng&&l.lng<=i.lng},intersects:function(t){t=ct(t);var e=this._southWest,i=this._northEast,a=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>=e.lat&&a.lat<=i.lat,m=l.lng>=e.lng&&a.lng<=i.lng;return f&&m},overlaps:function(t){t=ct(t);var e=this._southWest,i=this._northEast,a=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>e.lat&&a.lat<i.lat,m=l.lng>e.lng&&a.lng<i.lng;return f&&m},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ct(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ct(t,e){return t instanceof ft?t:new ft(t,e)}function gt(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}gt.prototype={equals:function(t,e){if(!t)return!1;t=W(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+P(this.lat,t)+", "+P(this.lng,t)+")"},distanceTo:function(t){return we.distance(this,W(t))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return ct([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function W(t,e,i){return t instanceof gt?t:j(t)&&typeof t[0]!="object"?t.length===3?new gt(t[0],t[1],t[2]):t.length===2?new gt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new gt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new gt(t,e,i)}var It={latLngToPoint:function(t,e){var i=this.projection.project(t),a=this.scale(e);return this.transformation._transform(i,a)},pointToLatLng:function(t,e){var i=this.scale(e),a=this.transformation.untransform(t,i);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),a=this.transformation.transform(e.min,i),l=this.transformation.transform(e.max,i);return new et(a,l)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,a=t.alt;return new gt(i,e,a)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),a=e.lat-i.lat,l=e.lng-i.lng;if(a===0&&l===0)return t;var f=t.getSouthWest(),m=t.getNorthEast(),w=new gt(f.lat-a,f.lng-l),T=new gt(m.lat-a,m.lng-l);return new ft(w,T)}},we=u({},It,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,a=t.lat*i,l=e.lat*i,f=Math.sin((e.lat-t.lat)*i/2),m=Math.sin((e.lng-t.lng)*i/2),w=f*f+Math.cos(a)*Math.cos(l)*m*m,T=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return this.R*T}}),Zt=6378137,A={R:Zt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,a=Math.max(Math.min(i,t.lat),-i),l=Math.sin(a*e);return new B(this.R*t.lng*e,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var e=180/Math.PI;return new gt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(function(){var t=Zt*Math.PI;return new et([-t,-t],[t,t])})()};function V(t,e,i,a){if(j(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=a}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new B((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Q(t,e,i,a){return new V(t,e,i,a)}var it=u({},we,{code:"EPSG:3857",projection:A,transformation:(function(){var t=.5/(Math.PI*A.R);return Q(t,.5,-t,.5)})()}),$t=u({},it,{code:"EPSG:900913"});function Xt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function pt(t,e){var i="",a,l,f,m,w,T;for(a=0,f=t.length;a<f;a++){for(w=t[a],l=0,m=w.length;l<m;l++)T=w[l],i+=(l?"L":"M")+T.x+" "+T.y;i+=e?I.svg?"z":"x":""}return i||"M0 0"}var Yt=document.documentElement.style,re="ActiveXObject"in window,pe=re&&!document.addEventListener,Me="msLaunchUri"in navigator&&!("documentMode"in document),Le=X("webkit"),Ut=X("android"),Ee=X("android 2")||X("android 3"),me=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Bt=Ut&&X("Google")&&me<537&&!("AudioNode"in window),Qt=!!window.opera,Se=!Me&&X("chrome"),vt=X("gecko")&&!Le&&!Qt&&!re,at=!Se&&X("safari"),ht=X("phantom"),nt="OTransition"in Yt,Dt=navigator.platform.indexOf("Win")===0,yt=re&&"transition"in Yt,bt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ee,kt="MozPerspective"in Yt,Ht=!window.L_DISABLE_3D&&(yt||bt||kt)&&!nt&&!ht,Lt=typeof orientation<"u"||X("mobile"),te=Lt&&Le,Vt=Lt&&bt,Jt=!window.PointerEvent&&window.MSPointerEvent,ze=!!(window.PointerEvent||Jt),xe="ontouchstart"in window||!!window.TouchEvent,Ae=!window.L_NO_TOUCH&&(xe||ze),qt=Lt&&Qt,ge=Lt&&vt,ut=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,he=(function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",b,e),window.removeEventListener("testPassiveEventSupport",b,e)}catch{}return t})(),wt=(function(){return!!document.createElement("canvas").getContext})(),Rt=!!(document.createElementNS&&Xt("svg").createSVGRect),se=!!Rt&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Et=!Rt&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}})(),zt=navigator.platform.indexOf("Mac")===0,Gt=navigator.platform.indexOf("Linux")===0;function X(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var I={ie:re,ielt9:pe,edge:Me,webkit:Le,android:Ut,android23:Ee,androidStock:Bt,opera:Qt,chrome:Se,gecko:vt,safari:at,phantom:ht,opera12:nt,win:Dt,ie3d:yt,webkit3d:bt,gecko3d:kt,any3d:Ht,mobile:Lt,mobileWebkit:te,mobileWebkit3d:Vt,msPointer:Jt,pointer:ze,touch:Ae,touchNative:xe,mobileOpera:qt,mobileGecko:ge,retina:ut,passiveEvents:he,canvas:wt,svg:Rt,vml:Et,inlineSvg:se,mac:zt,linux:Gt},xt=I.msPointer?"MSPointerDown":"pointerdown",ee=I.msPointer?"MSPointerMove":"pointermove",ue=I.msPointer?"MSPointerUp":"pointerup",fe=I.msPointer?"MSPointerCancel":"pointercancel",ae={touchstart:xt,touchmove:ee,touchend:ue,touchcancel:fe},Ne={touchstart:Di,touchmove:ei,touchend:ei,touchcancel:ei},Fe={},di=!1;function si(t,e,i){return e==="touchstart"&&hi(),Ne[e]?(i=Ne[e].bind(this,i),t.addEventListener(ae[e],i,!1),i):(console.warn("wrong event specified:",e),b)}function qe(t,e,i){if(!ae[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(ae[e],i,!1)}function We(t){Fe[t.pointerId]=t}function ai(t){Fe[t.pointerId]&&(Fe[t.pointerId]=t)}function mi(t){delete Fe[t.pointerId]}function hi(){di||(document.addEventListener(xt,We,!0),document.addEventListener(ee,ai,!0),document.addEventListener(ue,mi,!0),document.addEventListener(fe,mi,!0),di=!0)}function ei(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in Fe)e.touches.push(Fe[i]);e.changedTouches=[e],t(e)}}function Di(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ke(e),ei(t,e)}function Wi(t){var e={},i,a;for(a in t)i=t[a],e[a]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var ln=200;function xn(t,e){t.addEventListener("dblclick",e);var i=0,a;function l(f){if(f.detail!==1){a=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var m=sa(f);if(!(m.some(function(T){return T instanceof HTMLLabelElement&&T.attributes.for})&&!m.some(function(T){return T instanceof HTMLInputElement||T instanceof HTMLSelectElement}))){var w=Date.now();w-i<=ln?(a++,a===2&&e(Wi(f))):a=1,i=w}}}return t.addEventListener("click",l),{dblclick:e,simDblclick:l}}function Kt(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var $e=dn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Be=dn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ge=Be==="webkitTransition"||Be==="OTransition"?Be+"End":"transitionend";function Ye(t){return typeof t=="string"?document.getElementById(t):t}function Je(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);i=a?a[e]:null}return i==="auto"?null:i}function jt(t,e,i){var a=document.createElement(t);return a.className=e||"",i&&i.appendChild(a),a}function Pe(t){var e=t.parentNode;e&&e.removeChild(t)}function cn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ui(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function un(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Bn(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=Ct(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function Mt(t,e){if(t.classList!==void 0)for(var i=N(e),a=0,l=i.length;a<l;a++)t.classList.add(i[a]);else if(!Bn(t,e)){var f=Ct(t);sr(t,(f?f+" ":"")+e)}}function Ze(t,e){t.classList!==void 0?t.classList.remove(e):sr(t,S((" "+Ct(t)+" ").replace(" "+e+" "," ")))}function sr(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Ct(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Oe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Pn(t,e)}function Pn(t,e){var i=!1,a="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(a)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+a+"(opacity="+e+")"}function dn(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function gi(t,e,i){var a=e||new B(0,0);t.style[$e]=(I.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(i?" scale("+i+")":"")}function ye(t,e){t._leaflet_pos=e,I.any3d?gi(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function oi(t){return t._leaflet_pos||new B(0,0)}var Vi,kn,us;if("onselectstart"in document)Vi=function(){At(window,"selectstart",Ke)},kn=function(){Ce(window,"selectstart",Ke)};else{var ar=dn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vi=function(){if(ar){var t=document.documentElement.style;us=t[ar],t[ar]="none"}},kn=function(){ar&&(document.documentElement.style[ar]=us,us=void 0)}}function ds(){At(window,"dragstart",Ke)}function hs(){Ce(window,"dragstart",Ke)}var $r,fs;function vs(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Dr(),$r=t,fs=t.style.outlineStyle,t.style.outlineStyle="none",At(window,"keydown",Dr))}function Dr(){$r&&($r.style.outlineStyle=fs,$r=void 0,fs=void 0,Ce(window,"keydown",Dr))}function na(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function _s(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ml={__proto__:null,TRANSFORM:$e,TRANSITION:Be,TRANSITION_END:Ge,get:Ye,getStyle:Je,create:jt,remove:Pe,empty:cn,toFront:Ui,toBack:un,hasClass:Bn,addClass:Mt,removeClass:Ze,setClass:sr,getClass:Ct,setOpacity:Oe,testProp:dn,setTransform:gi,setPosition:ye,getPosition:oi,get disableTextSelection(){return Vi},get enableTextSelection(){return kn},disableImageDrag:ds,enableImageDrag:hs,preventOutline:vs,restoreOutline:Dr,getSizedParentNode:na,getScale:_s};function At(t,e,i,a){if(e&&typeof e=="object")for(var l in e)ms(t,l,e[l],i);else{e=N(e);for(var f=0,m=e.length;f<m;f++)ms(t,e[f],i,a)}return this}var Ni="_leaflet_events";function Ce(t,e,i,a){if(arguments.length===1)ra(t),delete t[Ni];else if(e&&typeof e=="object")for(var l in e)gs(t,l,e[l],i);else if(e=N(e),arguments.length===2)ra(t,function(w){return R(e,w)!==-1});else for(var f=0,m=e.length;f<m;f++)gs(t,e[f],i,a);return this}function ra(t,e){for(var i in t[Ni]){var a=i.split(/\d/)[0];(!e||e(a))&&gs(t,a,null,null,i)}}var ps={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ms(t,e,i,a){var l=e+p(i)+(a?"_"+p(a):"");if(t[Ni]&&t[Ni][l])return this;var f=function(w){return i.call(a||t,w||window.event)},m=f;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?f=si(t,e,f):I.touch&&e==="dblclick"?f=xn(t,f):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(ps[e]||e,f,I.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(f=function(w){w=w||window.event,bs(t,w)&&m(w)},t.addEventListener(ps[e],f,!1)):t.addEventListener(e,m,!1):t.attachEvent("on"+e,f),t[Ni]=t[Ni]||{},t[Ni][l]=f}function gs(t,e,i,a,l){l=l||e+p(i)+(a?"_"+p(a):"");var f=t[Ni]&&t[Ni][l];if(!f)return this;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?qe(t,e,f):I.touch&&e==="dblclick"?Kt(t,f):"removeEventListener"in t?t.removeEventListener(ps[e]||e,f,!1):t.detachEvent("on"+e,f),t[Ni][l]=null}function Tn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ys(t){return ms(t,"wheel",Tn),this}function or(t){return At(t,"mousedown touchstart dblclick contextmenu",Tn),t._leaflet_disable_click=!0,this}function Ke(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ln(t){return Ke(t),Tn(t),this}function sa(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function aa(t,e){if(!e)return new B(t.clientX,t.clientY);var i=_s(e),a=i.boundingClientRect;return new B((t.clientX-a.left)/i.x-e.clientLeft,(t.clientY-a.top)/i.y-e.clientTop)}var gl=I.linux&&I.chrome?window.devicePixelRatio:I.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function oa(t){return I.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/gl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function bs(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var yl={__proto__:null,on:At,off:Ce,stopPropagation:Tn,disableScrollPropagation:ys,disableClickPropagation:or,preventDefault:Ke,stop:Ln,getPropagationPath:sa,getMousePosition:aa,getWheelDelta:oa,isExternalTarget:bs,addListener:At,removeListener:Ce},la=H.extend({run:function(t,e,i,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=oi(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Pt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),ye(this._el,i),this.fire("step")},_complete:function(){Ot(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ie=H.extend({options:{crs:it,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=O(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(W(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Be&&I.any3d&&!I.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,Ge,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(W(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=u({animate:i.animate},i.zoom),i.pan=u({animate:i.animate,duration:i.duration},i.pan));var a=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var a=this.getZoomScale(e),l=this.getSize().divideBy(2),f=t instanceof B?t:this.latLngToContainerPoint(t),m=f.subtract(l).multiplyBy(1-1/a),w=this.containerPointToLatLng(l.add(m));return this.setView(w,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ct(t);var i=q(e.paddingTopLeft||e.padding||[0,0]),a=q(e.paddingBottomRight||e.padding||[0,0]),l=this.getBoundsZoom(t,!1,i.add(a));if(l=typeof e.maxZoom=="number"?Math.min(e.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var f=a.subtract(i).divideBy(2),m=this.project(t.getSouthWest(),l),w=this.project(t.getNorthEast(),l),T=this.unproject(m.add(w).divideBy(2).add(f),l);return{center:T,zoom:l}},fitBounds:function(t,e){if(t=ct(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=q(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new la,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Mt(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!I.any3d)return this.setView(t,e,i);this._stop();var a=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),m=this._zoom;t=W(t),e=e===void 0?m:e;var w=Math.max(f.x,f.y),T=w*this.getZoomScale(m,e),$=l.distanceTo(a)||1,U=1.42,_t=U*U;function Ft(He){var Gr=He?-1:1,oc=He?T:w,lc=T*T-w*w+Gr*_t*_t*$*$,cc=2*oc*_t*$,Cs=lc/cc,ja=Math.sqrt(Cs*Cs+1)-Cs,uc=ja<1e-9?-18:Math.log(ja);return uc}function li(He){return(Math.exp(He)-Math.exp(-He))/2}function Ue(He){return(Math.exp(He)+Math.exp(-He))/2}function ki(He){return li(He)/Ue(He)}var fi=Ft(0);function Wn(He){return w*(Ue(fi)/Ue(fi+U*He))}function nc(He){return w*(Ue(fi)*ki(fi+U*He)-li(fi))/_t}function rc(He){return 1-Math.pow(1-He,1.5)}var sc=Date.now(),qa=(Ft(1)-fi)/U,ac=i.duration?1e3*i.duration:1e3*qa*.8;function Ra(){var He=(Date.now()-sc)/ac,Gr=rc(He)*qa;He<=1?(this._flyToFrame=Pt(Ra,this),this._move(this.unproject(a.add(l.subtract(a).multiplyBy(nc(Gr)/$)),m),this.getScaleZoom(w/Wn(Gr),m),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),Ra.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=ct(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),a=this._limitCenter(i,this._zoom,ct(t));return i.equals(a)||this.panTo(a,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=q(e.paddingTopLeft||e.padding||[0,0]),a=q(e.paddingBottomRight||e.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(t),m=this.getPixelBounds(),w=mt([m.min.add(i),m.max.subtract(a)]),T=w.getSize();if(!w.contains(f)){this._enforcingBounds=!0;var $=f.subtract(w.getCenter()),U=w.extend(f).getSize().subtract(T);l.x+=$.x<0?-U.x:U.x,l.y+=$.y<0?-U.y:U.y,this.panTo(this.unproject(l),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),a=e.divideBy(2).round(),l=i.divideBy(2).round(),f=a.subtract(l);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=d(this._handleGeolocationResponse,this),i=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,a=new gt(e,i),l=a.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var m=this.getBoundsZoom(l);this.setView(a,f.maxZoom?Math.min(m,f.maxZoom):m)}var w={latlng:a,bounds:l,timestamp:t.timestamp};for(var T in t.coords)typeof t.coords[T]=="number"&&(w[T]=t.coords[T]);this.fire("locationfound",w)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ot(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Pe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),a=jt("div",i,e||this._mapPane);return t&&(this._panes[t]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new ft(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=ct(t),i=q(i||[0,0]);var a=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),m=t.getNorthWest(),w=t.getSouthEast(),T=this.getSize().subtract(i),$=mt(this.project(w,a),this.project(m,a)).getSize(),U=I.any3d?this.options.zoomSnap:1,_t=T.x/$.x,Ft=T.y/$.y,li=e?Math.max(_t,Ft):Math.min(_t,Ft);return a=this.getScaleZoom(li,a),U&&(a=Math.round(a/(U/100))*(U/100),a=e?Math.ceil(a/U)*U:Math.floor(a/U)*U),Math.max(l,Math.min(f,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new et(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var a=i.zoom(t*i.scale(e));return isNaN(a)?1/0:a},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(W(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(q(t),e)},layerPointToLatLng:function(t){var e=q(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(W(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(W(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ct(t))},distance:function(t,e){return this.options.crs.distance(W(t),W(e))},containerPointToLayerPoint:function(t){return q(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return q(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(q(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t)))},mouseEventToContainerPoint:function(t){return aa(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Ye(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");At(e,"scroll",this._onScroll,this),this._containerId=p(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&I.any3d,Mt(t,"leaflet-container"+(I.touch?" leaflet-touch":"")+(I.retina?" leaflet-retina":"")+(I.ielt9?" leaflet-oldie":"")+(I.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Je(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Mt(t.markerPane,"leaflet-zoom-hide"),Mt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){ye(this._mapPane,new B(0,0));var a=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var l=this._zoom!==e;this._moveStart(l,i)._move(t,e)._moveEnd(l),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,a){e===void 0&&(e=this._zoom);var l=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?i&&i.pinch&&this.fire("zoom",i):((l||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ot(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ye(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[p(this._container)]=this;var e=t?Ce:At;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),I.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ot(this._resizeRequest),this._resizeRequest=Pt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],a,l=e==="mouseout"||e==="mouseover",f=t.target||t.srcElement,m=!1;f;){if(a=this._targets[p(f)],a&&(e==="click"||e==="preclick")&&this._draggableMoved(a)){m=!0;break}if(a&&a.listens(e,!0)&&(l&&!bs(f,t)||(i.push(a),l))||f===this._container)break;f=f.parentNode}return!i.length&&!m&&!l&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&vs(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var a=u({},t);a.type="preclick",this._fireDOMEvent(a,a.type,i)}var l=this._findEventTargets(t,e);if(i){for(var f=[],m=0;m<i.length;m++)i[m].listens(e,!0)&&f.push(i[m]);l=f.concat(l)}if(l.length){e==="contextmenu"&&Ke(t);var w=l[0],T={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var $=w.getLatLng&&(!w._radius||w._radius<=10);T.containerPoint=$?this.latLngToContainerPoint(w.getLatLng()):this.mouseEventToContainerPoint(t),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=$?w.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(m=0;m<l.length;m++)if(l[m].fire(e,T,!0),T.originalEvent._stopped||l[m].options.bubblingMouseEvents===!1&&R(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return oi(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var a=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,e,i){var a=this._getNewPixelOrigin(i,e);return mt([this.project(t.getSouthWest(),e)._subtract(a),this.project(t.getNorthWest(),e)._subtract(a),this.project(t.getSouthEast(),e)._subtract(a),this.project(t.getNorthEast(),e)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var a=this.project(t,e),l=this.getSize().divideBy(2),f=new et(a.subtract(l),a.add(l)),m=this._getBoundsOffset(f,i,e);return Math.abs(m.x)<=1&&Math.abs(m.y)<=1?t:this.unproject(a.add(m),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),a=new et(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(a,e))},_getBoundsOffset:function(t,e,i){var a=mt(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),l=a.min.subtract(t.min),f=a.max.subtract(t.max),m=this._rebound(l.x,-f.x),w=this._rebound(l.y,-f.y);return new B(m,w)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),a=I.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=$e,a=this._proxy.style[i];gi(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),a===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();gi(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(e),l=this._getCenterOffset(t)._divideBy(1-1/a);return i.animate!==!0&&!this.getSize().contains(l)?!1:(Pt(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,a){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Mt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bl(t,e){return new ie(t,e)}var Ci=ne.extend({options:{position:"topright"},initialize:function(t){O(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),a=t._controlCorners[i];return Mt(e,"leaflet-control"),i.indexOf("bottom")!==-1?a.insertBefore(e,a.firstChild):a.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),lr=function(t){return new Ci(t)};ie.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=jt("div",e+"control-container",this._container);function a(l,f){var m=e+l+" "+e+f;t[l+f]=jt("div",m,i)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Pe(this._controlCorners[t]);Pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ca=Ci.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,a){return i<a?-1:a<i?1:0}},initialize:function(t,e,i){O(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ci.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(p(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Mt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Mt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=jt("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),or(e),ys(e);var a=this._section=jt("section",t+"-list");i&&(this._map.on("click",this.collapse,this),At(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=jt("a",t+"-toggle",e);l.href="#",l.title="Layers",l.setAttribute("role","button"),At(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){Ke(f),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=jt("div",t+"-base",a),this._separator=jt("div",t+"-separator",a),this._overlaysList=jt("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&p(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(d(function(a,l){return this.options.sortFunction(a.layer,l.layer,a.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cn(this._baseLayersList),cn(this._overlaysList),this._layerControlInputs=[];var t,e,i,a,l=0;for(i=0;i<this._layers.length;i++)a=this._layers[i],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,l+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(p(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=i,a.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),a;t.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=i):a=this._createRadioElement("leaflet-base-layers_"+p(this),i),this._layerControlInputs.push(a),a.layerId=p(t.layer),At(a,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var f=document.createElement("span");e.appendChild(f),f.appendChild(a),f.appendChild(l);var m=t.overlay?this._overlaysList:this._baseLayersList;return m.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,a=[],l=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)e=t[f],i=this._getLayer(e.layerId).layer,e.checked?a.push(i):e.checked||l.push(i);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<a.length;f++)this._map.hasLayer(a[f])||this._map.addLayer(a[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,a=this._map.getZoom(),l=t.length-1;l>=0;l--)e=t[l],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&a<i.options.minZoom||i.options.maxZoom!==void 0&&a>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,At(t,"click",Ke),this.expand();var e=this;setTimeout(function(){Ce(t,"click",Ke),e._preventClick=!1})}}),wl=function(t,e,i){return new ca(t,e,i)},ws=Ci.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=jt("div",e+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,a,l){var f=jt("a",i,a);return f.innerHTML=t,f.href="#",f.title=e,f.setAttribute("role","button"),f.setAttribute("aria-label",e),or(f),At(f,"click",Ln),At(f,"click",l,this),At(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Ze(this._zoomInButton,e),Ze(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Mt(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Mt(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});ie.mergeOptions({zoomControl:!0}),ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ws,this.addControl(this.zoomControl))});var xl=function(t){return new ws(t)},ua=Ci.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=jt("div",e),a=this.options;return this._addScales(a,e+"-line",i),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=jt("div",e,i)),t.imperial&&(this._iScale=jt("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,a,l;e>5280?(i=e/5280,a=this._getRoundNum(i),this._updateScale(this._iScale,a+" mi",a/i)):(l=this._getRoundNum(e),this._updateScale(this._iScale,l+" ft",l/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Pl=function(t){return new ua(t)},kl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xs=Ci.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(I.inlineSvg?kl+" ":"")+"Leaflet</a>"},initialize:function(t){O(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=jt("div","leaflet-control-attribution"),or(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});ie.mergeOptions({attributionControl:!0}),ie.addInitHook(function(){this.options.attributionControl&&new xs().addTo(this)});var Tl=function(t){return new xs(t)};Ci.Layers=ca,Ci.Zoom=ws,Ci.Scale=ua,Ci.Attribution=xs,lr.layers=wl,lr.zoom=xl,lr.scale=Pl,lr.attribution=Tl;var Zi=ne.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zi.addTo=function(t,e){return t.addHandler(e,this),this};var Ll={Events:dt},da=I.touch?"touchstart mousedown":"mousedown",hn=H.extend({options:{clickTolerance:3},initialize:function(t,e,i,a){O(this,a),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(At(this._dragStartTarget,da,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(hn._dragging===this&&this.finishDrag(!0),Ce(this._dragStartTarget,da,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Bn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){hn._dragging===this&&this.finishDrag();return}if(!(hn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(hn._dragging=this,this._preventOutline&&vs(this._element),ds(),Vi(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=na(this._element);this._startPoint=new B(e.clientX,e.clientY),this._startPos=oi(this._element),this._parentScale=_s(i);var a=t.type==="mousedown";At(document,a?"mousemove":"touchmove",this._onMove,this),At(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new B(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ke(t),this._moved||(this.fire("dragstart"),this._moved=!0,Mt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Mt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ye(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ce(document,"mousemove touchmove",this._onMove,this),Ce(document,"mouseup touchend touchcancel",this._onUp,this),hs(),kn();var e=this._moved&&this._moving;this._moving=!1,hn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ha(t,e,i){var a,l=[1,4,2,8],f,m,w,T,$,U,_t,Ft;for(f=0,U=t.length;f<U;f++)t[f]._code=En(t[f],e);for(w=0;w<4;w++){for(_t=l[w],a=[],f=0,U=t.length,m=U-1;f<U;m=f++)T=t[f],$=t[m],T._code&_t?$._code&_t||(Ft=Nr($,T,_t,e,i),Ft._code=En(Ft,e),a.push(Ft)):($._code&_t&&(Ft=Nr($,T,_t,e,i),Ft._code=En(Ft,e),a.push(Ft)),a.push(T));t=a}return t}function fa(t,e){var i,a,l,f,m,w,T,$,U;if(!t||t.length===0)throw new Error("latlngs not passed");Pi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var _t=W([0,0]),Ft=ct(t),li=Ft.getNorthWest().distanceTo(Ft.getSouthWest())*Ft.getNorthEast().distanceTo(Ft.getNorthWest());li<1700&&(_t=Ps(t));var Ue=t.length,ki=[];for(i=0;i<Ue;i++){var fi=W(t[i]);ki.push(e.project(W([fi.lat-_t.lat,fi.lng-_t.lng])))}for(w=T=$=0,i=0,a=Ue-1;i<Ue;a=i++)l=ki[i],f=ki[a],m=l.y*f.x-f.y*l.x,T+=(l.x+f.x)*m,$+=(l.y+f.y)*m,w+=m*3;w===0?U=ki[0]:U=[T/w,$/w];var Wn=e.unproject(q(U));return W([Wn.lat+_t.lat,Wn.lng+_t.lng])}function Ps(t){for(var e=0,i=0,a=0,l=0;l<t.length;l++){var f=W(t[l]);e+=f.lat,i+=f.lng,a++}return W([e/a,i/a])}var El={__proto__:null,clipPolygon:ha,polygonCenter:fa,centroid:Ps};function va(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Ml(t,i),t=zl(t,i),t}function _a(t,e,i){return Math.sqrt(cr(t,e,i,!0))}function Sl(t,e,i){return cr(t,e,i)}function zl(t,e){var i=t.length,a=typeof Uint8Array<"u"?Uint8Array:Array,l=new a(i);l[0]=l[i-1]=1,ks(t,l,e,0,i-1);var f,m=[];for(f=0;f<i;f++)l[f]&&m.push(t[f]);return m}function ks(t,e,i,a,l){var f=0,m,w,T;for(w=a+1;w<=l-1;w++)T=cr(t[w],t[a],t[l],!0),T>f&&(m=w,f=T);f>i&&(e[m]=1,ks(t,e,i,a,m),ks(t,e,i,m,l))}function Ml(t,e){for(var i=[t[0]],a=1,l=0,f=t.length;a<f;a++)Cl(t[a],t[l])>e&&(i.push(t[a]),l=a);return l<f-1&&i.push(t[f-1]),i}var pa;function ma(t,e,i,a,l){var f=a?pa:En(t,i),m=En(e,i),w,T,$;for(pa=m;;){if(!(f|m))return[t,e];if(f&m)return!1;w=f||m,T=Nr(t,e,w,i,l),$=En(T,i),w===f?(t=T,f=$):(e=T,m=$)}}function Nr(t,e,i,a,l){var f=e.x-t.x,m=e.y-t.y,w=a.min,T=a.max,$,U;return i&8?($=t.x+f*(T.y-t.y)/m,U=T.y):i&4?($=t.x+f*(w.y-t.y)/m,U=w.y):i&2?($=T.x,U=t.y+m*(T.x-t.x)/f):i&1&&($=w.x,U=t.y+m*(w.x-t.x)/f),new B($,U,l)}function En(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Cl(t,e){var i=e.x-t.x,a=e.y-t.y;return i*i+a*a}function cr(t,e,i,a){var l=e.x,f=e.y,m=i.x-l,w=i.y-f,T=m*m+w*w,$;return T>0&&($=((t.x-l)*m+(t.y-f)*w)/T,$>1?(l=i.x,f=i.y):$>0&&(l+=m*$,f+=w*$)),m=t.x-l,w=t.y-f,a?m*m+w*w:new B(l,f)}function Pi(t){return!j(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function ga(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Pi(t)}function ya(t,e){var i,a,l,f,m,w,T,$;if(!t||t.length===0)throw new Error("latlngs not passed");Pi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var U=W([0,0]),_t=ct(t),Ft=_t.getNorthWest().distanceTo(_t.getSouthWest())*_t.getNorthEast().distanceTo(_t.getNorthWest());Ft<1700&&(U=Ps(t));var li=t.length,Ue=[];for(i=0;i<li;i++){var ki=W(t[i]);Ue.push(e.project(W([ki.lat-U.lat,ki.lng-U.lng])))}for(i=0,a=0;i<li-1;i++)a+=Ue[i].distanceTo(Ue[i+1])/2;if(a===0)$=Ue[0];else for(i=0,f=0;i<li-1;i++)if(m=Ue[i],w=Ue[i+1],l=m.distanceTo(w),f+=l,f>a){T=(f-a)/l,$=[w.x-T*(w.x-m.x),w.y-T*(w.y-m.y)];break}var fi=e.unproject(q($));return W([fi.lat+U.lat,fi.lng+U.lng])}var Al={__proto__:null,simplify:va,pointToSegmentDistance:_a,closestPointOnSegment:Sl,clipSegment:ma,_getEdgeIntersection:Nr,_getBitCode:En,_sqClosestPointOnSegment:cr,isFlat:Pi,_flat:ga,polylineCenter:ya},Ts={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new gt(t.y,t.x)},bounds:new et([-180,-90],[180,90])},Ls={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,a=t.lat*e,l=this.R_MINOR/i,f=Math.sqrt(1-l*l),m=f*Math.sin(a),w=Math.tan(Math.PI/4-a/2)/Math.pow((1-m)/(1+m),f/2);return a=-i*Math.log(Math.max(w,1e-10)),new B(t.lng*e*i,a)},unproject:function(t){for(var e=180/Math.PI,i=this.R,a=this.R_MINOR/i,l=Math.sqrt(1-a*a),f=Math.exp(-t.y/i),m=Math.PI/2-2*Math.atan(f),w=0,T=.1,$;w<15&&Math.abs(T)>1e-7;w++)$=l*Math.sin(m),$=Math.pow((1-$)/(1+$),l/2),T=Math.PI/2-2*Math.atan(f*$)-m,m+=T;return new gt(m*e,t.x*e/i)}},Ol={__proto__:null,LonLat:Ts,Mercator:Ls,SphericalMercator:A},Il=u({},we,{code:"EPSG:3395",projection:Ls,transformation:(function(){var t=.5/(Math.PI*Ls.R);return Q(t,.5,-t,.5)})()}),ba=u({},we,{code:"EPSG:4326",projection:Ts,transformation:Q(1/180,1,-1/180,.5)}),$l=u({},It,{projection:Ts,transformation:Q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,a=e.lat-t.lat;return Math.sqrt(i*i+a*a)},infinite:!0});It.Earth=we,It.EPSG3395=Il,It.EPSG3857=it,It.EPSG900913=$t,It.EPSG4326=ba,It.Simple=$l;var Ai=H.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[p(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[p(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});ie.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=p(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=p(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return p(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?j(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[p(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=p(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var a in this._zoomBoundLayers){var l=this._zoomBoundLayers[a].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),e=l.maxZoom===void 0?e:Math.max(e,l.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Ai.extend({initialize:function(t,e){O(this,e),this._layers={};var i,a;if(t)for(i=0,a=t.length;i<a;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,a;for(i in this._layers)a=this._layers[i],a[t]&&a[t].apply(a,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return p(t)}}),Dl=function(t,e){return new qn(t,e)},Gi=qn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ft;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Nl=function(t,e){return new Gi(t,e)},Rn=ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){O(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(a,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(t,e){var i=this.options,a=i[e+"Size"];typeof a=="number"&&(a=[a,a]);var l=q(a),f=q(e==="shadow"&&i.shadowAnchor||i.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return I.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Zl(t){return new Rn(t)}var ur=Rn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ur.imagePath!="string"&&(ur.imagePath=this._detectIconPath()),(this.options.imagePath||ur.imagePath)+Rn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,a,l){var f=a.exec(i);return f&&f[l]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=jt("div","leaflet-default-icon-path",document.body),e=Je(t,"background-image")||Je(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),wa=Zi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new hn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Mt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,a=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=oi(e._icon),m=i.getPixelBounds(),w=i.getPixelOrigin(),T=mt(m.min._subtract(w).add(l),m.max._subtract(w).subtract(l));if(!T.contains(f)){var $=q((Math.max(T.max.x,f.x)-T.max.x)/(m.max.x-T.max.x)-(Math.min(T.min.x,f.x)-T.min.x)/(m.min.x-T.min.x),(Math.max(T.max.y,f.y)-T.max.y)/(m.max.y-T.max.y)-(Math.min(T.min.y,f.y)-T.min.y)/(m.min.y-T.min.y)).multiplyBy(a);i.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),ye(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Pt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Ot(this._panRequest),this._panRequest=Pt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,a=oi(e._icon),l=e._map.layerPointToLatLng(a);i&&ye(i,a),e._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Ot(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Zr=Ai.extend({options:{icon:new ur,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){O(this,e),this._latlng=W(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),a=!1;i!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),Mt(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(i,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(Mt(l,e),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(this._icon,"focus",this._panOnFocus,this),Pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Mt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wa)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wa(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Oe(this._icon,t),this._shadow&&Oe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?q(e.iconSize):q(0,0),a=e.iconAnchor?q(e.iconAnchor):q(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:i.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bl(t,e){return new Zr(t,e)}var fn=Ai.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return O(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Br=fn.extend({options:{fill:!0,radius:10},initialize:function(t,e){O(this,e),this._latlng=W(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return fn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),a=[t+i,e+i];this._pxBounds=new et(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ql(t,e){return new Br(t,e)}var Es=Br.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=u({},i,{radius:e})),O(this,e),this._latlng=W(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:fn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,a=i.options.crs;if(a.distance===we.distance){var l=Math.PI/180,f=this._mRadius/we.R/l,m=i.project([e+f,t]),w=i.project([e-f,t]),T=m.add(w).divideBy(2),$=i.unproject(T).lat,U=Math.acos((Math.cos(f*l)-Math.sin(e*l)*Math.sin($*l))/(Math.cos(e*l)*Math.cos($*l)))/l;(isNaN(U)||U===0)&&(U=f/Math.cos(Math.PI/180*e)),this._point=T.subtract(i.getPixelOrigin()),this._radius=isNaN(U)?0:T.x-i.project([$,t-U]).x,this._radiusY=T.y-m.y}else{var _t=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(_t).x}this._updateBounds()}});function Rl(t,e,i){return new Es(t,e,i)}var Yi=fn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){O(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,a=cr,l,f,m=0,w=this._parts.length;m<w;m++)for(var T=this._parts[m],$=1,U=T.length;$<U;$++){l=T[$-1],f=T[$];var _t=a(t,l,f,!0);_t<e&&(e=_t,i=a(t,l,f))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ya(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=W(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ft,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Pi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Pi(t),a=0,l=t.length;a<l;a++)i?(e[a]=W(t[a]),this._bounds.extend(e[a])):e[a]=this._convertLatLngs(t[a]);return e},_project:function(){var t=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new B(t,t);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var a=t[0]instanceof gt,l=t.length,f,m;if(a){for(m=[],f=0;f<l;f++)m[f]=this._map.latLngToLayerPoint(t[f]),i.extend(m[f]);e.push(m)}else for(f=0;f<l;f++)this._projectLatlngs(t[f],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,a,l,f,m,w,T;for(i=0,l=0,f=this._rings.length;i<f;i++)for(T=this._rings[i],a=0,m=T.length;a<m-1;a++)w=ma(T[a],T[a+1],t,a,!0),w&&(e[l]=e[l]||[],e[l].push(w[0]),(w[1]!==T[a+1]||a===m-2)&&(e[l].push(w[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,a=t.length;i<a;i++)t[i]=va(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,a,l,f,m,w,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,f=this._parts.length;i<f;i++)for(w=this._parts[i],a=0,m=w.length,l=m-1;a<m;l=a++)if(!(!e&&a===0)&&_a(t,w[l],w[a])<=T)return!0;return!1}});function jl(t,e){return new Yi(t,e)}Yi._flat=ga;var jn=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Yi.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof gt&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Yi.prototype._setLatLngs.call(this,t),Pi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Pi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new B(e,e);if(t=new et(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,l=this._rings.length,f;a<l;a++)f=ha(this._rings[a],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,a,l,f,m,w,T,$;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,T=this._parts.length;f<T;f++)for(i=this._parts[f],m=0,$=i.length,w=$-1;m<$;w=m++)a=i[m],l=i[w],a.y>t.y!=l.y>t.y&&t.x<(l.x-a.x)*(t.y-a.y)/(l.y-a.y)+a.x&&(e=!e);return e||Yi.prototype._containsPoint.call(this,t,!0)}});function Fl(t,e){return new jn(t,e)}var Ji=Gi.extend({initialize:function(t,e){O(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=j(t)?t:t.features,i,a,l;if(e){for(i=0,a=e.length;i<a;i++)l=e[i],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var m=qr(t,f);return m?(m.feature=Fr(t),m.defaultOptions=m.options,this.resetStyle(m),f.onEachFeature&&f.onEachFeature(t,m),this.addLayer(m)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function qr(t,e){var i=t.type==="Feature"?t.geometry:t,a=i?i.coordinates:null,l=[],f=e&&e.pointToLayer,m=e&&e.coordsToLatLng||Ss,w,T,$,U;if(!a&&!i)return null;switch(i.type){case"Point":return w=m(a),xa(f,t,w,e);case"MultiPoint":for($=0,U=a.length;$<U;$++)w=m(a[$]),l.push(xa(f,t,w,e));return new Gi(l);case"LineString":case"MultiLineString":return T=Rr(a,i.type==="LineString"?0:1,m),new Yi(T,e);case"Polygon":case"MultiPolygon":return T=Rr(a,i.type==="Polygon"?1:2,m),new jn(T,e);case"GeometryCollection":for($=0,U=i.geometries.length;$<U;$++){var _t=qr({geometry:i.geometries[$],type:"Feature",properties:t.properties},e);_t&&l.push(_t)}return new Gi(l);case"FeatureCollection":for($=0,U=i.features.length;$<U;$++){var Ft=qr(i.features[$],e);Ft&&l.push(Ft)}return new Gi(l);default:throw new Error("Invalid GeoJSON object.")}}function xa(t,e,i,a){return t?t(e,i):new Zr(i,a&&a.markersInheritOptions&&a)}function Ss(t){return new gt(t[1],t[0],t[2])}function Rr(t,e,i){for(var a=[],l=0,f=t.length,m;l<f;l++)m=e?Rr(t[l],e-1,i):(i||Ss)(t[l]),a.push(m);return a}function zs(t,e){return t=W(t),t.alt!==void 0?[P(t.lng,e),P(t.lat,e),P(t.alt,e)]:[P(t.lng,e),P(t.lat,e)]}function jr(t,e,i,a){for(var l=[],f=0,m=t.length;f<m;f++)l.push(e?jr(t[f],Pi(t[f])?0:e-1,i,a):zs(t[f],a));return!e&&i&&l.length>0&&l.push(l[0].slice()),l}function Fn(t,e){return t.feature?u({},t.feature,{geometry:e}):Fr(e)}function Fr(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ms={toGeoJSON:function(t){return Fn(this,{type:"Point",coordinates:zs(this.getLatLng(),t)})}};Zr.include(Ms),Es.include(Ms),Br.include(Ms),Yi.include({toGeoJSON:function(t){var e=!Pi(this._latlngs),i=jr(this._latlngs,e?1:0,!1,t);return Fn(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),jn.include({toGeoJSON:function(t){var e=!Pi(this._latlngs),i=e&&!Pi(this._latlngs[0]),a=jr(this._latlngs,i?2:e?1:0,!0,t);return e||(a=[a]),Fn(this,{type:(i?"Multi":"")+"Polygon",coordinates:a})}}),qn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),Fn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",a=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(t);if(i)a.push(f.geometry);else{var m=Fr(f);m.type==="FeatureCollection"?a.push.apply(a,m.features):a.push(m)}}}),i?Fn(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function Pa(t,e){return new Ji(t,e)}var Hl=Pa,Hr=Ai.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=ct(e),O(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Mt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ui(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ct(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:jt("img");if(Mt(e,"leaflet-image-layer"),this._zoomAnimated&&Mt(e,"leaflet-zoom-animated"),this.options.className&&Mt(e,this.options.className),e.onselectstart=b,e.onmousemove=b,e.onload=d(this.fire,this,"load"),e.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;gi(this._image,i,e)},_reset:function(){var t=this._image,e=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ye(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Oe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Wl=function(t,e,i){return new Hr(t,e,i)},ka=Hr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:jt("video");if(Mt(e,"leaflet-image-layer"),this._zoomAnimated&&Mt(e,"leaflet-zoom-animated"),this.options.className&&Mt(e,this.options.className),e.onselectstart=b,e.onmousemove=b,e.onloadeddata=d(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),a=[],l=0;l<i.length;l++)a.push(i[l].src);this._url=i.length>0?a:[e.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var m=jt("source");m.src=this._url[f],e.appendChild(m)}}});function Ul(t,e,i){return new ka(t,e,i)}var Ta=Hr.extend({_initImage:function(){var t=this._image=this._url;Mt(t,"leaflet-image-layer"),this._zoomAnimated&&Mt(t,"leaflet-zoom-animated"),this.options.className&&Mt(t,this.options.className),t.onselectstart=b,t.onmousemove=b}});function Vl(t,e,i){return new Ta(t,e,i)}var Bi=Ai.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof gt||j(t))?(this._latlng=W(t),O(this,e)):(O(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Oe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Oe(this._container,1),this.bringToFront(),this.options.interactive&&(Mt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Oe(this._container,0),this._removeTimeout=setTimeout(d(Pe,void 0,this._container),200)):Pe(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=W(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ui(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Gi){e=null;var i=this._source._layers;for(var a in i)if(i[a]._map){e=i[a];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=q(this.options.offset),i=this._getAnchor();this._zoomAnimated?ye(this._container,t.add(i)):e=e.add(t).add(i);var a=this._containerBottom=-e.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=a+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});ie.include({_initOverlay:function(t,e,i,a){var l=e;return l instanceof t||(l=new t(a).setContent(e)),i&&l.setLatLng(i),l}}),Ai.include({_initOverlay:function(t,e,i,a){var l=i;return l instanceof t?(O(l,a),l._source=this):(l=e&&!a?e:new t(a,this),l.setContent(i)),l}});var Wr=Bi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Bi.prototype.openOn.call(this,t)},onAdd:function(t){Bi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fn||this._source.on("preclick",Tn))},onRemove:function(t){Bi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fn||this._source.off("preclick",Tn))},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=jt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=jt("div",t+"-content-wrapper",e);if(this._contentNode=jt("div",t+"-content",i),or(e),ys(this._contentNode),At(e,"contextmenu",Tn),this._tipContainer=jt("div",t+"-tip-container",e),this._tip=jt("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=jt("a",t+"-close-button",e);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',At(a,"click",function(l){Ke(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var a=t.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&a>l?(e.height=l+"px",Mt(t,f)):Ze(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ye(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Je(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,a=this._containerWidth,l=new B(this._containerLeft,-i-this._containerBottom);l._add(oi(this._container));var f=t.layerPointToContainerPoint(l),m=q(this.options.autoPanPadding),w=q(this.options.autoPanPaddingTopLeft||m),T=q(this.options.autoPanPaddingBottomRight||m),$=t.getSize(),U=0,_t=0;f.x+a+T.x>$.x&&(U=f.x+a-$.x+T.x),f.x-U-w.x<0&&(U=f.x-w.x),f.y+i+T.y>$.y&&(_t=f.y+i-$.y+T.y),f.y-_t-w.y<0&&(_t=f.y-w.y),(U||_t)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([U,_t]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gl=function(t,e){return new Wr(t,e)};ie.mergeOptions({closePopupOnClick:!0}),ie.include({openPopup:function(t,e,i){return this._initOverlay(Wr,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ai.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Wr,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Gi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Ln(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof fn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ur=Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Bi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Bi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=jt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,a=this._map,l=this._container,f=a.latLngToContainerPoint(a.getCenter()),m=a.layerPointToContainerPoint(t),w=this.options.direction,T=l.offsetWidth,$=l.offsetHeight,U=q(this.options.offset),_t=this._getAnchor();w==="top"?(e=T/2,i=$):w==="bottom"?(e=T/2,i=0):w==="center"?(e=T/2,i=$/2):w==="right"?(e=0,i=$/2):w==="left"?(e=T,i=$/2):m.x<f.x?(w="right",e=0,i=$/2):(w="left",e=T+(U.x+_t.x)*2,i=$/2),t=t.subtract(q(e,i,!0)).add(U).add(_t),Ze(l,"leaflet-tooltip-right"),Ze(l,"leaflet-tooltip-left"),Ze(l,"leaflet-tooltip-top"),Ze(l,"leaflet-tooltip-bottom"),Mt(l,"leaflet-tooltip-"+w),ye(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Oe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yl=function(t,e){return new Ur(t,e)};ie.include({openTooltip:function(t,e,i){return this._initOverlay(Ur,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ai.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ur,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Gi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(At(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),At(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,a;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(e)}});var La=Rn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(cn(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var a=q(i.bgPos);e.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Jl(t){return new La(t)}Rn.Default=ur;var dr=Ai.extend({options:{tileSize:256,opacity:1,updateWhenIdle:I.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){O(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Pe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ui(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),a=0,l=e.length,f;a<l;a++)f=e[a].style.zIndex,e[a]!==this._container&&f&&(i=t(i,+f));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!I.ielt9){Oe(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var a in this._tiles){var l=this._tiles[a];if(!(!l.current||!l.loaded)){var f=Math.min(1,(t-l.loaded)/200);Oe(l.el,f),f<1?e=!0:(l.active?i=!0:this._onOpaqueTile(l),l.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(Ot(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(Pe(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var a=this._levels[t],l=this._map;return a||(a=this._levels[t]={},a.el=jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=e,a.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,l.getCenter(),l.getZoom()),b(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var a=e.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Pe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,a){var l=Math.floor(t/2),f=Math.floor(e/2),m=i-1,w=new B(+l,+f);w.z=+m;var T=this._tileCoordsToKey(w),$=this._tiles[T];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),m>a?this._retainParent(l,f,m,a):!1)},_retainChildren:function(t,e,i,a){for(var l=2*t;l<2*t+2;l++)for(var f=2*e;f<2*e+2;f++){var m=new B(l,f);m.z=i+1;var w=this._tileCoordsToKey(m),T=this._tiles[w];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);i+1<a&&this._retainChildren(l,f,i+1,a)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,a){var l=Math.round(e);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!a||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var a=this._map.getZoomScale(i,t.zoom),l=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(e,i)).round();I.any3d?gi(t.el,l,a):ye(t.el,l)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),a=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],a).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],a).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],a).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],a).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),a=e.getZoomScale(i,this._tileZoom),l=e.project(t,this._tileZoom).floor(),f=e.getSize().divideBy(a*2);return new et(l.subtract(f),l.add(f))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(a),f=l.getCenter(),m=[],w=this.options.keepBuffer,T=new et(l.getBottomLeft().subtract([w,-w]),l.getTopRight().add([w,-w]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var U=this._tiles[$].coords;(U.z!==this._tileZoom||!T.contains(new B(U.x,U.y)))&&(this._tiles[$].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var _t=l.min.y;_t<=l.max.y;_t++)for(var Ft=l.min.x;Ft<=l.max.x;Ft++){var li=new B(Ft,_t);if(li.z=this._tileZoom,!!this._isValidTile(li)){var Ue=this._tiles[this._tileCoordsToKey(li)];Ue?Ue.current=!0:m.push(li)}}if(m.sort(function(fi,Wn){return fi.distanceTo(f)-Wn.distanceTo(f)}),m.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ki=document.createDocumentFragment();for(Ft=0;Ft<m.length;Ft++)this._addTile(m[Ft],ki);this._level.el.appendChild(ki)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return ct(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),a=t.scaleBy(i),l=a.add(i),f=e.unproject(a,t.z),m=e.unproject(l,t.z);return[f,m]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new ft(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new B(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(Pe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Mt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=b,t.onmousemove=b,I.ielt9&&this.options.opacity<1&&Oe(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),a=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&Pt(d(this._tileReady,this,t,null,l)),ye(l,i),this._tiles[a]={el:l,coords:t,current:!0},e.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var a=this._tileCoordsToKey(t);i=this._tiles[a],i&&(i.loaded=+new Date,this._map._fadeAnimated?(Oe(i.el,0),Ot(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(Mt(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),I.ielt9||!this._map._fadeAnimated?Pt(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new B(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new et(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Kl(t){return new dr(t)}var Hn=dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=O(this,e),e.detectRetina&&I.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return At(i,"load",d(this._tileOnLoad,this,e,i)),At(i,"error",d(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:I.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return ot(this._url,u(e,this.options))},_tileOnLoad:function(t,e){I.ielt9?setTimeout(d(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var a=this.options.errorTileUrl;a&&e.getAttribute("src")!==a&&(e.src=a),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,a=this.options.zoomOffset;return i&&(t=e-t),t+a},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=b,e.onerror=b,!e.complete)){e.src=K;var i=this._tiles[t].coords;Pe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",K),dr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===K))return dr.prototype._tileReady.call(this,t,e,i)}});function Ea(t,e){return new Hn(t,e)}var Sa=Hn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=u({},this.defaultWmsParams);for(var a in e)a in this.options||(i[a]=e[a]);e=O(this,e);var l=e.detectRetina&&I.retina?2:1,f=this.getTileSize();i.width=f.x*l,i.height=f.y*l,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Hn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,a=mt(i.project(e[0]),i.project(e[1])),l=a.min,f=a.max,m=(this._wmsVersion>=1.3&&this._crs===ba?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),w=Hn.prototype.getTileUrl.call(this,t);return w+C(this.wmsParams,w,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+m},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function Xl(t,e){return new Sa(t,e)}Hn.WMS=Sa,Ea.wms=Xl;var Ki=Ai.extend({options:{padding:.1},initialize:function(t){O(this,t),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Mt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,e),f=a.multiplyBy(-i).add(l).subtract(this._map._getNewPixelOrigin(t,e));I.any3d?gi(this._container,f,i):ye(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new et(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),za=Ki.extend({options:{tolerance:0},getEvents:function(){var t=Ki.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ki.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");At(t,"mousemove",this._onMouseMove,this),At(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Ot(this._redrawRequest),delete this._ctx,Pe(this._container),Ce(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ki.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),a=I.retina?2:1;ye(e,t.min),e.width=a*i.x,e.height=a*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",I.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ki.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[p(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,a=e.prev;i?i.prev=a:this._drawLast=a,a?a.next=i:this._drawFirst=i,delete t._order,delete this._layers[p(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],a,l;for(l=0;l<e.length;l++){if(a=Number(e[l]),isNaN(a))return;i.push(a)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Pt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,a,l,f,m=t._parts,w=m.length,T=this._ctx;if(w){for(T.beginPath(),i=0;i<w;i++){for(a=0,l=m[i].length;a<l;a++)f=m[i][a],T[a?"lineTo":"moveTo"](f.x,f.y);e&&T.closePath()}this._fillStroke(T,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,a=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||a)/a;l!==1&&(i.save(),i.scale(1,l)),i.beginPath(),i.arc(e.x,e.y/l,a,0,Math.PI*2,!1),l!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,a,l=this._drawFirst;l;l=l.next)i=l.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(a=i);this._fireEvent(a?[a]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,a,l=this._drawFirst;l;l=l.next)i=l.layer,i.options.interactive&&i._containsPoint(e)&&(a=i);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(Mt(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,a=e.prev;if(i)i.prev=a;else return;a?a.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,a=e.prev;if(a)a.next=i;else return;i?i.prev=a:a&&(this._drawLast=a),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Ma(t){return I.canvas?new za(t):null}var hr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ql={_initContainer:function(){this._container=jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ki.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hr("shape");Mt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Pe(e),t.removeInteractiveTarget(e),delete this._layers[p(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,a=t.options,l=t._container;l.stroked=!!a.stroke,l.filled=!!a.fill,a.stroke?(e||(e=t._stroke=hr("stroke")),l.appendChild(e),e.weight=a.weight+"px",e.color=a.color,e.opacity=a.opacity,a.dashArray?e.dashStyle=j(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=a.lineCap.replace("butt","flat"),e.joinstyle=a.lineJoin):e&&(l.removeChild(e),t._stroke=null),a.fill?(i||(i=t._fill=hr("fill")),l.appendChild(i),i.color=a.fillColor||a.color,i.opacity=a.fillOpacity):i&&(l.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),a=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+a+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ui(t._container)},_bringToBack:function(t){un(t._container)}},Vr=I.vml?hr:Xt,fr=Ki.extend({_initContainer:function(){this._container=Vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pe(this._container),Ce(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ki.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),ye(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Vr("path");t.options.className&&Mt(e,t.options.className),t.options.interactive&&Mt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Pe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[p(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,pt(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),a=Math.max(Math.round(t._radiusY),1)||i,l="a"+i+","+a+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+l+i*2+",0 "+l+-i*2+",0 ";this._setPath(t,f)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ui(t._path)},_bringToBack:function(t){un(t._path)}});I.vml&&fr.include(Ql);function Ca(t){return I.svg||I.vml?new fr(t):null}ie.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Ma(t)||Ca(t)}});var Aa=jn.extend({initialize:function(t,e){jn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ct(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function tc(t,e){return new Aa(t,e)}fr.create=Vr,fr.pointsToPath=pt,Ji.geometryToLayer=qr,Ji.coordsToLatLng=Ss,Ji.coordsToLatLngs=Rr,Ji.latLngToCoords=zs,Ji.latLngsToCoords=jr,Ji.getFeature=Fn,Ji.asFeature=Fr,ie.mergeOptions({boxZoom:!0});var Oa=Zi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vi(),ds(),this._startPoint=this._map.mouseEventToContainerPoint(t),At(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=jt("div","leaflet-zoom-box",this._container),Mt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new et(this._point,this._startPoint),i=e.getSize();ye(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(Pe(this._box),Ze(this._container,"leaflet-crosshair")),kn(),hs(),Ce(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var e=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ie.addInitHook("addHandler","boxZoom",Oa),ie.mergeOptions({doubleClickZoom:!0});var Ia=Zi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),a=e.options.zoomDelta,l=t.originalEvent.shiftKey?i-a:i+a;e.options.doubleClickZoom==="center"?e.setZoom(l):e.setZoomAround(t.containerPoint,l)}});ie.addInitHook("addHandler","doubleClickZoom",Ia),ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $a=Zi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new hn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Mt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ct(this._map.options.maxBounds);this._offsetLimit=mt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,a=this._draggable._newPos.x,l=(a-e+i)%t+e-i,f=(a+e+i)%t-e-i,m=Math.abs(l+i)<Math.abs(f+i)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=m},_onDragEnd:function(t){var e=this._map,i=e.options,a=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),a)e.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,m=i.easeLinearity,w=l.multiplyBy(m/f),T=w.distanceTo([0,0]),$=Math.min(i.inertiaMaxSpeed,T),U=w.multiplyBy($/T),_t=$/(i.inertiaDeceleration*m),Ft=U.multiplyBy(-_t/2).round();!Ft.x&&!Ft.y?e.fire("moveend"):(Ft=e._limitOffset(Ft,e.options.maxBounds),Pt(function(){e.panBy(Ft,{duration:_t,easeLinearity:m,noMoveStart:!0,animate:!0})}))}}});ie.addInitHook("addHandler","dragging",$a),ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Da=Zi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),At(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ce(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,a=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(a,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,a,l;for(a=0,l=i.left.length;a<l;a++)e[i.left[a]]=[-1*t,0];for(a=0,l=i.right.length;a<l;a++)e[i.right[a]]=[t,0];for(a=0,l=i.down.length;a<l;a++)e[i.down[a]]=[0,t];for(a=0,l=i.up.length;a<l;a++)e[i.up[a]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,a,l;for(a=0,l=i.zoomIn.length;a<l;a++)e[i.zoomIn[a]]=t;for(a=0,l=i.zoomOut.length;a<l;a++)e[i.zoomOut[a]]=-t},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,a;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(a=this._panKeys[e],t.shiftKey&&(a=q(a).multiplyBy(3)),i.options.maxBounds&&(a=i._limitOffset(q(a),i.options.maxBounds)),i.options.worldCopyJump){var l=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(a)));i.panTo(l)}else i.panBy(a)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Ln(t)}}});ie.addInitHook("addHandler","keyboard",Da),ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Na=Zi.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=oa(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),a),Ln(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,f=i?Math.ceil(l/i)*i:l,m=t._limitZoom(e+(this._delta>0?f:-f))-e;this._delta=0,this._startTime=null,m&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+m):t.setZoomAround(this._lastMousePos,e+m))}});ie.addInitHook("addHandler","scrollWheelZoom",Na);var ec=600;ie.mergeOptions({tapHold:I.touchNative&&I.safari&&I.mobile,tapTolerance:15});var Za=Zi.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new B(e.clientX,e.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",Ke),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ec),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ce(document,"touchend",Ke),Ce(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});ie.addInitHook("addHandler","tapHold",Za),ie.mergeOptions({touchZoom:I.touch,bounceAtZoomLimits:!0});var Ba=Zi.extend({addHooks:function(){Mt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(a)._divideBy(2))),this._startDist=i.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),Ke(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),l=i.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(l,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&l<1||this._zoom>e.getMaxZoom()&&l>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=i._add(a)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),Ot(this._animRequest);var m=d(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Pt(m,this,!0),Ke(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ot(this._animRequest),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ie.addInitHook("addHandler","touchZoom",Ba),ie.BoxZoom=Oa,ie.DoubleClickZoom=Ia,ie.Drag=$a,ie.Keyboard=Da,ie.ScrollWheelZoom=Na,ie.TapHold=Za,ie.TouchZoom=Ba,s.Bounds=et,s.Browser=I,s.CRS=It,s.Canvas=za,s.Circle=Es,s.CircleMarker=Br,s.Class=ne,s.Control=Ci,s.DivIcon=La,s.DivOverlay=Bi,s.DomEvent=yl,s.DomUtil=ml,s.Draggable=hn,s.Evented=H,s.FeatureGroup=Gi,s.GeoJSON=Ji,s.GridLayer=dr,s.Handler=Zi,s.Icon=Rn,s.ImageOverlay=Hr,s.LatLng=gt,s.LatLngBounds=ft,s.Layer=Ai,s.LayerGroup=qn,s.LineUtil=Al,s.Map=ie,s.Marker=Zr,s.Mixin=Ll,s.Path=fn,s.Point=B,s.PolyUtil=El,s.Polygon=jn,s.Polyline=Yi,s.Popup=Wr,s.PosAnimation=la,s.Projection=Ol,s.Rectangle=Aa,s.Renderer=Ki,s.SVG=fr,s.SVGOverlay=Ta,s.TileLayer=Hn,s.Tooltip=Ur,s.Transformation=V,s.Util=_e,s.VideoOverlay=ka,s.bind=d,s.bounds=mt,s.canvas=Ma,s.circle=Rl,s.circleMarker=ql,s.control=lr,s.divIcon=Jl,s.extend=u,s.featureGroup=Nl,s.geoJSON=Pa,s.geoJson=Hl,s.gridLayer=Kl,s.icon=Zl,s.imageOverlay=Wl,s.latLng=W,s.latLngBounds=ct,s.layerGroup=Dl,s.map=bl,s.marker=Bl,s.point=q,s.polygon=Fl,s.polyline=jl,s.popup=Gl,s.rectangle=tc,s.setOptions=O,s.stamp=p,s.svg=Ca,s.svgOverlay=Vl,s.tileLayer=Ea,s.tooltip=Yl,s.transformation=Q,s.version=o,s.videoOverlay=Ul;var ic=window.L;s.noConflict=function(){return window.L=ic,this},window.L=s}))})(yr,yr.exports)),yr.exports}var xd=wd();const Vn=yd(xd);var Pd=D('<div class="map-container svelte-1kh2itm"></div>');function pl(n,r){Fi(r,!0);let s=bi(r,"activities",19,()=>[]),o=bi(r,"center",19,()=>[51.505,-.09]),u=bi(r,"zoom",3,13),h,d=St(void 0),_=[],p;Vu(()=>{if(h)return delete Vn.Icon.Default.prototype._getIconUrl,Vn.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),M(d,Vn.map(h).setView(o(),u()),!0),Vn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(c(d)),()=>{c(d)?.remove()}}),yn(()=>{c(d)&&c(d).flyTo(o(),u())}),yn(()=>{if(!c(d))return;_.forEach(b=>b.remove()),_=[],p&&(p.remove(),p=void 0);const x=[];s().forEach((b,P)=>{const S=Vn.marker([b.lat,b.lng]).addTo(c(d)).bindPopup(`<b>${P+1}. ${b.name}</b><br>${b.notes||""}`);_.push(S),x.push([b.lat,b.lng])}),x.length>1&&(p=Vn.polyline(x,{color:"#3b82f6",weight:4,opacity:.7,dashArray:"10, 10",lineCap:"round"}).addTo(c(d)))});var y=Pd();ju(y,x=>h=x,()=>h),E(n,y),Hi()}var kd=D('<li class="svelte-1qcwaj1"><button class="svelte-1qcwaj1"> </button></li>'),Td=D('<ul class="results svelte-1qcwaj1"></ul>'),Ld=D('<div class="search-container svelte-1qcwaj1"><div class="input-wrapper svelte-1qcwaj1"><!> <input type="text" placeholder="Search places..." class="svelte-1qcwaj1"/> <!></div> <!></div>');function Ed(n,r){Fi(r,!0);let s=St(""),o=St(ui([])),u=St(!1),h;function d(){if(clearTimeout(h),c(s).length<3){M(o,[],!0);return}h=setTimeout(async()=>{M(u,!0);try{const C=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c(s))}&limit=5&accept-language=zh-TW,en`);C.ok&&M(o,await C.json(),!0)}catch(C){console.error(C)}finally{M(u,!1)}},500)}function _(C){r.onselect({name:C.display_name.split(",")[0],lat:parseFloat(C.lat),lng:parseFloat(C.lon),full_name:C.display_name}),M(o,[],!0),M(s,"")}var p=Ld(),y=v(p),x=v(y);ad(x,{size:18,class:"search-icon"});var b=g(x,2);b.__input=d;var P=g(b,2);{var S=C=>{sd(C,{size:18,class:"loader"})};tt(P,C=>{c(u)&&C(S)})}var N=g(y,2);{var O=C=>{var Z=Td();Ie(Z,21,()=>c(o),Qe,(ot,j)=>{var R=kd(),K=v(R);K.__click=()=>_(c(j));var Y=v(K);G(()=>z(Y,c(j).display_name)),E(ot,R)}),E(C,Z)};tt(N,C=>{c(o).length>0&&C(O)})}Ii(b,()=>c(s),C=>M(s,C)),E(n,p),Hi()}Zn(["input","click"]);function Sd(n,r,s,o){const h=n*Math.PI/180,d=s*Math.PI/180,_=(s-n)*Math.PI/180,p=(o-r)*Math.PI/180,y=Math.sin(_/2)*Math.sin(_/2)+Math.cos(h)*Math.cos(d)*Math.sin(p/2)*Math.sin(p/2),b=6371e3*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)));return b<1e3?Math.round(b)+" m":(b/1e3).toFixed(2)+" km"}function zd(n){const r=`
    :root {
      --bg: #ffffff;
      --text: #333333;
      --heading: #111111;
      --card-bg: #f9f9f9;
      --card-border-l: #3b82f6;
      --meta: #666666;
      --border: #ccc;
      --tag-bg: #e0e7ff;
      --tag-text: #3730a3;
      --summary-bg: #f0fdf4;
      --summary-border: #bbf7d0;
      --gen-bg: #fff7ed;
      --gen-border: #ffedd5;
      --note-bg: #fff;
      --note-border: #eee;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #18181b;
        --text: #e4e4e7;
        --heading: #ffffff;
        --card-bg: #27272a;
        --card-border-l: #60a5fa;
        --meta: #a1a1aa;
        --border: #3f3f46;
        --tag-bg: #312e81;
        --tag-text: #e0e7ff;
        --summary-bg: #064e3b;
        --summary-border: #065f46;
        --gen-bg: #431407;
        --gen-border: #571e0c;
        --note-bg: #18181b;
        --note-border: #3f3f46;
      }
    }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: var(--text); background: var(--bg); max-width: 800px; margin: 0 auto; padding: 20px; }
    h1 { border-bottom: 2px solid var(--heading); padding-bottom: 10px; margin-bottom: 10px; color: var(--heading); }
    h2 { margin-top: 30px; border-bottom: 1px solid var(--border); padding-bottom: 5px; color: var(--heading); font-size: 1.5em; }
    h3 { margin-top: 20px; color: var(--heading); font-size: 1.2em; }
    .trip-meta { color: var(--meta); margin-bottom: 30px; font-size: 1.1em; }
    .day-section { margin-bottom: 40px; page-break-inside: avoid; }
    .activity-item { margin-bottom: 15px; padding: 15px; background: var(--card-bg); border-left: 4px solid var(--card-border-l); border-radius: 4px; }
    .activity-header { display: flex; justify-content: space-between; align-items: baseline; font-weight: bold; font-size: 1.1em; margin-bottom: 5px; color: var(--heading); }
    .activity-details { font-size: 0.95em; color: var(--meta); }
    .detail-row { margin-bottom: 4px; }
    .expenses-section { margin-top: 10px; font-size: 0.9em; border-top: 1px dashed var(--border); padding-top: 5px; }
    .expense-tag { display: inline-block; background: var(--tag-bg); color: var(--tag-text); padding: 2px 8px; border-radius: 12px; margin-right: 5px; font-size: 0.85em; }
    .notes { font-style: italic; color: var(--meta); margin-top: 8px; background: var(--note-bg); padding: 8px; border-radius: 4px; border: 1px solid var(--note-border); }
    .total-summary { background: var(--summary-bg); border: 1px solid var(--summary-border); padding: 20px; border-radius: 8px; margin-bottom: 30px; }
    .general-expenses { background: var(--gen-bg); border: 1px solid var(--gen-border); padding: 20px; border-radius: 8px; margin-bottom: 30px; }
    ul { margin: 0; padding-left: 20px; }
    li { margin-bottom: 5px; }
    .print-button { display: none; }
    @media print {
      body { max-width: 100%; padding: 0; background: white; color: black; }
      .activity-item { break-inside: avoid; border: 1px solid #ddd; border-left: 4px solid #3b82f6; background: white; }
      .print-hide { display: none; }
      h1, h2, h3 { color: black; border-color: black; }
      .total-summary, .general-expenses { border: 1px solid #ddd; background: white; }
    }
  `,s=x=>{try{return new Date(x).toLocaleDateString(k.lang==="zh"?"zh-TW":void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return x}},o=(x,b)=>`${Ei[b]||b} ${x.toFixed(2)}`,u={};n.generalExpenses?.forEach(x=>{const b=x.currency||n.currency||"USD";u[b]=(u[b]||0)+x.amount}),n.days.forEach(x=>{x.activities.forEach(b=>{b.expenses.forEach(P=>{const S=P.currency||n.currency||"USD";u[S]=(u[S]||0)+P.amount})})});const h=Object.entries(u).map(([x,b])=>`<div style="font-size: 1.2em; font-weight: bold;">${o(b,x)}</div>`).join("");let d="";n.days.forEach((x,b)=>{let P="";x.activities.length===0?P=`<p><em>${k.t("trip.emptyActivities")}</em></p>`:P=x.activities.map(S=>{const N=S.expenses.map(O=>`<span class="expense-tag">${O.name||k.t(`cat.${O.category}`)}: ${o(O.amount,O.currency||n.currency||"USD")}</span>`).join("");return`
          <div class="activity-item">
            <div class="activity-header">
              <span>${S.name}</span>
              ${S.estimatedCost?`<span style="color: var(--meta); font-weight: normal; font-size: 0.9em;">Est: ${o(S.estimatedCost,n.currency)}</span>`:""}
            </div>
            <div class="activity-details">
              ${S.address?`<div class="detail-row">ð ${S.address}</div>`:""}
              ${S.notes?`<div class="notes">ð ${S.notes}</div>`:""}
              ${N?`<div class="expenses-section">ð° ${N}</div>`:""}
            </div>
          </div>
        `}).join(""),d+=`
      <div class="day-section">
        <h2>${k.day(b+1)}: ${s(x.date)}</h2>
        ${P}
      </div>
    `});let _="";if(n.generalExpenses&&n.generalExpenses.length>0){const x=n.generalExpenses.map(b=>`<li><strong>${b.name||k.t(`cat.${b.category}`)}</strong>: ${o(b.amount,b.currency||n.currency||"USD")} <span style="color: var(--meta); font-size: 0.9em;">(${k.t(`cat.${b.category}`)})</span></li>`).join("");_=`
        <div class="general-expenses">
            <h3>${k.t("finance.view.all")} ${k.t("finance.finances")}</h3>
            <ul>${x}</ul>
        </div>
      `}const p=k.lang==="zh"?"è¡ç¨ï¼":"Trip to ",y=k.lang==="zh"?"æ¥æï¼":"Date: ";return`
    <!DOCTYPE html>
    <html lang="${k.lang}">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="color-scheme" content="light dark">
      <title>${n.destination} - Itinerary</title>
      <style>${r}</style>
    </head>
    <body>
      <h1>${p}${n.destination}</h1>
      <div class="trip-meta">
        ${y}${s(n.startDate)} - ${s(n.endDate)}
      </div>

      <div class="total-summary">
        <h3>${k.t("finance.totalActual")}</h3>
        ${h||k.t("modal.noExpenses")}
      </div>

      ${_}
      ${d}

      <div class="print-hide" style="margin-top: 50px; text-align: center; color: var(--meta); font-size: 0.8em;">
        Generated by TripPlanner ${new Date().toLocaleDateString()}
      </div>
    </body>
    </html>
  `}var Md=D('<div class="empty-state"><p>è¯·éæ©è¡ç¨</p></div>'),Cd=D('<button><span class="day-label svelte-disb9k"> </span> <span class="date-label svelte-disb9k"> </span></button>'),Ad=D('<div class="empty-state">å°ç¡éç¨è²»ç¨è¨é</div>'),Od=D('<div class="general-expense-name svelte-disb9k"> </div>'),Id=D('<div class="general-expense-item svelte-disb9k"><div class="general-expense-content svelte-disb9k"><!> <div class="general-expense-cat svelte-disb9k"> </div></div> <div class="general-expense-amount svelte-disb9k"> </div> <div class="general-expense-actions svelte-disb9k"><button class="icon-btn svelte-disb9k"><!></button> <button class="icon-btn danger svelte-disb9k"><!></button></div></div>'),$d=D('<div class="view-card default-cursor svelte-disb9k"><div class="card-header svelte-disb9k"><span class="act-name svelte-disb9k">è²»ç¨æ¸å®</span> <div class="card-actions svelte-disb9k"><span class="cost-tag actual svelte-disb9k"> </span></div></div> <div class="general-expense-list svelte-disb9k"></div></div>'),Dd=D('<div class="day-header-info svelte-disb9k"><span class="today-label svelte-disb9k">è¡ç¨éç¨è²»ç¨</span> <span class="date-display svelte-disb9k">æ©ç¥¨ãä¿éªãç°½è­...</span></div> <div class="day-content svelte-disb9k"><div class="actions-bar svelte-disb9k"><button class="add-act-btn svelte-disb9k"><!> <span> </span></button></div> <div class="timeline-list svelte-disb9k"><!></div></div>',1),Nd=D('<div class="empty-state"> </div>'),Zd=D('<span class="time-label start svelte-disb9k">start</span>'),Bd=D('<span class="time-label end svelte-disb9k">end</span>'),qd=D('<div class="distance-pill svelte-disb9k"> </div>'),Rd=D('<div class="line-container svelte-disb9k"><div class="line"></div> <!></div>'),jd=D('<p class="act-notes svelte-disb9k"> </p>'),Fd=D('<span class="actual svelte-disb9k"> </span>'),Hd=D('<span class="est svelte-disb9k"> </span>'),Wd=D('<div class="cost-tag svelte-disb9k"><!></div>'),Ud=D('<div class="timeline-item svelte-disb9k" draggable="true" role="listitem"><div class="time-col svelte-disb9k"><!> <!></div> <div class="visual-col svelte-disb9k"><div class="dot-container svelte-disb9k"><div class="dot svelte-disb9k"><div class="inner-dot svelte-disb9k"></div></div></div> <!></div> <div class="content-col svelte-disb9k"><div class="view-card svelte-disb9k" role="button" tabindex="0"><div class="card-header svelte-disb9k"><span class="act-name svelte-disb9k"> </span> <div class="card-actions svelte-disb9k"><!> <button class="icon-btn expense-btn svelte-disb9k"><!></button> <button class="icon-btn svelte-disb9k"><!></button></div></div> <!> <!></div></div></div>'),Vd=D('<div class="day-header-info svelte-disb9k"><span class="today-label svelte-disb9k"> </span> <span class="date-display svelte-disb9k"> </span> <button class="map-toggle-btn"><!> <span> </span></button></div> <div class="day-content svelte-disb9k"><div class="actions-bar svelte-disb9k"><button class="add-act-btn svelte-disb9k"><!> <span> </span></button></div> <div class="timeline-list svelte-disb9k"><!> <!></div></div>',1),Gd=D('<div class="days-nav svelte-disb9k"><button><span class="day-label svelte-disb9k" style="font-size: 0.8rem; white-space: nowrap;">éç¨</span> <span class="date-label svelte-disb9k">è¡å/å¾</span></button> <!></div> <!>',1),Yd=D('<div class="field search-field svelte-disb9k"><label for="location-search" class="svelte-disb9k"> </label> <div id="location-search"><!></div></div>'),Jd=D('<span class="expense-item-name svelte-disb9k"> </span>'),Kd=D('<div class="expense-item svelte-disb9k"><div class="expense-item-content svelte-disb9k"><!> <span class="expense-item-category svelte-disb9k"> </span> <span class="expense-item-amount svelte-disb9k"> </span></div> <button class="icon-btn danger svelte-disb9k"><!></button></div>'),Xd=D('<fieldset class="svelte-disb9k"><legend class="svelte-disb9k"> </legend> <div class="expense-list svelte-disb9k"></div> <div class="total-actual-cost svelte-disb9k"><strong> </strong> <span> </span></div></fieldset>'),Qd=D('<div class="edit-view svelte-disb9k"><div class="edit-header-bar svelte-disb9k"><button class="back-link svelte-disb9k"> </button> <h3 class="svelte-disb9k"> </h3></div> <div class="edit-form-content svelte-disb9k"><!> <div class="field svelte-disb9k"><label for="edit-name" class="svelte-disb9k"> </label> <input id="edit-name" type="text" class="svelte-disb9k"/></div> <div class="field svelte-disb9k"><label for="edit-notes" class="svelte-disb9k"> </label> <textarea id="edit-notes" rows="5" class="svelte-disb9k"></textarea></div> <!> <div class="edit-footer svelte-disb9k"><button class="icon-btn danger delete-btn svelte-disb9k"><!> <span> </span></button> <div class="save-actions svelte-disb9k"><button class="secondary svelte-disb9k"> </button> <button class="primary svelte-disb9k"> </button></div></div></div></div>'),th=D('<div class="map-panel svelte-disb9k"><!></div>'),eh=D('<div class="trip-details"><header class="trip-header svelte-disb9k"><div class="title-with-actions svelte-disb9k"><h2 class="svelte-disb9k"> </h2> <button class="icon-btn export-btn svelte-disb9k"><!></button></div></header> <div class="content-split svelte-disb9k"><div class="itinerary-panel svelte-disb9k"><!></div> <!></div></div>'),ih=D('<div class="context-menu svelte-disb9k"><button class="svelte-disb9k"><!> <span> </span></button> <button class="svelte-disb9k"><!> <span> </span></button></div>'),nh=D('<button class="name-tag svelte-disb9k" type="button"> </button>'),rh=D('<div class="name-tags svelte-disb9k"></div>'),sh=D("<option> </option>"),ah=D('<button type="button"><!> <span> </span></button>'),oh=D('<div class="expense-form-header svelte-disb9k"><h3 class="svelte-disb9k"> </h3></div> <div class="field svelte-disb9k"><label for="expense-name" class="svelte-disb9k"> </label> <input id="expense-name" type="text" class="svelte-disb9k"/> <!></div> <div class="form-row svelte-disb9k"><div class="field amount-field svelte-disb9k"><label for="expense-amount" class="svelte-disb9k"> </label> <div class="input-with-icon svelte-disb9k"><span class="currency-symbol svelte-disb9k"> </span> <input id="expense-amount" type="number" placeholder="0.00" class="svelte-disb9k"/></div></div> <div class="field currency-field svelte-disb9k"><label for="expense-currency" class="svelte-disb9k"> </label> <select id="expense-currency" class="svelte-disb9k"></select></div></div> <div class="field category-field svelte-disb9k"><span style="font-size: 0.875rem; font-weight: 600; color: #71717a; display: block; margin-bottom: 0.5rem;"> </span> <div class="category-options svelte-disb9k"></div></div> <div class="expense-form-actions svelte-disb9k"><button class="secondary svelte-disb9k"> </button> <button class="primary svelte-disb9k"> </button></div>',1),lh=D('<p class="empty-list svelte-disb9k"> </p>'),ch=D('<div class="expense-icon svelte-disb9k"><!></div>'),uh=D('<span class="expense-name svelte-disb9k"> </span> <div class="expense-meta svelte-disb9k"><span class="expense-cat-badge svelte-disb9k"> </span> <span class="expense-date svelte-disb9k"> </span></div>',1),dh=D('<span class="expense-name svelte-disb9k"> </span> <span class="expense-date svelte-disb9k"> </span>',1),hh=D('<div class="expense-item-modal svelte-disb9k"><div class="expense-details svelte-disb9k"><!> <div class="expense-info svelte-disb9k"><!></div></div> <div class="expense-right svelte-disb9k"><div class="expense-amt svelte-disb9k"> </div> <div class="expense-actions svelte-disb9k"><button class="icon-btn svelte-disb9k"><!></button> <button class="icon-btn danger svelte-disb9k"><!></button></div></div></div>'),fh=D('<div class="modal-header svelte-disb9k"><h3 class="svelte-disb9k"> </h3> <button class="close-btn svelte-disb9k"><!></button></div> <div class="expense-list-modal svelte-disb9k"><!> <!></div> <div class="modal-actions svelte-disb9k"><button class="primary svelte-disb9k"> </button></div>',1),vh=D('<div class="modal-overlay svelte-disb9k" role="dialog" tabindex="-1"><div class="modal svelte-disb9k" role="presentation"><!></div></div>'),_h=D('<div class="itinerary-view svelte-disb9k"><!> <!> <!></div>');function ph(n,r){Fi(r,!0);let s=St(0),o=oe(()=>r.tripId?Re.getTrip(r.tripId):null),u=oe(()=>c(o)?c(o).days[c(s)]:null),h=St(ui([51.505,-.09])),d=oe(()=>c(u)?c(u).activities:[]),_=St(ui(typeof window<"u"&&window.innerWidth>768));Do(()=>{if(typeof window>"u")return;const A=()=>{M(_,window.innerWidth>768)};return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)});function p(){if(!c(o))return;const A=zd(c(o)),V=new Blob([A],{type:"text/html"}),Q=URL.createObjectURL(V),it=document.createElement("a");it.href=Q,it.download=`${c(o).destination.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_itinerary.html`,document.body.appendChild(it),it.click(),document.body.removeChild(it),URL.revokeObjectURL(Q)}let y=St(null),x=St(!1),b=St(ui({visible:!1,x:0,y:0,activity:null})),P=St(null),S=St(!1),N=St(null),O=St(ui({name:"",amount:0,category:"other",currency:"USD"}));function C(A,V){A.preventDefault(),A.stopPropagation(),dt(V);let Q=A.clientX,it=A.clientY;const $t=160;typeof window<"u"&&Q+$t>window.innerWidth&&(Q=window.innerWidth-$t-10),M(b,{visible:!0,x:Q,y:it,activity:V},!0);const Xt=()=>{c(b).visible=!1,window.removeEventListener("click",Xt)};setTimeout(()=>window.addEventListener("click",Xt),0)}function Z(A){M(P,A,!0),M(S,!1),M(N,null)}function ot(){M(P,null),M(S,!0),F()}function j(A){if(!c(b).activity)return;const V=c(b).activity;A==="edit"?(M(y,JSON.parse(JSON.stringify(V)),!0),M(x,!1)):A==="google"&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(V.address||V.name)}`,"_blank"),c(b).visible=!1}function R(){M(x,!0),M(y,{id:ir(),name:"",address:"",lat:0,lng:0,estimatedCost:0,expenses:[],category:"other",transportType:"walk",notes:"",completed:!1},!0)}function K(A){c(y)&&(c(y).name=A.name,c(y).address=A.full_name,c(y).lat=A.lat,c(y).lng=A.lng,M(h,[A.lat,A.lng],!0))}function Y(){if(!c(y)||!c(u)||!r.tripId)return;console.log("Saving activity:",c(y));const A=JSON.parse(JSON.stringify(c(y)));if(c(x)){if(!A.name)return;Re.addActivity(r.tripId,c(s),A)}else Re.updateActivity(r.tripId,c(s),A);M(y,null),M(x,!1)}function J(A){M(N,A,!0),M(O,{name:A.name||"",amount:A.amount,category:A.category,currency:A.currency||c(o)?.currency||"USD"},!0)}function F(){M(N,"new");const A=Pt[c(O).category]||k.t(`cat.${c(O).category}`);M(O,{name:A,amount:0,category:"other",currency:c(o)?.currency||"USD"},!0)}function st(A){c(O).category=A;const V=k.t(`cat.${A}`),Q=k.t(`cat.${Object.keys(et).find(it=>Pt[it]===c(O).name)||"other"}`);(c(O).name===Q||c(O).name==="")&&(c(O).name=V)}function lt(A){if(!c(o))return[];const V=new Set;for(let Q=c(o).days.length-1;Q>=0;Q--){const it=c(o).days[Q];for(let $t=it.activities.length-1;$t>=0;$t--){const Xt=it.activities[$t];for(let pt=Xt.expenses.length-1;pt>=0;pt--){const Yt=Xt.expenses[pt];if(Yt.category===A&&Yt.name&&(V.add(Yt.name),V.size>=3))return Array.from(V)}}}if(c(o).generalExpenses)for(let Q=c(o).generalExpenses.length-1;Q>=0;Q--){const it=c(o).generalExpenses[Q];if(it.category===A&&it.name&&(V.add(it.name),V.size>=3))return Array.from(V)}return Array.from(V)}const Pt={transport:k.t("cat.transport"),food:k.t("cat.food"),stay:k.t("cat.stay"),shopping:k.t("cat.shopping"),medical:k.t("cat.medical"),other:k.t("cat.other")};function Ot(){if(!c(P)&&!c(S)||!c(o)||c(O).amount<=0)return;const A={id:c(N)==="new"?ir():c(N).id,name:c(O).name||void 0,amount:c(O).amount,category:c(O).category,date:new Date().toISOString().split("T")[0],currency:c(O).currency};c(S)?c(N)==="new"?Re.addGeneralExpense(c(o).id,A):Re.updateGeneralExpense(c(o).id,A):c(P)&&(c(N)==="new"?Re.addExpense(c(o).id,c(s),c(P).id,A):Re.updateExpense(c(o).id,c(s),c(P).id,A)),M(N,null),c(S)&&M(S,!1)}function _e(A){c(o)&&(c(S)?Re.removeGeneralExpense(c(o).id,A):c(P)&&Re.removeExpense(c(o).id,c(s),c(P).id,A))}function ne(A){if(!A||A.length===0)return"";const V={};return A.forEach(Q=>{const it=Q.currency||c(o)?.currency||"USD";V[it]=(V[it]||0)+Q.amount}),Object.entries(V).map(([Q,it])=>`${Ei[Q]||"$"}${it}`).join(", ")}ui({destination:"",startDate:"",endDate:"",currency:"TWD"});function Wt(A){r.tripId&&Re.removeActivity(r.tripId,c(s),A)}function dt(A){M(h,[A.lat,A.lng],!0)}let H=null;function B(A,V){H=V,A.dataTransfer&&(A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",V.toString()))}function Tt(A,V){if(H===null||!c(u)||!r.tripId)return;const Q=H,it=V;if(Q===it)return;const $t=[...c(u).activities],[Xt]=$t.splice(Q,1);$t.splice(it,0,Xt),c(u).activities=$t,H=null}const q={transport:ll,food:_l,stay:hl,shopping:vl,medical:dl,other:fl},et={transport:"#f97316",food:"#ef4444",stay:"#8b5cf6",shopping:"#ec4899",medical:"#e91e63",other:"#64748b"};var mt=_h(),ft=v(mt);{var ct=A=>{var V=Md();E(A,V)},gt=A=>{var V=eh(),Q=v(V),it=v(Q),$t=v(it),Xt=v($t),pt=g($t,2);pt.__click=p;var Yt=v(pt);ia(Yt,{size:20});var re=g(Q,2),pe=v(re),Me=v(pe);{var Le=Bt=>{var Qt=Gd(),Se=rt(Qt),vt=v(Se);vt.__click=()=>M(s,-1);let at;var ht=g(vt,2);Ie(ht,19,()=>c(o).days,bt=>bt.date,(bt,kt,Ht)=>{var Lt=Cd();Lt.__click=()=>M(s,c(Ht),!0);let te;var Vt=v(Lt),Jt=v(Vt),ze=g(Vt,2),xe=v(ze);G((Ae,qt)=>{te=wi(Lt,1,"svelte-disb9k",null,te,{active:c(s)===c(Ht)}),z(Jt,Ae),z(xe,qt)},[()=>k.day(c(Ht)+1),()=>c(kt).date.slice(5)]),E(bt,Lt)});var nt=g(Se,2);{var Dt=bt=>{var kt=Dd(),Ht=g(rt(kt),2),Lt=v(Ht),te=v(Lt);te.__click=ot;var Vt=v(te);Mr(Vt,{size:18});var Jt=g(Vt,2),ze=v(Jt),xe=g(Lt,2),Ae=v(xe);{var qt=ut=>{var he=Ad();E(ut,he)},ge=ut=>{var he=$d(),wt=v(he),Rt=g(v(wt),2),se=v(Rt),Et=v(se),zt=g(wt,2);Ie(zt,21,()=>c(o).generalExpenses,Gt=>Gt.id,(Gt,X)=>{const I=oe(()=>et[c(X).category]);var xt=Id(),ee=v(xt),ue=v(ee);{var fe=hi=>{var ei=Od(),Di=v(ei);G(()=>{ii(ei,`color: ${c(I)??""}`),z(Di,c(X).name)}),E(hi,ei)};tt(ue,hi=>{c(X).name&&hi(fe)})}var ae=g(ue,2),Ne=v(ae),Fe=g(ee,2),di=v(Fe),si=g(Fe,2),qe=v(si);qe.__click=()=>{ot(),J(c(X))};var We=v(qe);Kr(We,{size:16});var ai=g(qe,2);ai.__click=()=>{M(S,!0),_e(c(X).id)};var mi=v(ai);zn(mi,{size:16}),G(hi=>{ii(xt,`border-left: 3px solid ${c(I)??""}`),z(Ne,hi),z(di,`${Ei[c(X).currency||c(o)?.currency||"USD"]??""}${c(X).amount??""}`)},[()=>k.t(`cat.${c(X).category}`)]),E(Gt,xt)}),G(Gt=>z(Et,Gt),[()=>ne(c(o).generalExpenses)]),E(ut,he)};tt(Ae,ut=>{!c(o).generalExpenses||c(o).generalExpenses.length===0?ut(qt):ut(ge,!1)})}G(ut=>z(ze,ut),[()=>k.t("modal.addNewExpense")]),E(bt,kt)},yt=bt=>{var kt=Vd(),Ht=rt(kt),Lt=v(Ht),te=v(Lt),Vt=g(Lt,2),Jt=v(Vt),ze=g(Vt,2);ze.__click=()=>M(_,!c(_));var xe=v(ze);Jn(xe,{size:18});var Ae=g(xe,2),qt=v(Ae),ge=g(Ht,2),ut=v(ge),he=v(ut);he.__click=R;var wt=v(he);Mr(wt,{size:18});var Rt=g(wt,2),se=v(Rt),Et=g(ut,2),zt=v(Et);{var Gt=xt=>{var ee=Nd(),ue=v(ee);G(fe=>z(ue,fe),[()=>k.t("trip.emptyActivities")]),E(xt,ee)};tt(zt,xt=>{c(u)&&c(u).activities.length===0&&xt(Gt)})}var X=g(zt,2);{var I=xt=>{var ee=Nt(),ue=rt(ee);Ie(ue,19,()=>c(u).activities,fe=>fe.id,(fe,ae,Ne)=>{const Fe=oe(()=>c(u).activities[c(Ne)+1]),di=oe(()=>c(Fe)?Sd(c(ae).lat,c(ae).lng,c(Fe).lat,c(Fe).lng):null),si=oe(()=>c(ae).expenses.length>0);var qe=Ud(),We=v(qe),ai=v(We);{var mi=Ct=>{var Oe=Zd();E(Ct,Oe)};tt(ai,Ct=>{c(Ne)===0&&Ct(mi)})}var hi=g(ai,2);{var ei=Ct=>{var Oe=Bd();E(Ct,Oe)};tt(hi,Ct=>{c(Ne)===c(u).activities.length-1&&Ct(ei)})}var Di=g(We,2),Wi=g(v(Di),2);{var ln=Ct=>{var Oe=Rd(),Pn=g(v(Oe),2);{var dn=gi=>{var ye=qd(),oi=v(ye);G(()=>z(oi,c(di))),E(gi,ye)};tt(Pn,gi=>{c(di)&&gi(dn)})}E(Ct,Oe)};tt(Wi,Ct=>{c(Ne)<c(u).activities.length-1&&Ct(ln)})}var xn=g(Di,2),Kt=v(xn);Kt.__contextmenu=Ct=>C(Ct,c(ae)),Kt.__click=()=>dt(c(ae)),Kt.__keydown=Ct=>{Ct.key==="Enter"&&dt(c(ae))};var $e=v(Kt),Be=v($e),Ge=v(Be),Ye=g(Be,2),Je=v(Ye);{var jt=Ct=>{Qu(Ct,{size:16,class:"check-icon"})};tt(Je,Ct=>{c(ae).completed&&Ct(jt)})}var Pe=g(Je,2);Pe.__click=Ct=>{Ct.stopPropagation(),Z(c(ae))};var cn=v(Pe);ea(cn,{size:16});var Ui=g(Pe,2);Ui.__click=Ct=>C(Ct,c(ae));var un=v(Ui);nd(un,{size:16});var Bn=g($e,2);{var Mt=Ct=>{var Oe=jd(),Pn=v(Oe);G(()=>z(Pn,c(ae).notes)),E(Ct,Oe)};tt(Bn,Ct=>{c(ae).notes&&Ct(Mt)})}var Ze=g(Bn,2);{var sr=Ct=>{var Oe=Wd(),Pn=v(Oe);{var dn=ye=>{var oi=Fd(),Vi=v(oi);G(kn=>z(Vi,kn),[()=>ne(c(ae).expenses)]),E(ye,oi)},gi=ye=>{var oi=Hd(),Vi=v(oi);G(()=>z(Vi,`Est. ${Ei[c(o)?.currency||"USD"]??""}${c(ae).estimatedCost??""}`)),E(ye,oi)};tt(Pn,ye=>{c(si)?ye(dn):ye(gi,!1)})}E(Ct,Oe)};tt(Ze,Ct=>{(c(ae).estimatedCost>0||c(si))&&Ct(sr)})}G(()=>z(Ge,c(ae).name)),As("dragstart",qe,Ct=>B(Ct,c(Ne))),As("dragover",qe,Ct=>Ct.preventDefault()),As("drop",qe,Ct=>Tt(Ct,c(Ne))),E(fe,qe)}),E(xt,ee)};tt(X,xt=>{c(u)&&xt(I)})}G((xt,ee,ue,fe)=>{z(te,xt),z(Jt,c(u)?.date),De(ze,"title",ee),z(qt,ue),z(se,fe)},[()=>k.day(c(s)+1).toUpperCase(),()=>c(_)?k.t("trip.hideMap"):k.t("trip.showMap"),()=>c(_)?k.t("trip.hideMap"):k.t("trip.showMap"),()=>k.t("trip.addActivity")]),E(bt,kt)};tt(nt,bt=>{c(s)===-1?bt(Dt):bt(yt,!1)})}G(()=>at=wi(vt,1,"svelte-disb9k",null,at,{active:c(s)===-1})),E(Bt,Qt)},Ut=Bt=>{var Qt=Qd(),Se=v(Qt),vt=v(Se);vt.__click=()=>M(y,null);var at=v(vt),ht=g(vt,2),nt=v(ht),Dt=g(Se,2),yt=v(Dt);{var bt=I=>{var xt=Yd(),ee=v(xt),ue=v(ee),fe=g(ee,2),ae=v(fe);Ed(ae,{onselect:K}),G(Ne=>z(ue,Ne),[()=>k.t("trip.searchLocation")]),E(I,xt)};tt(yt,I=>{c(x)&&I(bt)})}var kt=g(yt,2),Ht=v(kt),Lt=v(Ht),te=g(Ht,2),Vt=g(kt,2),Jt=v(Vt),ze=v(Jt),xe=g(Jt,2),Ae=g(Vt,2);{var qt=I=>{var xt=Xd(),ee=v(xt),ue=v(ee),fe=g(ee,2);Ie(fe,23,()=>c(y).expenses,qe=>qe.id,(qe,We)=>{const ai=oe(()=>et[c(We).category]);var mi=Kd(),hi=v(mi),ei=v(hi);{var Di=Ge=>{var Ye=Jd(),Je=v(Ye);G(()=>{ii(Ye,`color: ${c(ai)??""}`),z(Je,c(We).name)}),E(Ge,Ye)};tt(ei,Ge=>{c(We).name&&Ge(Di)})}var Wi=g(ei,2),ln=v(Wi),xn=g(Wi,2),Kt=v(xn),$e=g(hi,2);$e.__click=()=>c(y)&&Re.removeExpense(c(o).id,c(s),c(y).id,c(We).id);var Be=v($e);zn(Be,{size:16}),G(Ge=>{ii(mi,`border-left: 3px solid ${c(ai)??""}`),ii(Wi,`color: ${c(ai)??""}`),z(ln,Ge),z(Kt,`${Ei[c(We).currency||c(o)?.currency||"USD"]??""}${c(We).amount??""}`)},[()=>k.t(`cat.${c(We).category}`)]),E(qe,mi)});var ae=g(fe,2),Ne=v(ae),Fe=v(Ne),di=g(Ne,2),si=v(di);G((qe,We,ai)=>{z(ue,qe),z(Fe,We),z(si,ai)},[()=>k.t("trip.expenses"),()=>k.t("trip.totalActual"),()=>ne(c(y).expenses)]),E(I,xt)};tt(Ae,I=>{c(y)&&c(y).expenses.length>0&&I(qt)})}var ge=g(Ae,2),ut=v(ge);ut.__click=()=>{const I=c(u)?.activities.findIndex(xt=>xt.id===c(y).id);I!==void 0&&I!==-1&&Wt(I),M(y,null)};var he=v(ut);zn(he,{size:20});var wt=g(he,2),Rt=v(wt),se=g(ut,2),Et=v(se);Et.__click=()=>M(y,null);var zt=v(Et),Gt=g(Et,2);Gt.__click=Y;var X=v(Gt);G((I,xt,ee,ue,fe,ae,Ne)=>{z(at,`â ${I??""}`),z(nt,xt),z(Lt,ee),z(ze,ue),z(Rt,fe),z(zt,ae),z(X,Ne)},[()=>k.t("trip.backToList"),()=>c(x)?k.t("trip.newActivity"):k.t("trip.editActivity"),()=>k.t("trip.name"),()=>k.t("trip.notes"),()=>k.t("trip.deleteActivity"),()=>k.t("trip.cancel"),()=>k.t("trip.saveChanges")]),Ii(te,()=>c(y).name,I=>c(y).name=I),Ii(xe,()=>c(y).notes,I=>c(y).notes=I),E(Bt,Qt)};tt(Me,Bt=>{c(y)?Bt(Ut,!1):Bt(Le)})}var Ee=g(pe,2);{var me=Bt=>{var Qt=th(),Se=v(Qt);pl(Se,{get activities(){return c(d)},get center(){return c(h)}}),E(Bt,Qt)};tt(Ee,Bt=>{c(_)&&Bt(me)})}G(Bt=>{z(Xt,c(o).destination),De(pt,"title",Bt)},[()=>k.t("journal.export")]),E(A,V)};tt(ft,A=>{c(o)?A(gt,!1):A(ct)})}var W=g(ft,2);{var It=A=>{var V=ih(),Q=v(V);Q.__click=()=>j("edit");var it=v(Q);Kr(it,{size:16});var $t=g(it,2),Xt=v($t),pt=g(Q,2);pt.__click=()=>j("google");var Yt=v(pt);Jn(Yt,{size:16});var re=g(Yt,2),pe=v(re);G((Me,Le)=>{ii(V,`top: ${c(b).y??""}px; left: ${c(b).x??""}px;`),z(Xt,Me),z(pe,Le)},[()=>k.t("trip.editPlan"),()=>k.t("trip.googleMaps")]),E(A,V)};tt(W,A=>{c(b).visible&&A(It)})}var we=g(W,2);{var Zt=A=>{var V=vh();V.__click=()=>{M(P,null),M(S,!1)},V.__keydown=pt=>pt.key==="Escape"&&(M(P,null),M(S,!1));var Q=v(V);Q.__click=pt=>pt.stopPropagation(),Q.__keydown=pt=>pt.stopPropagation();var it=v(Q);{var $t=pt=>{var Yt=oh(),re=rt(Yt),pe=v(re),Me=v(pe),Le=g(re,2),Ut=v(Le),Ee=v(Ut),me=g(Ut,2),Bt=g(me,2);{var Qt=wt=>{var Rt=rh();Ie(Rt,20,()=>lt(c(O).category),se=>se,(se,Et)=>{var zt=nh();zt.__click=()=>c(O).name=Et;var Gt=v(zt);G(()=>z(Gt,Et)),E(se,zt)}),E(wt,Rt)};tt(Bt,wt=>{lt(c(O).category).length>0&&wt(Qt)})}var Se=g(Le,2),vt=v(Se),at=v(vt),ht=v(at),nt=g(at,2),Dt=v(nt),yt=v(Dt),bt=g(Dt,2),kt=g(vt,2),Ht=v(kt),Lt=v(Ht),te=g(Ht,2);Ie(te,20,()=>cd,wt=>wt,(wt,Rt)=>{var se=sh(),Et=v(se),zt={};G(()=>{z(Et,Rt),zt!==(zt=Rt)&&(se.value=(se.__value=Rt)??"")}),E(wt,se)});var Vt=g(Se,2),Jt=v(Vt),ze=v(Jt),xe=g(Jt,2);Ie(xe,21,()=>Object.entries(et),([wt,Rt])=>wt,(wt,Rt)=>{var se=oe(()=>br(c(Rt),2));let Et=()=>c(se)[0],zt=()=>c(se)[1];const Gt=oe(()=>q[Et()]);var X=ah();X.__click=()=>st(Et());var I=v(X);rn(I,()=>c(Gt),(ue,fe)=>{fe(ue,{size:18})});var xt=g(I,2),ee=v(xt);G((ue,fe)=>{wi(X,1,`category-btn ${c(O).category===Et()?"active":""}`,"svelte-disb9k"),ii(X,c(O).category===Et()?`background-color: ${zt()}20; border-color: ${zt()}; color: ${zt()};`:""),De(X,"title",ue),z(ee,fe)},[()=>k.t(`cat.${Et()}`),()=>k.t(`cat.${Et()}`)]),E(wt,X)});var Ae=g(Vt,2),qt=v(Ae);qt.__click=()=>{M(N,null),c(S)&&M(S,!1)};var ge=v(qt),ut=g(qt,2);ut.__click=Ot;var he=v(ut);G((wt,Rt,se,Et,zt,Gt,X,I)=>{z(Me,wt),z(Ee,Rt),De(me,"placeholder",se),z(ht,Et),z(yt,Ei[c(O).currency]),z(Lt,zt),z(ze,Gt),z(ge,X),ut.disabled=c(O).amount<=0,z(he,I)},[()=>c(N)==="new"?k.t("modal.addExpense"):k.t("modal.editExpense"),()=>k.t("trip.name"),()=>k.t("trip.name"),()=>k.t("modal.amount"),()=>k.t("trip.currency"),()=>k.t("finance.breakdown"),()=>k.t("trip.cancel"),()=>k.t("modal.save")]),Ii(me,()=>c(O).name,wt=>c(O).name=wt),Ii(bt,()=>c(O).amount,wt=>c(O).amount=wt),nl(te,()=>c(O).currency,wt=>c(O).currency=wt),E(pt,Yt)},Xt=pt=>{var Yt=fh(),re=rt(Yt),pe=v(re),Me=v(pe),Le=g(pe,2);Le.__click=()=>M(P,null);var Ut=v(Le);Tr(Ut,{size:20});var Ee=g(re,2),me=v(Ee);{var Bt=ht=>{var nt=lh(),Dt=v(nt);G(yt=>z(Dt,yt),[()=>k.t("modal.noExpenses")]),E(ht,nt)};tt(me,ht=>{c(P)?.expenses.length===0&&ht(Bt)})}var Qt=g(me,2);Ie(Qt,17,()=>c(P)?.expenses,ht=>ht.id,(ht,nt)=>{const Dt=oe(()=>q[c(nt).category]),yt=oe(()=>et[c(nt).category]),bt=oe(()=>k.t(`cat.${c(nt).category}`));var kt=hh(),Ht=v(kt),Lt=v(Ht);{var te=Et=>{var zt=ch(),Gt=v(zt);rn(Gt,()=>c(Dt),(X,I)=>{I(X,{size:20})}),G(()=>ii(zt,`background-color: ${c(yt)??""}20; color: ${c(yt)??""}`)),E(Et,zt)};tt(Lt,Et=>{c(Dt)&&Et(te)})}var Vt=g(Lt,2),Jt=v(Vt);{var ze=Et=>{var zt=uh(),Gt=rt(zt),X=v(Gt),I=g(Gt,2),xt=v(I),ee=v(xt),ue=g(xt,2),fe=v(ue);G(()=>{ii(Gt,`color: ${c(yt)??""}`),z(X,c(nt).name),ii(xt,`background-color: ${c(yt)??""}15; color: ${c(yt)??""}`),z(ee,c(bt)),z(fe,c(nt).date)}),E(Et,zt)},xe=Et=>{var zt=dh(),Gt=rt(zt),X=v(Gt),I=g(Gt,2),xt=v(I);G(()=>{ii(Gt,`color: ${c(yt)??""}`),z(X,c(bt)),z(xt,c(nt).date)}),E(Et,zt)};tt(Jt,Et=>{c(nt).name&&c(nt).name!==c(bt)?Et(ze):Et(xe,!1)})}var Ae=g(Ht,2),qt=v(Ae),ge=v(qt),ut=g(qt,2),he=v(ut);he.__click=()=>J(c(nt));var wt=v(he);Kr(wt,{size:16});var Rt=g(he,2);Rt.__click=()=>_e(c(nt).id);var se=v(Rt);zn(se,{size:16}),G((Et,zt)=>{ii(kt,`border-left: 4px solid ${c(yt)??""}`),ii(qt,`color: ${c(yt)??""}`),z(ge,`${Ei[c(nt).currency||c(o)?.currency||"USD"]??""}${c(nt).amount??""}`),De(he,"aria-label",Et),De(Rt,"aria-label",zt)},[()=>k.t("modal.editExpense"),()=>k.t("trip.deleteActivity")]),E(ht,kt)});var Se=g(Ee,2),vt=v(Se);vt.__click=F;var at=v(vt);G((ht,nt)=>{z(Me,`${c(P)?.name??""} - ${ht??""}`),z(at,nt)},[()=>k.t("trip.expenses"),()=>k.t("modal.addNewExpense")]),E(pt,Yt)};tt(it,pt=>{c(N)?pt($t):pt(Xt,!1)})}E(A,V)};tt(we,A=>{(c(P)||c(S))&&A(Zt)})}E(n,mt),Hi()}Zn(["click","contextmenu","keydown"]);var mh=tl('<circle cx="0" cy="0" fill="transparent" stroke-width="40" transform="rotate(-90)"></circle>'),gh=D('<div class="pie-chart-container svelte-6s3h9y"><svg viewBox="-100 -100 200 200" class="svelte-6s3h9y"></svg> <div class="center-label svelte-6s3h9y"><span class="svelte-6s3h9y">Total</span> <strong class="svelte-6s3h9y"> </strong></div></div>');function yh(n,r){Fi(r,!0);let s=bi(r,"currencySymbol",3,"$");const o=80,u=2*Math.PI*o;let h=oe(()=>{const b=Object.values(r.data).reduce((S,N)=>S+N.actual,0);if(b===0)return[];let P=0;return Object.entries(r.data).map(([S,{actual:N}])=>{if(N===0)return null;const O=N/b,C=`${O*u} ${u}`,Z=-(P*u);return P+=O,{category:S,dasharray:C,offset:Z,color:r.colors[S]}}).filter(S=>S!==null)});var d=gh(),_=v(d);Ie(_,21,()=>c(h),Qe,(b,P)=>{var S=mh();De(S,"r",o),G(()=>{De(S,"stroke",c(P).color),De(S,"stroke-dasharray",c(P).dasharray),De(S,"stroke-dashoffset",c(P).offset)}),E(b,S)});var p=g(_,2),y=g(v(p),2),x=v(y);G(b=>z(x,`${s()??""}${b??""}`),[()=>Object.values(r.data).reduce((b,P)=>b+P.actual,0).toLocaleString()]),E(n,d),Hi()}var bh=D('<div class="empty-state"><p>è¯·éæ©è¡ç¨</p></div>'),wh=D('<span class="day-label svelte-5oriq5"> </span>'),xh=D('<span class="day-label svelte-5oriq5"> </span> <span class="date-label svelte-5oriq5"> </span>',1),Ph=D('<button><span class="day-num svelte-5oriq5"> </span> <span class="day-date svelte-5oriq5"> </span></button>'),kh=D('<div class="day-picker-dropdown svelte-5oriq5"><button><span class="day-num svelte-5oriq5"> </span></button> <!></div> <button class="backdrop svelte-5oriq5" aria-label="close day picker"></button>',1),Th=D('<div class="day-navigator svelte-5oriq5"><button class="nav-btn svelte-5oriq5"><!></button> <div class="current-day-display svelte-5oriq5"><button class="day-toggle svelte-5oriq5"><!></button> <!></div> <button class="nav-btn svelte-5oriq5"><!></button></div>'),Lh=D('<div class="curr-total svelte-5oriq5"> </div>'),Eh=D('<div class="curr-total svelte-5oriq5"> </div>'),Sh=D('<div class="breakdown-item svelte-5oriq5"><div class="cat-info svelte-5oriq5"><div class="cat-label-group svelte-5oriq5"><!> <span class="cat-label svelte-5oriq5"> </span></div> <span class="cat-values svelte-5oriq5"><span class="actual svelte-5oriq5"> </span></span></div> <div class="mini-track svelte-5oriq5"><div class="mini-fill svelte-5oriq5"></div></div></div>'),zh=D('<div class="breakdown-section card svelte-5oriq5"><h3 class="svelte-5oriq5"> </h3> <div class="breakdown-content svelte-5oriq5"><div class="chart-container svelte-5oriq5"><!></div> <div class="breakdown-list svelte-5oriq5"></div></div></div>'),Mh=D('<div class="expense-row svelte-5oriq5"><div class="exp-main svelte-5oriq5"><span class="exp-activity svelte-5oriq5"> </span> <div class="exp-cat svelte-5oriq5"><!> <span> </span></div></div> <div class="exp-amount svelte-5oriq5"><span class="amt svelte-5oriq5"> </span></div></div>'),Ch=D('<div class="date-group svelte-5oriq5"><div class="date-header svelte-5oriq5"> </div> <!></div>'),Ah=D('<div class="expense-details-section card svelte-5oriq5"><h3> </h3> <div class="expense-table svelte-5oriq5"></div></div>'),Oh=D("<!> <!>",1),Ih=D('<header class="svelte-5oriq5"><div class="header-top"><div class="header-title-row svelte-5oriq5"><h2 class="svelte-5oriq5"> </h2> <button class="export-btn svelte-5oriq5"><!></button></div></div> <div class="view-controls svelte-5oriq5"><div class="toggle-group svelte-5oriq5"><button> </button> <button> </button></div> <!></div></header> <div class="dashboard-grid svelte-5oriq5"><div class="stat-card svelte-5oriq5"><div class="label svelte-5oriq5"> </div> <div class="value-list svelte-5oriq5"><!></div></div></div> <!>',1),$h=D('<div class="finance-view svelte-5oriq5"><!></div>');function Dh(n,r){Fi(r,!0);let s=oe(()=>r.tripId?Re.getTrip(r.tripId):null),o=St("all"),u=St(0),h=St(!1),d=St(!1);yn(()=>{if(r.tripId)if(M(d,!1),c(s)){const j=new Date().toISOString().split("T")[0],R=c(s).days.findIndex(K=>K.date===j);R!==-1?(M(o,"daily"),M(u,R,!0)):(M(u,0),M(o,"all"))}else M(u,0)});function _(ot){M(u,ot,!0),M(h,!1),M(d,!1)}function p(){M(h,!0),M(d,!1)}function y(){if(!c(s)||!c(x))return;let j="\uFEFF";j+=`${k.t("csv.summary")}
`;const R=["transport","food","stay","shopping","medical","other"],K=[k.t("csv.headers.currency"),...R.map(lt=>k.t(`cat.${lt}`)),k.t("csv.headers.total")];j+=K.join(",")+`
`,Object.entries(c(x).actuals).forEach(([lt,Pt])=>{const Ot=[lt,...R.map(_e=>Pt.breakdown[_e]||0),Pt.total];j+=Ot.join(",")+`
`}),j+=`

`,j+=`${k.t("csv.details")}
`;const Y=[k.t("csv.headers.date"),k.t("csv.headers.day"),k.t("csv.headers.activity"),k.t("csv.headers.category"),k.t("csv.headers.currency"),k.t("csv.headers.amount"),k.t("csv.headers.notes")];j+=Y.join(",")+`
`,c(s).days.forEach((lt,Pt)=>{lt.activities.forEach(Ot=>{Ot.expenses.forEach(_e=>{const ne=[lt.date,k.day(Pt+1),`"${Ot.name.replace(/"/g,'""')}"`,k.t(`cat.${_e.category}`),_e.currency||c(s)?.currency||"USD",_e.amount,`"${(Ot.notes||"").replace(/"/g,'""')}"`];j+=ne.join(",")+`
`})})}),c(s).generalExpenses&&c(s).generalExpenses.forEach(lt=>{const Pt=[lt.date||"","General",`"${(lt.name||"").replace(/"/g,'""')}"`,k.t(`cat.${lt.category}`),lt.currency||c(s)?.currency||"USD",lt.amount,""];j+=Pt.join(",")+`
`});const J=new Blob([j],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(J),st=document.createElement("a");st.href=F,st.setAttribute("download",`${c(s).destination}_Expenses.csv`),document.body.appendChild(st),st.click(),document.body.removeChild(st)}let x=oe(()=>{if(!c(s))return null;const ot={},j=Y=>(ot[Y]||(ot[Y]={total:0,breakdown:{transport:0,food:0,stay:0,shopping:0,medical:0,other:0}}),ot[Y]),R={};c(s).days.forEach((Y,J)=>{c(o)==="daily"&&!c(h)&&J!==c(u)||c(o)==="daily"&&c(h)||Y.activities.forEach(F=>{F.expenses.forEach(st=>{const lt=st.currency||c(s)?.currency||"USD",Pt=j(lt);Pt.total+=st.amount,Pt.breakdown[st.category]!==void 0?Pt.breakdown[st.category]+=st.amount:Pt.breakdown.other+=st.amount,R[Y.date]||(R[Y.date]=[]),R[Y.date].push({...st,activityName:F.name,currency:lt})})})}),(c(o)==="all"||c(o)==="daily"&&c(h))&&c(s).generalExpenses&&c(s).generalExpenses.forEach(Y=>{const J=Y.currency||c(s)?.currency||"USD",F=j(J);F.total+=Y.amount,F.breakdown[Y.category]!==void 0?F.breakdown[Y.category]+=Y.amount:F.breakdown.other+=Y.amount;const st="General";R[st]||(R[st]=[]),R[st].push({...Y,activityName:Y.name||k.t("cat.other"),currency:J,isGeneral:!0})});const K=Object.entries(R).map(([Y,J])=>({date:Y,items:J.sort((F,st)=>st.amount-F.amount),isGeneral:Y==="General"})).sort((Y,J)=>Y.isGeneral&&!J.isGeneral?-1:!Y.isGeneral&&J.isGeneral?1:new Date(J.date).getTime()-new Date(Y.date).getTime());return{actuals:ot,groupedExpenses:K}});const b={transport:"#f97316",food:"#ef4444",stay:"#8b5cf6",shopping:"#ec4899",medical:"#e91e63",other:"#64748b"},P={transport:ll,food:_l,stay:hl,shopping:vl,medical:dl,other:fl};let S=oe(()=>({transport:k.t("cat.transport"),food:k.t("cat.food"),stay:k.t("cat.stay"),shopping:k.t("cat.shopping"),medical:k.t("cat.medical"),other:k.t("cat.other")}));var N=$h(),O=v(N);{var C=ot=>{var j=bh();E(ot,j)},Z=ot=>{var j=Ih(),R=rt(j),K=v(R),Y=v(K),J=v(Y),F=v(J),st=g(J,2);st.__click=y;var lt=v(st);ia(lt,{size:20});var Pt=g(K,2),Ot=v(Pt),_e=v(Ot);_e.__click=()=>{M(o,"all"),M(h,!1)};var ne=v(_e),Wt=g(_e,2);Wt.__click=()=>{M(o,"daily"),M(h,!1)};var dt=v(Wt),H=g(Ot,2);{var B=Zt=>{var A=Th(),V=v(A);V.__click=()=>{c(u)>0&&tr(u,-1)};var Q=v(V);cl(Q,{size:20});var it=g(V,2),$t=v(it);$t.__click=()=>M(d,!c(d));var Xt=v($t);{var pt=Ut=>{var Ee=wh(),me=v(Ee);G(Bt=>z(me,Bt),[()=>k.t("finance.general")]),E(Ut,Ee)},Yt=Ut=>{var Ee=xh(),me=rt(Ee),Bt=v(me),Qt=g(me,2),Se=v(Qt);G(vt=>{z(Bt,vt),z(Se,c(s).days[c(u)].date)},[()=>k.day(c(u)+1)]),E(Ut,Ee)};tt(Xt,Ut=>{c(h)?Ut(pt):Ut(Yt,!1)})}var re=g($t,2);{var pe=Ut=>{var Ee=kh(),me=rt(Ee),Bt=v(me);Bt.__click=()=>p();var Qt=v(Bt),Se=v(Qt),vt=g(Bt,2);Ie(vt,17,()=>c(s).days,Qe,(ht,nt,Dt)=>{var yt=Ph();yt.__click=()=>_(Dt);var bt=v(yt),kt=v(bt),Ht=g(bt,2),Lt=v(Ht);G(te=>{wi(yt,1,`day-option ${!c(h)&&Dt===c(u)?"selected":""}`,"svelte-5oriq5"),z(kt,te),z(Lt,c(nt).date)},[()=>k.day(Dt+1)]),E(ht,yt)});var at=g(me,2);at.__click=()=>M(d,!1),G(ht=>{wi(Bt,1,`day-option ${c(h)?"selected":""}`,"svelte-5oriq5"),z(Se,ht)},[()=>k.t("finance.general")]),E(Ut,Ee)};tt(re,Ut=>{c(d)&&Ut(pe)})}var Me=g(it,2);Me.__click=()=>{c(u)<c(s).days.length-1&&tr(u)};var Le=v(Me);ul(Le,{size:20}),G(()=>{V.disabled=c(u)===0||c(h),Me.disabled=c(u)===c(s).days.length-1||c(h)}),E(Zt,A)};tt(H,Zt=>{c(o)==="daily"&&Zt(B)})}var Tt=g(R,2),q=v(Tt),et=v(q),mt=v(et),ft=g(et,2),ct=v(ft);{var gt=Zt=>{var A=Nt(),V=rt(A);Ie(V,17,()=>Object.entries(c(x).actuals),Qe,(Q,it)=>{var $t=oe(()=>br(c(it),2));let Xt=()=>c($t)[0],pt=()=>c($t)[1];var Yt=Lh(),re=v(Yt);G(pe=>z(re,`${(Ei[Xt()]||Xt())??""} ${pe??""}`),[()=>pt().total.toLocaleString()]),E(Q,Yt)}),E(Zt,A)},W=Zt=>{var A=Eh(),V=v(A);G(()=>z(V,`${Ei[c(s).currency]??""}0`)),E(Zt,A)};tt(ct,Zt=>{c(x)&&Object.keys(c(x).actuals).length>0?Zt(gt):Zt(W,!1)})}var It=g(Tt,2);{var we=Zt=>{var A=Oh(),V=rt(A);Ie(V,17,()=>Object.entries(c(x).actuals),Qe,($t,Xt)=>{var pt=oe(()=>br(c(Xt),2));let Yt=()=>c(pt)[0],re=()=>c(pt)[1];var pe=Nt(),Me=rt(pe);{var Le=Ut=>{const Ee=oe(()=>Object.entries(re().breakdown).reduce((nt,[Dt,yt])=>(nt[Dt]={actual:yt,estimated:0},nt),{}));var me=zh(),Bt=v(me),Qt=v(Bt),Se=g(Bt,2),vt=v(Se),at=v(vt);{let nt=oe(()=>Ei[Yt()]||"$");yh(at,{get data(){return c(Ee)},get colors(){return b},get currencySymbol(){return c(nt)}})}var ht=g(vt,2);Ie(ht,21,()=>Object.entries(re().breakdown),Qe,(nt,Dt)=>{var yt=oe(()=>br(c(Dt),2));let bt=()=>c(yt)[0],kt=()=>c(yt)[1];const Ht=oe(()=>P[bt()]);var Lt=Sh(),te=v(Lt),Vt=v(te),Jt=v(Vt);rn(Jt,()=>c(Ht),(wt,Rt)=>{Rt(wt,{size:18,get style(){return`color: ${b[bt()]??""}`}})});var ze=g(Jt,2),xe=v(ze),Ae=g(Vt,2),qt=v(Ae),ge=v(qt),ut=g(te,2),he=v(ut);G(wt=>{z(xe,c(S)[bt()]),z(ge,`${(Ei[Yt()]||"$")??""}${wt??""}`),ii(he,`
                                                    width: ${re().total?kt()/re().total*100:0}%;
                                                    background-color: ${b[bt()]??""};
                                                `)},[()=>kt().toLocaleString()]),E(nt,Lt)}),G(nt=>z(Qt,`${nt??""} (${Yt()??""})`),[()=>k.t("finance.breakdown")]),E(Ut,me)};tt(Me,Ut=>{re().total>0&&Ut(Le)})}E($t,pe)});var Q=g(V,2);{var it=$t=>{var Xt=Ah(),pt=v(Xt),Yt=v(pt),re=g(pt,2);Ie(re,21,()=>c(x).groupedExpenses,Qe,(pe,Me)=>{var Le=Ch(),Ut=v(Le),Ee=v(Ut),me=g(Ut,2);Ie(me,17,()=>c(Me).items,Qe,(Bt,Qt)=>{const Se=oe(()=>P[c(Qt).category]);var vt=Mh(),at=v(vt),ht=v(at),nt=v(ht),Dt=g(ht,2),yt=v(Dt);rn(yt,()=>c(Se),(Vt,Jt)=>{Jt(Vt,{size:14})});var bt=g(yt,2),kt=v(bt),Ht=g(at,2),Lt=v(Ht),te=v(Lt);G(Vt=>{z(nt,c(Qt).activityName),ii(Dt,`background-color: ${b[c(Qt).category]??""}15; color: ${b[c(Qt).category]??""}`),z(kt,c(S)[c(Qt).category]),z(te,`${Ei[c(Qt).currency]??""}${Vt??""}`)},[()=>c(Qt).amount.toLocaleString()]),E(Bt,vt)}),G(Bt=>z(Ee,Bt),[()=>c(Me).isGeneral?k.t("finance.general"):c(Me).date]),E(pe,Le)}),G(pe=>z(Yt,pe),[()=>k.t("finance.detailed")]),E($t,Xt)};tt(Q,$t=>{c(x).groupedExpenses.length>0&&$t(it)})}E(Zt,A)};tt(It,Zt=>{c(x)&&Zt(we)})}G((Zt,A,V,Q,it)=>{z(F,`${c(s).destination??""} ${Zt??""}`),De(st,"title",A),wi(_e,1,`toggle-btn ${c(o)==="all"?"active":""}`,"svelte-5oriq5"),z(ne,V),wi(Wt,1,`toggle-btn ${c(o)==="daily"?"active":""}`,"svelte-5oriq5"),z(dt,Q),z(mt,it)},[()=>k.t("finance.finances"),()=>k.t("csv.export"),()=>k.t("finance.view.all"),()=>k.t("finance.view.daily"),()=>k.t("finance.totalActual")]),E(ot,j)};tt(O,ot=>{c(s)?ot(Z,!1):ot(C)})}E(n,N),Hi()}Zn(["click"]);var Nh=D('<div class="empty-state"><p>è¯·éæ©è¡ç¨</p></div>'),Zh=D('<button><span class="day-num svelte-qzlmfm"> </span> <span class="day-date svelte-qzlmfm"> </span></button>'),Bh=D('<div class="day-picker-dropdown svelte-qzlmfm"></div> <div class="backdrop svelte-qzlmfm" role="button" tabindex="0"></div>',1),qh=D('<div class="empty-state"><p> </p></div>'),Rh=D('<img alt="Journal entry" class="card-image svelte-qzlmfm"/>'),jh=D('<div class="weather-icon svelte-qzlmfm"><!></div>'),Fh=D('<div class="location-row svelte-qzlmfm"><!><span class="location svelte-qzlmfm"> </span></div>'),Hh=D('<div role="button" tabindex="0"><!> <div class="card-overlay svelte-qzlmfm"><div class="card-header-info svelte-qzlmfm"><span class="time svelte-qzlmfm"> </span> <!></div> <div class="card-footer-info svelte-qzlmfm"><!> <p class="card-content svelte-qzlmfm"> </p></div></div></div>'),Wh=D('<div class="meta-row svelte-qzlmfm"><!><span> </span></div>'),Uh=D('<div class="meta-row weather svelte-qzlmfm"><!><span> </span></div>'),Vh=D('<img alt="Journal" class="svelte-qzlmfm"/>'),Gh=D('<div class="viewer-photos svelte-qzlmfm"></div>'),Yh=D('<div class="editor-overlay svelte-qzlmfm" role="button" tabindex="0"><div class="editor-modal viewer-modal svelte-qzlmfm" role="dialog"><div class="editor-header svelte-qzlmfm"><h3 class="svelte-qzlmfm"> </h3> <div class="header-actions svelte-qzlmfm"><button class="edit-action-btn svelte-qzlmfm" title="ç·¨è¼¯æ­¤æ¥è¨"><!><span>ç·¨è¼¯</span></button> <button class="close-btn svelte-qzlmfm"><!></button></div></div> <div class="editor-body svelte-qzlmfm"><div class="viewer-meta svelte-qzlmfm"><div class="meta-row svelte-qzlmfm"><!><span> </span></div> <!> <!></div> <!> <div class="viewer-content-field svelte-qzlmfm"><p class="viewer-content svelte-qzlmfm"> </p></div></div></div></div>'),Jh=D("<button><!></button>"),Kh=D('<div class="photo-thumb svelte-qzlmfm"><img alt="Thumbnail" class="svelte-qzlmfm"/><button class="remove-photo svelte-qzlmfm"><!></button></div>'),Xh=D('<button class="icon-btn danger svelte-qzlmfm"><!>åªé¤</button>'),Qh=D("<div></div>"),tf=D('<div class="editor-overlay svelte-qzlmfm" role="button" tabindex="0"><div class="editor-modal svelte-qzlmfm" role="dialog"><div class="editor-header svelte-qzlmfm"><h3 class="svelte-qzlmfm"> </h3> <button class="close-btn svelte-qzlmfm"><!></button></div> <div class="editor-body svelte-qzlmfm"><div class="row"><div class="field time-field svelte-qzlmfm"><label for="entry-time" class="svelte-qzlmfm"> </label><div class="input-wrap svelte-qzlmfm"><!><input id="entry-time" type="time" class="svelte-qzlmfm"/></div></div> <div class="field loc-field svelte-qzlmfm"><label for="entry-location" class="svelte-qzlmfm"> </label><div class="input-wrap svelte-qzlmfm"><!><input id="entry-location" type="text" class="svelte-qzlmfm"/></div></div></div> <div class="field svelte-qzlmfm"><fieldset class="svelte-qzlmfm"><legend class="svelte-qzlmfm"> </legend> <div class="weather-options svelte-qzlmfm"></div></fieldset></div> <div class="field svelte-qzlmfm"><fieldset class="svelte-qzlmfm"><legend class="svelte-qzlmfm"> </legend> <div class="photo-upload-area"><input type="file" id="photo-upload" accept="image/*" multiple class="svelte-qzlmfm"/> <div class="photo-grid svelte-qzlmfm"><!> <label for="photo-upload" class="add-photo-btn svelte-qzlmfm" role="button" tabindex="0"><!><span> </span></label></div></div></fieldset></div> <div class="field content-field svelte-qzlmfm"><textarea class="svelte-qzlmfm"></textarea></div></div> <div class="editor-footer svelte-qzlmfm"><!> <button class="primary-btn svelte-qzlmfm"> </button></div></div></div>'),ef=D('<header class="svelte-qzlmfm"><div class="header-title-row svelte-qzlmfm"><h2 class="svelte-qzlmfm"> </h2> <button class="export-btn svelte-qzlmfm"><!></button></div> <div class="day-navigator svelte-qzlmfm"><button class="nav-btn svelte-qzlmfm"><!></button> <div class="current-day-display svelte-qzlmfm"><button class="day-toggle svelte-qzlmfm"><span class="day-label svelte-qzlmfm"> </span> <span class="date-label svelte-qzlmfm"> </span></button> <!></div> <button class="nav-btn svelte-qzlmfm"><!></button></div></header> <div class="journal-list svelte-qzlmfm"><!> <!></div> <button class="fab svelte-qzlmfm"><!></button> <!> <!>',1),nf=D('<div class="journal-view"><!></div>');function rf(n,r){Fi(r,!0);let s=oe(()=>r.tripId?Re.getTrip(r.tripId):null),o=St(0),u=St(!1),h=oe(()=>c(s)?.days[c(o)]?.journals||[]),d=St(null),_=St(!1),p=St(null),y=St(""),x=St(""),b=St(null),P=St(""),S=St(ui([]));function N(H){M(d,H,!0)}function O(){M(d,null)}function C(){if(!c(s))return;const H=ft=>ft.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");let Tt=`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>${c(s).destination} Journal</title><style>
            body { font-family: system-ui, -apple-system, sans-serif; background: #f4f4f5; color: #18181b; margin: 0; padding: 2rem; }
            .container { max-width: 800px; margin: 0 auto; }
            h1 { text-align: center; margin-bottom: 0.5rem; color: #18181b; }
            .dates { text-align: center; color: #71717a; margin-bottom: 3rem; }
            .day-section { margin-bottom: 4rem; page-break-after: always; }
            .day-section:last-child { page-break-after: auto; }
            .day-header { font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #e4e4e7; color: #3b82f6; }
            .entry-card { background: white; border-radius: 1rem; overflow: hidden; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); height: auto; page-break-inside: avoid; }
            .entry-header { padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f4f4f5; }
            .meta { display: flex; gap: 1rem; align-items: center; color: #71717a; font-size: 0.9rem; }
            .meta span { display: flex; align-items: center; gap: 0.25rem; }
            .content { padding: 1.5rem; line-height: 1.8; white-space: pre-wrap; font-size: 1.1rem; overflow-wrap: break-word; }
            .photos { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.5rem; }
            .photos img { width: 100%; height: auto; object-fit: contain; max-height: 400px; background: #000; }
            .weather-badge { background: #eff6ff; color: #3b82f6; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.85rem; font-weight: 500; }
            @media (prefers-color-scheme: dark) {
                body { background: #18181b; color: #f4f4f5; }
                .entry-card { background: #27272a; }
                .day-header { border-bottom-color: #3f3f46; }
                .entry-header { border-bottom-color: #3f3f46; }
                .meta { color: #a1a1aa; }
                .weather-badge { background: #1e3a8a; color: #bfdbfe; }
            }
        </style></head><body><div class="container"><h1>${H(c(s).destination)}</h1><div class="dates">${c(s).startDate} â ${c(s).endDate}</div>`;c(s).days.forEach((ft,ct)=>{if(ft.journals.length===0)return;Tt+=`<div class="day-section"><div class="day-header">${k.day(ct+1)} - ${ft.date}</div>`,[...ft.journals].sort((W,It)=>W.timestamp.localeCompare(It.timestamp)).forEach(W=>{Tt+=`<div class="entry-card"><div class="entry-header"><div class="meta"><span>ð ${W.timestamp}</span>${W.location?`<span>ð ${H(W.location)}</span>`:""}</div>${W.weather?`<div class="weather-badge">${k.t(`journal.${W.weather}`)}</div>`:""}</div>${W.photos&&W.photos.length>0?`<div class="photos">${W.photos.map(It=>`<img src="${It}" loading="lazy" />`).join("")}</div>`:""}<div class="content">${H(W.content)}</div></div>`}),Tt+="</div>"}),Tt+="</div></body></html>";const q=new Blob([Tt],{type:"text/html"}),et=URL.createObjectURL(q),mt=document.createElement("a");mt.href=et,mt.download=`${c(s).destination}_Journal.html`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt)}function Z(H){if(M(_,!0),H)M(p,H,!0),M(y,H.content,!0),M(x,H.location||"",!0),M(b,H.weather,!0),M(P,H.timestamp,!0),M(S,[...H.photos||[]],!0);else{M(p,null),M(y,""),M(x,""),M(b,null),M(S,[],!0);const B=new Date;M(P,`${String(B.getHours()).padStart(2,"0")}:${String(B.getMinutes()).padStart(2,"0")}`)}c(d)&&O()}function ot(){M(_,!1),M(p,null)}function j(){if(!c(s)||!c(s).days[c(o)])return;const H={id:c(p)?c(p).id:ir(),timestamp:c(P),content:c(y),location:c(x),weather:c(b),photos:c(S)};c(p)?Re.updateJournalEntry(c(s).id,c(o),H):Re.addJournalEntry(c(s).id,c(o),H),ot()}function R(){!c(s)||!c(p)||(Re.removeJournalEntry(c(s).id,c(o),c(p).id),ot())}async function K(H){const B=H.target;if(console.log("upload image"),!B.files||B.files.length===0)return;const Tt=Array.from(B.files);for(const q of Tt)try{const et=await Y(q);c(S).push(et)}catch(et){console.error("Failed to process image",et)}B.value=""}function Y(H){return new Promise((B,Tt)=>{const q=new FileReader;q.readAsDataURL(H),q.onload=et=>{const mt=new Image;mt.src=et.target?.result,mt.onload=()=>{const ft=document.createElement("canvas"),ct=1200,gt=1200;let W=mt.width,It=mt.height;W>It?W>ct&&(It*=ct/W,W=ct):It>gt&&(W*=gt/It,It=gt),ft.width=W,ft.height=It,ft.getContext("2d")?.drawImage(mt,0,0,W,It),B(ft.toDataURL("image/jpeg",.8))},mt.onerror=ft=>Tt(ft)},q.onerror=et=>Tt(et)})}function J(H){c(S).splice(H,1),M(S,[...c(S)],!0)}yn(()=>{if(r.tripId)if(M(u,!1),c(s)){const B=new Date().toISOString().split("T")[0],Tt=c(s).days.findIndex(q=>q.date===B);Tt!==-1?M(o,Tt,!0):M(o,0)}else M(o,0)});function F(){c(s)&&c(o)<c(s).days.length-1&&tr(o)}function st(){c(o)>0&&tr(o,-1)}function lt(H){M(o,H,!0),M(u,!1)}const Pt=[{type:"sunny",icon:od,label:"journal.sunny"},{type:"cloudy",icon:id,label:"journal.cloudy"},{type:"rainy",icon:td,label:"journal.rainy"},{type:"snowy",icon:ed,label:"journal.snowy"},{type:"windy",icon:ld,label:"journal.windy"}];function Ot(H){return Pt.find(B=>B.type===H)?.icon}var _e=nf(),ne=v(_e);{var Wt=H=>{var B=Nh();E(H,B)},dt=H=>{var B=ef(),Tt=rt(B),q=v(Tt),et=v(q),mt=v(et),ft=g(et,2);ft.__click=C;var ct=v(ft);ia(ct,{size:20});var gt=g(q,2),W=v(gt);W.__click=st;var It=v(W);cl(It,{size:20});var we=g(W,2),Zt=v(we);Zt.__click=()=>M(u,!c(u));var A=v(Zt),V=v(A),Q=g(A,2),it=v(Q),$t=g(Zt,2);{var Xt=vt=>{var at=Bh(),ht=rt(at);Ie(ht,21,()=>c(s).days,Qe,(Dt,yt,bt)=>{var kt=Zh();kt.__click=()=>lt(bt);var Ht=v(kt),Lt=v(Ht),te=g(Ht,2),Vt=v(te);G(Jt=>{wi(kt,1,`day-option ${bt===c(o)?"selected":""}`,"svelte-qzlmfm"),z(Lt,Jt),z(Vt,c(yt).date)},[()=>k.day(bt+1)]),E(Dt,kt)});var nt=g(ht,2);nt.__click=()=>M(u,!1),nt.__keydown=Dt=>Dt.key==="Escape"&&M(u,!1),E(vt,at)};tt($t,vt=>{c(u)&&vt(Xt)})}var pt=g(we,2);pt.__click=F;var Yt=v(pt);ul(Yt,{size:20});var re=g(Tt,2),pe=v(re);{var Me=vt=>{var at=qh(),ht=v(at),nt=v(ht);G(Dt=>z(nt,Dt),[()=>k.t("journal.empty")]),E(vt,at)};tt(pe,vt=>{c(h).length===0&&vt(Me)})}var Le=g(pe,2);Ie(Le,17,()=>c(h),Qe,(vt,at)=>{var ht=Hh();ht.__click=()=>N(c(at)),ht.__keydown=qt=>qt.key==="Enter"&&N(c(at));var nt=v(ht);{var Dt=qt=>{var ge=Rh();G(()=>De(ge,"src",c(at).photos[0])),E(qt,ge)};tt(nt,qt=>{c(at).photos&&c(at).photos.length>0&&qt(Dt)})}var yt=g(nt,2),bt=v(yt),kt=v(bt),Ht=v(kt),Lt=g(kt,2);{var te=qt=>{const ge=oe(()=>Ot(c(at).weather));var ut=Nt(),he=rt(ut);{var wt=Rt=>{var se=jh(),Et=v(se);rn(Et,()=>c(ge),(zt,Gt)=>{Gt(zt,{size:14})}),E(Rt,se)};tt(he,Rt=>{c(ge)&&Rt(wt)})}E(qt,ut)};tt(Lt,qt=>{c(at).weather&&qt(te)})}var Vt=g(bt,2),Jt=v(Vt);{var ze=qt=>{var ge=Fh(),ut=v(ge);Jn(ut,{size:14});var he=g(ut),wt=v(he);G(()=>z(wt,c(at).location)),E(qt,ge)};tt(Jt,qt=>{c(at).location&&qt(ze)})}var xe=g(Jt,2),Ae=v(xe);G(()=>{wi(ht,1,`journal-card ${c(at).photos&&c(at).photos.length>0?"has-photo":"no-photo"}`,"svelte-qzlmfm"),z(Ht,c(at).timestamp),z(Ae,c(at).content)}),E(vt,ht)});var Ut=g(re,2);Ut.__click=()=>Z();var Ee=v(Ut);Mr(Ee,{size:24});var me=g(Ut,2);{var Bt=vt=>{var at=Yh();at.__click=O,at.__keydown=X=>X.key==="Escape"&&O();var ht=v(at);ht.__click=X=>X.stopPropagation(),ht.__keydown=X=>X.stopPropagation();var nt=v(ht),Dt=v(nt),yt=v(Dt),bt=g(Dt,2),kt=v(bt);kt.__click=()=>Z(c(d));var Ht=v(kt);Kr(Ht,{size:20});var Lt=g(kt,2);Lt.__click=O;var te=v(Lt);Tr(te,{size:20});var Vt=g(nt,2),Jt=v(Vt),ze=v(Jt),xe=v(ze);so(xe,{size:16});var Ae=g(xe),qt=v(Ae),ge=g(ze,2);{var ut=X=>{var I=Wh(),xt=v(I);Jn(xt,{size:16});var ee=g(xt),ue=v(ee);G(()=>z(ue,c(d).location)),E(X,I)};tt(ge,X=>{c(d).location&&X(ut)})}var he=g(ge,2);{var wt=X=>{const I=oe(()=>Ot(c(d).weather));var xt=Nt(),ee=rt(xt);{var ue=fe=>{var ae=Uh(),Ne=v(ae);rn(Ne,()=>c(I),(si,qe)=>{qe(si,{size:16})});var Fe=g(Ne),di=v(Fe);G(si=>z(di,si),[()=>k.t(`journal.${c(d).weather}`)]),E(fe,ae)};tt(ee,fe=>{c(I)&&fe(ue)})}E(X,xt)};tt(he,X=>{c(d).weather&&X(wt)})}var Rt=g(Jt,2);{var se=X=>{var I=Gh();Ie(I,21,()=>c(d).photos,Qe,(xt,ee)=>{var ue=Vh();G(()=>De(ue,"src",c(ee))),E(xt,ue)}),E(X,I)};tt(Rt,X=>{c(d).photos&&c(d).photos.length>0&&X(se)})}var Et=g(Rt,2),zt=v(Et),Gt=v(zt);G(X=>{z(yt,X),z(qt,c(d).timestamp),z(Gt,c(d).content)},[()=>k.t("journal.viewEntry")]),E(vt,at)};tt(me,vt=>{c(d)&&vt(Bt)})}var Qt=g(me,2);{var Se=vt=>{var at=tf();at.__click=ot,at.__keydown=Kt=>Kt.key==="Escape"&&ot();var ht=v(at);ht.__click=Kt=>Kt.stopPropagation(),ht.__keydown=Kt=>Kt.stopPropagation();var nt=v(ht),Dt=v(nt),yt=v(Dt),bt=g(Dt,2);bt.__click=ot;var kt=v(bt);Tr(kt,{size:20});var Ht=g(nt,2),Lt=v(Ht),te=v(Lt),Vt=v(te),Jt=v(Vt),ze=g(Vt),xe=v(ze);so(xe,{size:16,class:"input-icon"});var Ae=g(xe),qt=g(te,2),ge=v(qt),ut=v(ge),he=g(ge),wt=v(he);Jn(wt,{size:16,class:"input-icon"});var Rt=g(wt),se=g(Lt,2),Et=v(se),zt=v(Et),Gt=v(zt),X=g(zt,2);Ie(X,21,()=>Pt,Qe,(Kt,$e)=>{var Be=Jh();Be.__click=()=>M(b,c($e).type,!0);var Ge=v(Be);rn(Ge,()=>c($e).icon,(Ye,Je)=>{Je(Ye,{size:20})}),G(Ye=>{wi(Be,1,`weather-btn ${c(b)===c($e).type?"active":""}`,"svelte-qzlmfm"),De(Be,"title",Ye)},[()=>k.t(c($e).label)]),E(Kt,Be)});var I=g(se,2),xt=v(I),ee=v(xt),ue=v(ee),fe=g(ee,2),ae=v(fe);ae.__change=K;var Ne=g(ae,2),Fe=v(Ne);Ie(Fe,17,()=>c(S),Qe,(Kt,$e,Be)=>{var Ge=Kh(),Ye=v(Ge),Je=g(Ye);Je.__click=()=>J(Be);var jt=v(Je);Tr(jt,{size:12}),G(()=>De(Ye,"src",c($e))),E(Kt,Ge)});var di=g(Fe,2);di.__keydown=Kt=>Kt.key==="Enter"&&document.getElementById("photo-upload")?.click();var si=v(di);rd(si,{size:24});var qe=g(si),We=v(qe),ai=g(I,2),mi=v(ai),hi=g(Ht,2),ei=v(hi);{var Di=Kt=>{var $e=Xh();$e.__click=R;var Be=v($e);zn(Be,{size:20}),E(Kt,$e)},Wi=Kt=>{var $e=Qh();E(Kt,$e)};tt(ei,Kt=>{c(p)?Kt(Di):Kt(Wi,!1)})}var ln=g(ei,2);ln.__click=j;var xn=v(ln);G((Kt,$e,Be,Ge,Ye,Je,jt,Pe,cn)=>{z(yt,Kt),z(Jt,$e),z(ut,Be),De(Rt,"placeholder",Ge),z(Gt,Ye),z(ue,Je),z(We,jt),De(mi,"placeholder",Pe),z(xn,cn)},[()=>c(p)?k.t("journal.editEntry"):k.t("journal.addEntry"),()=>k.t("journal.time"),()=>k.t("journal.location"),()=>k.t("journal.locationPlaceholder"),()=>k.t("journal.weather"),()=>k.t("journal.photos"),()=>k.t("journal.addPhotos"),()=>k.t("journal.placeholder"),()=>k.t("modal.save")]),Ii(Ae,()=>c(P),Kt=>M(P,Kt)),Ii(Rt,()=>c(x),Kt=>M(x,Kt)),Ii(mi,()=>c(y),Kt=>M(y,Kt)),E(vt,at)};tt(Qt,vt=>{c(_)&&vt(Se)})}G((vt,at,ht)=>{z(mt,`${c(s).destination??""} ${vt??""}`),De(ft,"title",at),W.disabled=c(o)===0,z(V,ht),z(it,c(s).days[c(o)].date),pt.disabled=c(o)===c(s).days.length-1},[()=>k.t("journal.title"),()=>k.t("journal.export"),()=>k.day(c(o)+1)]),E(H,B)};tt(ne,H=>{c(s)?H(dt,!1):H(Wt)})}E(n,_e),Hi()}Zn(["click","keydown","change"]);var sf=D('<p class="empty-msg svelte-1n46o8q"> </p>'),af=D('<div class="trip-card svelte-1n46o8q"><button class="trip-content svelte-1n46o8q"><div class="trip-header svelte-1n46o8q"><h2 class="svelte-1n46o8q"> </h2></div> <div class="trip-dates svelte-1n46o8q"> </div> <div class="trip-meta svelte-1n46o8q"><span> </span></div></button> <button class="delete-trip-btn svelte-1n46o8q"><!></button></div>'),of=D('<div class="trip-grid svelte-1n46o8q"></div>'),lf=D('<div class="trip-list-view svelte-1n46o8q"><div class="trip-list-container svelte-1n46o8q"><div class="list-header svelte-1n46o8q"><h1 class="svelte-1n46o8q"> </h1> <button class="add-trip-btn svelte-1n46o8q"><!> <span> </span></button></div> <!></div></div>'),cf=D('<div class="full-map-view svelte-1n46o8q"><div class="map-wrapper svelte-1n46o8q"><!></div></div>'),uf=D('<div class="modal-overlay svelte-1n46o8q" role="dialog" tabindex="-1"><div class="modal svelte-1n46o8q" role="presentation"><div class="modal-header svelte-1n46o8q"><div><h2 class="svelte-1n46o8q"> </h2> <p class="modal-subtitle svelte-1n46o8q"> </p></div> <button class="close-btn svelte-1n46o8q"><!></button></div> <div class="modal-body svelte-1n46o8q"><div class="form-section svelte-1n46o8q"><h3 class="section-title svelte-1n46o8q"> </h3> <div class="form-group svelte-1n46o8q"><label for="destination" class="svelte-1n46o8q"> <span class="required svelte-1n46o8q">*</span></label> <div class="input-wrapper svelte-1n46o8q"><!> <input id="destination" type="text" class="svelte-1n46o8q"/></div></div></div> <div class="form-section svelte-1n46o8q"><h3 class="section-title svelte-1n46o8q"> </h3> <div class="date-row svelte-1n46o8q"><div class="form-group flex-1 svelte-1n46o8q"><label for="start-date" class="svelte-1n46o8q"> <span class="required svelte-1n46o8q">*</span></label> <div class="input-wrapper svelte-1n46o8q"><!> <input id="start-date" type="date" class="svelte-1n46o8q"/></div></div> <div class="form-group flex-1 svelte-1n46o8q"><label for="end-date" class="svelte-1n46o8q"> <span class="required svelte-1n46o8q">*</span></label> <div class="input-wrapper svelte-1n46o8q"><!> <input id="end-date" type="date" class="svelte-1n46o8q"/></div></div></div></div> <div class="form-section svelte-1n46o8q"><h3 class="section-title svelte-1n46o8q"> </h3> <div class="form-group svelte-1n46o8q"><label for="currency" class="svelte-1n46o8q"> </label> <div class="input-wrapper svelte-1n46o8q"><!> <select id="currency" class="svelte-1n46o8q"><option> </option><option> </option><option> </option></select></div></div></div></div> <div class="modal-footer svelte-1n46o8q"><button class="cancel-btn svelte-1n46o8q"> </button> <button class="create-btn svelte-1n46o8q"><!> <span> </span></button></div></div></div>'),df=D('<div class="modal-overlay svelte-1n46o8q" role="alertdialog" tabindex="-1"><div class="confirm-modal svelte-1n46o8q" role="presentation"><div class="confirm-icon svelte-1n46o8q"><!></div> <h2 class="svelte-1n46o8q"> </h2> <div class="confirm-message svelte-1n46o8q"><p class="svelte-1n46o8q"> </p> <p class="warning svelte-1n46o8q"> </p></div> <div class="confirm-actions svelte-1n46o8q"><button class="cancel-btn svelte-1n46o8q"> </button> <button class="delete-btn svelte-1n46o8q"> </button></div></div></div>'),hf=D("<!> <!> <!>",1);function ff(n,r){Fi(r,!0);let s=St("itinerary"),o=St(null),u=St(!1),h=St(null),d=St(ui({destination:"",startDate:"",endDate:"",currency:"TWD"})),_=oe(()=>Re.trips),p=oe(()=>{if(c(o)){const J=Re.getTrip(c(o));return J?J.days.flatMap(F=>F.activities):[]}else return Re.trips.flatMap(J=>J.days.flatMap(F=>F.activities))});function y(J){M(o,J,!0),M(s,"itinerary")}function x(){M(o,null),M(s,"itinerary")}function b(){M(u,!0),M(d,{destination:"",startDate:"",endDate:"",currency:"TWD"},!0)}function P(){M(u,!1),M(d,{destination:"",startDate:"",endDate:"",currency:"TWD"},!0)}function S(){if(!c(d).destination||!c(d).startDate||!c(d).endDate)return;const J=new Date(c(d).startDate),F=new Date(c(d).endDate),st=Math.floor((F.getTime()-J.getTime())/(1e3*60*60*24))+1;if(st<=0)return;const lt=[];for(let Ot=0;Ot<st;Ot++){const _e=new Date(J);_e.setDate(_e.getDate()+Ot),lt.push({date:_e.toISOString().split("T")[0],activities:[],journals:[]})}const Pt={id:ir(),destination:c(d).destination,startDate:c(d).startDate,endDate:c(d).endDate,days:lt,currency:c(d).currency,generalExpenses:[]};Re.addTrip(Pt),P()}function N(J){M(h,J,!0)}function O(){M(h,null)}function C(){c(h)&&(Re.removeTrip(c(h)),M(h,null))}var Z=hf(),ot=rt(Z);{let J=oe(()=>c(o)!==null);gd(ot,{get hasTrip(){return c(J)},onBackTrip:x,get view(){return c(s)},set view(F){M(s,F,!0)},children:(F,st)=>{var lt=Nt(),Pt=rt(lt);{var Ot=ne=>{var Wt=lf(),dt=v(Wt),H=v(dt),B=v(H),Tt=v(B),q=g(B,2);q.__click=b;var et=v(q);Mr(et,{size:20});var mt=g(et,2),ft=v(mt),ct=g(H,2);{var gt=It=>{var we=sf(),Zt=v(we);G(A=>z(Zt,A),[()=>k.t("trip.empty")]),E(It,we)},W=It=>{var we=of();Ie(we,21,()=>c(_),Qe,(Zt,A)=>{var V=af(),Q=v(V);Q.__click=()=>y(c(A).id);var it=v(Q),$t=v(it),Xt=v($t),pt=g(it,2),Yt=v(pt),re=g(pt,2),pe=v(re),Me=v(pe),Le=g(Q,2);Le.__click=()=>N(c(A).id);var Ut=v(Le);zn(Ut,{size:16}),G((Ee,me)=>{z(Xt,c(A).destination),z(Yt,`${c(A).startDate??""} ~ ${c(A).endDate??""}`),z(Me,`${c(A).days.length??""} ${Ee??""}`),De(Le,"title",me)},[()=>k.t("trip.days"),()=>k.t("trip.deleteTrip")]),E(Zt,V)}),E(It,we)};tt(ct,It=>{c(_).length===0?It(gt):It(W,!1)})}G((It,we)=>{z(Tt,It),z(ft,we)},[()=>k.t("trip.myTrips"),()=>k.t("trip.planNew")]),E(ne,Wt)},_e=ne=>{var Wt=Nt(),dt=rt(Wt);{var H=Tt=>{ph(Tt,{get tripId(){return c(o)}})},B=Tt=>{var q=Nt(),et=rt(q);{var mt=ct=>{Dh(ct,{get tripId(){return c(o)}})},ft=ct=>{var gt=Nt(),W=rt(gt);{var It=Zt=>{rf(Zt,{get tripId(){return c(o)}})},we=Zt=>{var A=Nt(),V=rt(A);{var Q=it=>{var $t=cf(),Xt=v($t),pt=v(Xt);pl(pt,{get activities(){return c(p)},zoom:2}),E(it,$t)};tt(V,it=>{c(s)==="map"&&it(Q)},!0)}E(Zt,A)};tt(W,Zt=>{c(s)==="journal"?Zt(It):Zt(we,!1)},!0)}E(ct,gt)};tt(et,ct=>{c(s)==="finance"?ct(mt):ct(ft,!1)},!0)}E(Tt,q)};tt(dt,Tt=>{c(s)==="itinerary"?Tt(H):Tt(B,!1)},!0)}E(ne,Wt)};tt(Pt,ne=>{c(o)?ne(_e,!1):ne(Ot)})}E(F,lt)},$$slots:{default:!0}})}var j=g(ot,2);{var R=J=>{var F=uf();F.__click=P,F.__keydown=ut=>ut.key==="Escape"&&P();var st=v(F);st.__click=ut=>ut.stopPropagation(),st.__keydown=ut=>ut.stopPropagation();var lt=v(st),Pt=v(lt),Ot=v(Pt),_e=v(Ot),ne=g(Ot,2),Wt=v(ne),dt=g(Pt,2);dt.__click=P;var H=v(dt);Tr(H,{size:20});var B=g(lt,2),Tt=v(B),q=v(Tt),et=v(q),mt=g(q,2),ft=v(mt),ct=v(ft),gt=g(ft,2),W=v(gt);Jn(W,{size:16,class:"input-icon"});var It=g(W,2),we=g(Tt,2),Zt=v(we),A=v(Zt),V=g(Zt,2),Q=v(V),it=v(Q),$t=v(it),Xt=g(it,2),pt=v(Xt);Ws(pt,{size:16,class:"input-icon"});var Yt=g(pt,2),re=g(Q,2),pe=v(re),Me=v(pe),Le=g(pe,2),Ut=v(Le);Ws(Ut,{size:16,class:"input-icon"});var Ee=g(Ut,2),me=g(we,2),Bt=v(me),Qt=v(Bt),Se=g(Bt,2),vt=v(Se),at=v(vt),ht=g(vt,2),nt=v(ht);ea(nt,{size:16,class:"input-icon"});var Dt=g(nt,2),yt=v(Dt),bt=v(yt);yt.value=yt.__value="TWD";var kt=g(yt),Ht=v(kt);kt.value=kt.__value="JPY";var Lt=g(kt),te=v(Lt);Lt.value=Lt.__value="USD";var Vt=g(B,2),Jt=v(Vt);Jt.__click=P;var ze=v(Jt),xe=g(Jt,2);xe.__click=S;var Ae=v(xe);Mr(Ae,{size:18});var qt=g(Ae,2),ge=v(qt);G((ut,he,wt,Rt,se,Et,zt,Gt,X,I,xt)=>{z(_e,ut),z(Wt,he),z(et,wt),z(ct,`${Rt??""} `),De(It,"placeholder",k.lang==="en"?"e.g. Tokyo":"ä¾å¦ï¼æ±äº¬"),z(A,se),z($t,`${Et??""} `),z(Me,`${zt??""} `),z(Qt,Gt),z(at,X),z(bt,`TWD - ${k.lang==="en"?"Taiwan Dollar":"æ°å°å¹£"}`),z(Ht,`JPY - ${k.lang==="en"?"Japanese Yen":"æ¥å"}`),z(te,`USD - ${k.lang==="en"?"US Dollar":"ç¾å"}`),z(ze,I),xe.disabled=!c(d).destination||!c(d).startDate||!c(d).endDate,z(ge,xt)},[()=>k.t("trip.planNewAdventure"),()=>k.t("trip.fillBasicInfo"),()=>k.t("trip.basicInfo"),()=>k.t("trip.destination"),()=>k.t("trip.dates"),()=>k.t("trip.startDate"),()=>k.t("trip.endDate"),()=>k.t("trip.otherSettings"),()=>k.t("trip.currency"),()=>k.t("trip.cancel"),()=>k.t("trip.startYourPlan")]),Ii(It,()=>c(d).destination,ut=>c(d).destination=ut),Ii(Yt,()=>c(d).startDate,ut=>c(d).startDate=ut),Ii(Ee,()=>c(d).endDate,ut=>c(d).endDate=ut),nl(Dt,()=>c(d).currency,ut=>c(d).currency=ut),E(J,F)};tt(j,J=>{c(u)&&J(R)})}var K=g(j,2);{var Y=J=>{var F=df();F.__click=O,F.__keydown=ct=>ct.key==="Escape"&&O();var st=v(F);st.__click=ct=>ct.stopPropagation(),st.__keydown=ct=>ct.stopPropagation();var lt=v(st),Pt=v(lt);zn(Pt,{size:32});var Ot=g(lt,2),_e=v(Ot),ne=g(Ot,2),Wt=v(ne),dt=v(Wt),H=g(Wt,2),B=v(H),Tt=g(ne,2),q=v(Tt);q.__click=O;var et=v(q),mt=g(q,2);mt.__click=C;var ft=v(mt);G(ct=>{z(_e,k.lang==="en"?"Confirm Delete Trip?":"ç¢ºèªåªé¤è¡ç¨ï¼"),z(dt,k.lang==="en"?"This trip will be permanently deleted.":"å°æ°¸ä¹åªé¤æ­¤è¡ç¨ã"),z(B,k.lang==="en"?"This action will also delete all associated activities, expenses, and journal entries. This cannot be undone.":"æ­¤æä½å°ä¸ä½µåªé¤ææç¸éçæ´»åãè²»ç¨è¨éåæ¥è¨ï¼ä¸ç¡æ³æ¢å¾©ã"),z(et,ct),z(ft,k.lang==="en"?"Confirm Delete":"ç¢ºèªåªé¤")},[()=>k.t("trip.cancel")]),E(J,F)};tt(K,J=>{c(h)&&J(Y)})}E(n,Z),Hi()}Zn(["click","keydown"]);Eu(ff,{target:document.getElementById("app")});
