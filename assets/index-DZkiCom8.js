(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(u){if(u.ep)return;u.ep=!0;const h=s(u);fetch(u.href,h)}})();const Ns=!1;var Us=Array.isArray,dc=Array.prototype.indexOf,is=Array.from,hc=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,ca=Object.getOwnPropertyDescriptors,fc=Object.prototype,vc=Array.prototype,Vs=Object.getPrototypeOf,Ho=Object.isExtensible;function vr(n){return typeof n=="function"}function _c(n){return n()}function Zs(n){for(var r=0;r<n.length;r++)n[r]()}function ua(){var n,r,s=new Promise((a,u)=>{n=a,r=u});return{promise:s,resolve:n,reject:r}}function br(n,r){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const s=[];for(const a of n)if(s.push(a),s.length===r)break;return s}const ti=2,Gs=4,ns=8,da=1<<24,on=16,an=32,wn=64,rs=128,$i=512,ni=1024,pi=2048,ji=4096,wi=8192,tn=16384,Ys=32768,sn=65536,Wo=1<<17,ha=1<<18,$n=1<<19,fa=1<<20,Qi=1<<25,On=32768,Bs=1<<21,Js=1<<22,pn=1<<23,Ri=Symbol("$state"),va=Symbol("legacy props"),pc=Symbol(""),Yn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function mc(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function gc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function yc(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function bc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function wc(n){throw new Error("https://svelte.dev/e/effect_orphan")}function xc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pc(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function kc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Tc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ec(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Sc=1,zc=2,_a=4,Mc=8,Cc=16,Ac=1,Oc=2,pa=4,Ic=8,$c=16,Dc=1,Nc=2,Xe=Symbol(),Zc="http://www.w3.org/1999/xhtml",Bc="http://www.w3.org/2000/svg",qc="@attach";function Rc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function jc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ma(n){return n===this.v}function Fc(n,r){return n!=n?r==r:n!==r||n!==null&&typeof n=="object"||typeof n=="function"}function ga(n){return!Fc(n,this.v)}let nr=!1,Hc=!1;function Wc(){nr=!0}let je=null;function Kn(n){je=n}function Fi(n,r=!1,s){je={p:je,i:!1,c:null,e:null,s:n,x:null,l:nr&&!r?{s:null,u:null,$:[]}:null}}function Hi(n){var r=je,s=r.e;if(s!==null){r.e=null;for(var a of s)$a(a)}return r.i=!0,je=r.p,{}}function Cr(){return!nr||je!==null&&je.l===null}let Sn=[];function ya(){var n=Sn;Sn=[],Zs(n)}function Dn(n){if(Sn.length===0&&!xr){var r=Sn;queueMicrotask(()=>{r===Sn&&ya()})}Sn.push(n)}function Uc(){for(;Sn.length>0;)ya()}function ba(n){var r=se;if(r===null)return re.f|=pn,n;if((r.f&Ys)===0){if((r.f&rs)===0)throw n;r.b.error(n)}else Xn(n,r)}function Xn(n,r){for(;r!==null;){if((r.f&rs)!==0)try{r.b.error(n);return}catch(s){n=s}r=r.parent}throw n}const Yr=new Set;let ce=null,wr=null,Ei=null,Ti=[],ss=null,qs=!1,xr=!1;class Oi{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#n=0;#i=0;#l=null;#s=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#i>0}process(r){Ti=[],wr=null,this.apply();var s={parent:null,effect:null,effects:[],render_effects:[]};for(const a of r)this.#o(a,s);this.is_fork||this.#u(),this.is_deferred()?(this.#a(s.effects),this.#a(s.render_effects)):(wr=this,ce=null,Uo(s.render_effects),Uo(s.effects),wr=null,this.#l?.resolve()),Ei=null}#o(r,s){r.f^=ni;for(var a=r.first;a!==null;){var u=a.f,h=(u&(an|wn))!==0,d=h&&(u&ni)!==0,_=d||(u&wi)!==0||this.skipped_effects.has(a);if((a.f&rs)!==0&&a.b?.is_pending()&&(s={parent:s,effect:a,effects:[],render_effects:[]}),!_&&a.fn!==null){h?a.f^=ni:(u&Gs)!==0?s.effects.push(a):Ir(a)&&((a.f&on)!==0&&this.#s.add(a),Sr(a));var p=a.first;if(p!==null){a=p;continue}}var y=a.parent;for(a=a.next;a===null&&y!==null;)y===s.effect&&(this.#a(s.effects),this.#a(s.render_effects),s=s.parent),a=y.next,y=y.parent}}#a(r){for(const s of r)(s.f&pi)!==0?this.#s.add(s):(s.f&ji)!==0&&this.#r.add(s),this.#c(s.deps),ri(s,ni)}#c(r){if(r!==null)for(const s of r)(s.f&ti)===0||(s.f&On)===0||(s.f^=On,this.#c(s.deps))}capture(r,s){this.previous.has(r)||this.previous.set(r,s),(r.f&pn)===0&&(this.current.set(r,r.v),Ei?.set(r,r.v))}activate(){ce=this,this.apply()}deactivate(){ce===this&&(ce=null,Ei=null)}flush(){if(this.activate(),Ti.length>0){if(wa(),ce!==null&&ce!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const r of this.#e)r(this);this.#e.clear()}#u(){if(this.#i===0){for(const r of this.#t)r();this.#t.clear()}this.#n===0&&this.#d()}#d(){if(Yr.size>1){this.previous.clear();var r=Ei,s=!0,a={parent:null,effect:null,effects:[],render_effects:[]};for(const h of Yr){if(h===this){s=!1;continue}const d=[];for(const[p,y]of this.current){if(h.current.has(p))if(s&&y!==h.current.get(p))h.current.set(p,y);else continue;d.push(p)}if(d.length===0)continue;const _=[...h.current.keys()].filter(p=>!this.current.has(p));if(_.length>0){var u=Ti;Ti=[];const p=new Set,y=new Map;for(const x of d)xa(x,_,p,y);if(Ti.length>0){ce=h,h.apply();for(const x of Ti)h.#o(x,a);h.deactivate()}Ti=u}}ce=null,Ei=r}this.committed=!0,Yr.delete(this)}increment(r){this.#n+=1,r&&(this.#i+=1)}decrement(r){this.#n-=1,r&&(this.#i-=1),this.revive()}revive(){for(const r of this.#s)this.#r.delete(r),ri(r,pi),In(r);for(const r of this.#r)ri(r,ji),In(r);this.flush()}oncommit(r){this.#t.add(r)}ondiscard(r){this.#e.add(r)}settled(){return(this.#l??=ua()).promise}static ensure(){if(ce===null){const r=ce=new Oi;Yr.add(ce),xr||Oi.enqueue(()=>{ce===r&&r.flush()})}return ce}static enqueue(r){Dn(r)}apply(){}}function Vc(n){var r=xr;xr=!0;try{for(var s;;){if(Uc(),Ti.length===0&&(ce?.flush(),Ti.length===0))return ss=null,s;wa()}}finally{xr=r}}function wa(){var n=Cn;qs=!0;var r=null;try{var s=0;for(Qr(!0);Ti.length>0;){var a=Oi.ensure();if(s++>1e3){var u,h;Gc()}a.process(Ti),mn.clear()}}finally{qs=!1,Qr(n),ss=null}}function Gc(){try{xc()}catch(n){Xn(n,ss)}}let Xi=null;function Uo(n){var r=n.length;if(r!==0){for(var s=0;s<r;){var a=n[s++];if((a.f&(tn|wi))===0&&Ir(a)&&(Xi=new Set,Sr(a),a.deps===null&&a.first===null&&a.nodes===null&&(a.teardown===null&&a.ac===null?qa(a):a.fn=null),Xi?.size>0)){mn.clear();for(const u of Xi){if((u.f&(tn|wi))!==0)continue;const h=[u];let d=u.parent;for(;d!==null;)Xi.has(d)&&(Xi.delete(d),h.push(d)),d=d.parent;for(let _=h.length-1;_>=0;_--){const p=h[_];(p.f&(tn|wi))===0&&Sr(p)}}Xi.clear()}}Xi=null}}function xa(n,r,s,a){if(!s.has(n)&&(s.add(n),n.reactions!==null))for(const u of n.reactions){const h=u.f;(h&ti)!==0?xa(u,r,s,a):(h&(Js|on))!==0&&(h&pi)===0&&Pa(u,r,a)&&(ri(u,pi),In(u))}}function Pa(n,r,s){const a=s.get(n);if(a!==void 0)return a;if(n.deps!==null)for(const u of n.deps){if(r.includes(u))return!0;if((u.f&ti)!==0&&Pa(u,r,s))return s.set(u,!0),!0}return s.set(n,!1),!1}function In(n){for(var r=ss=n;r.parent!==null;){r=r.parent;var s=r.f;if(qs&&r===se&&(s&on)!==0&&(s&ha)===0)return;if((s&(wn|an))!==0){if((s&ni)===0)return;r.f^=ni}}Ti.push(r)}function Yc(n){let r=0,s=gn(0),a;return()=>{Lr()&&(c(s),Qs(()=>(r===0&&(a=bn(()=>n(()=>Pr(s)))),r+=1,()=>{Dn(()=>{r-=1,r===0&&(a?.(),a=void 0,Pr(s))})})))}}var Jc=sn|$n|rs;function Kc(n,r,s){new Xc(n,r,s)}class Xc{parent;#t=!1;#e;#n=null;#i;#l;#s;#r=null;#o=null;#a=null;#c=null;#u=null;#d=0;#h=0;#v=!1;#f=null;#y=Yc(()=>(this.#f=gn(this.#d),()=>{this.#f=null}));constructor(r,s,a){this.#e=r,this.#i=s,this.#l=a,this.parent=se.b,this.#t=!!this.#i.pending,this.#s=rr(()=>{se.b=this;{var u=this.#m();try{this.#r=vi(()=>a(u))}catch(h){this.error(h)}this.#h>0?this.#p():this.#t=!1}return()=>{this.#u?.remove()}},Jc)}#b(){try{this.#r=vi(()=>this.#l(this.#e))}catch(r){this.error(r)}this.#t=!1}#w(){const r=this.#i.pending;r&&(this.#o=vi(()=>r(this.#e)),Oi.enqueue(()=>{var s=this.#m();this.#r=this.#_(()=>(Oi.ensure(),vi(()=>this.#l(s)))),this.#h>0?this.#p():(Mn(this.#o,()=>{this.#o=null}),this.#t=!1)}))}#m(){var r=this.#e;return this.#t&&(this.#u=en(),this.#e.before(this.#u),r=this.#u),r}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#i.pending}#_(r){var s=se,a=re,u=je;zi(this.#s),_i(this.#s),Kn(this.#s.ctx);try{return r()}catch(h){return ba(h),null}finally{zi(s),_i(a),Kn(u)}}#p(){const r=this.#i.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Fa(this.#r,this.#c)),this.#o===null&&(this.#o=vi(()=>r(this.#e)))}#g(r){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(r);return}this.#h+=r,this.#h===0&&(this.#t=!1,this.#o&&Mn(this.#o,()=>{this.#o=null}),this.#c&&(this.#e.before(this.#c),this.#c=null))}update_pending_count(r){this.#g(r),this.#d+=r,this.#f&&Qn(this.#f,this.#d)}get_effect_pending(){return this.#y(),c(this.#f)}error(r){var s=this.#i.onerror;let a=this.#i.failed;if(this.#v||!s&&!a)throw r;this.#r&&(Ve(this.#r),this.#r=null),this.#o&&(Ve(this.#o),this.#o=null),this.#a&&(Ve(this.#a),this.#a=null);var u=!1,h=!1;const d=()=>{if(u){jc();return}u=!0,h&&Ec(),Oi.ensure(),this.#d=0,this.#a!==null&&Mn(this.#a,()=>{this.#a=null}),this.#t=this.has_pending_snippet(),this.#r=this.#_(()=>(this.#v=!1,vi(()=>this.#l(this.#e)))),this.#h>0?this.#p():this.#t=!1};var _=re;try{_i(null),h=!0,s?.(r,d),h=!1}catch(p){Xn(p,this.#s&&this.#s.parent)}finally{_i(_)}a&&Dn(()=>{this.#a=this.#_(()=>{Oi.ensure(),this.#v=!0;try{return vi(()=>{a(this.#e,()=>r,()=>d)})}catch(p){return Xn(p,this.#s.parent),null}finally{this.#v=!1}})})}}function ka(n,r,s,a){const u=Cr()?Ar:Ks;if(s.length===0&&n.length===0){a(r.map(u));return}var h=ce,d=se,_=Qc();function p(){Promise.all(s.map(y=>tu(y))).then(y=>{_();try{a([...r.map(u),...y])}catch(x){(d.f&tn)===0&&Xn(x,d)}h?.deactivate(),Xr()}).catch(y=>{Xn(y,d)})}n.length>0?Promise.all(n).then(()=>{_();try{return p()}finally{h?.deactivate(),Xr()}}):p()}function Qc(){var n=se,r=re,s=je,a=ce;return function(h=!0){zi(n),_i(r),Kn(s),h&&a?.activate()}}function Xr(){zi(null),_i(null),Kn(null)}function Ar(n){var r=ti|pi,s=re!==null&&(re.f&ti)!==0?re:null;return se!==null&&(se.f|=$n),{ctx:je,deps:null,effects:null,equals:ma,f:r,fn:n,reactions:null,rv:0,v:Xe,wv:0,parent:s??se,ac:null}}function tu(n,r){let s=se;s===null&&gc();var a=s.b,u=void 0,h=gn(Xe),d=!re,_=new Map;return hu(()=>{var p=ua();u=p.promise;try{Promise.resolve(n()).then(p.resolve,p.reject).then(()=>{y===ce&&y.committed&&y.deactivate(),Xr()})}catch(P){p.reject(P),Xr()}var y=ce;if(d){var x=!a.is_pending();a.update_pending_count(1),y.increment(x),_.get(y)?.reject(Yn),_.delete(y),_.set(y,p)}const b=(P,E=void 0)=>{if(y.activate(),E)E!==Yn&&(h.f|=pn,Qn(h,E));else{(h.f&pn)!==0&&(h.f^=pn),Qn(h,P);for(const[N,A]of _){if(_.delete(N),N===y)break;A.reject(Yn)}}d&&(a.update_pending_count(-1),y.decrement(x))};p.promise.then(b,P=>b(null,P||"unknown"))}),as(()=>{for(const p of _.values())p.reject(Yn)}),new Promise(p=>{function y(x){function b(){x===u?p(h):y(u)}x.then(b,b)}y(u)})}function ne(n){const r=Ar(n);return Ha(r),r}function Ks(n){const r=Ar(n);return r.equals=ga,r}function Ta(n){var r=n.effects;if(r!==null){n.effects=null;for(var s=0;s<r.length;s+=1)Ve(r[s])}}function eu(n){for(var r=n.parent;r!==null;){if((r.f&ti)===0)return(r.f&tn)===0?r:null;r=r.parent}return null}function Xs(n){var r,s=se;zi(eu(n));try{n.f&=~On,Ta(n),r=Ga(n)}finally{zi(s)}return r}function La(n){var r=Xs(n);if(n.equals(r)||(ce?.is_fork||(n.v=r),n.wv=Ua()),!Nn)if(Ei!==null)(Lr()||ce?.is_fork)&&Ei.set(n,r);else{var s=(n.f&$i)===0?ji:ni;ri(n,s)}}let Rs=new Set;const mn=new Map;let Ea=!1;function gn(n,r){var s={f:0,v:n,reactions:null,equals:ma,rv:0,wv:0};return s}function Et(n,r){const s=gn(n);return Ha(s),s}function iu(n,r=!1,s=!0){const a=gn(n);return r||(a.equals=ga),nr&&s&&je!==null&&je.l!==null&&(je.l.s??=[]).push(a),a}function O(n,r,s=!1){re!==null&&(!qi||(re.f&Wo)!==0)&&Cr()&&(re.f&(ti|on|Js|Wo))!==0&&!nn?.includes(n)&&Lc();let a=s?ui(r):r;return Qn(n,a)}function Qn(n,r){if(!n.equals(r)){var s=n.v;Nn?mn.set(n,r):mn.set(n,s),n.v=r;var a=Oi.ensure();a.capture(n,s),(n.f&ti)!==0&&((n.f&pi)!==0&&Xs(n),ri(n,(n.f&$i)!==0?ni:ji)),n.wv=Ua(),Sa(n,pi),Cr()&&se!==null&&(se.f&ni)!==0&&(se.f&(an|wn))===0&&(ki===null?_u([n]):ki.push(n)),!a.is_fork&&Rs.size>0&&!Ea&&nu()}return r}function nu(){Ea=!1;var n=Cn;Qr(!0);const r=Array.from(Rs);try{for(const s of r)(s.f&ni)!==0&&ri(s,ji),Ir(s)&&Sr(s)}finally{Qr(n)}Rs.clear()}function tr(n,r=1){var s=c(n),a=r===1?s++:s--;return O(n,s),a}function Pr(n){O(n,n.v+1)}function Sa(n,r){var s=n.reactions;if(s!==null)for(var a=Cr(),u=s.length,h=0;h<u;h++){var d=s[h],_=d.f;if(!(!a&&d===se)){var p=(_&pi)===0;if(p&&ri(d,r),(_&ti)!==0){var y=d;Ei?.delete(y),(_&On)===0&&(_&$i&&(d.f|=On),Sa(y,ji))}else p&&((_&on)!==0&&Xi!==null&&Xi.add(d),In(d))}}}function ui(n){if(typeof n!="object"||n===null||Ri in n)return n;const r=Vs(n);if(r!==fc&&r!==vc)return n;var s=new Map,a=Us(n),u=Et(0),h=An,d=_=>{if(An===h)return _();var p=re,y=An;_i(null),Ko(h);var x=_();return _i(p),Ko(y),x};return a&&s.set("length",Et(n.length)),new Proxy(n,{defineProperty(_,p,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&kc();var x=s.get(p);return x===void 0?x=d(()=>{var b=Et(y.value);return s.set(p,b),b}):O(x,y.value,!0),!0},deleteProperty(_,p){var y=s.get(p);if(y===void 0){if(p in _){const x=d(()=>Et(Xe));s.set(p,x),Pr(u)}}else O(y,Xe),Pr(u);return!0},get(_,p,y){if(p===Ri)return n;var x=s.get(p),b=p in _;if(x===void 0&&(!b||_n(_,p)?.writable)&&(x=d(()=>{var E=ui(b?_[p]:Xe),N=Et(E);return N}),s.set(p,x)),x!==void 0){var P=c(x);return P===Xe?void 0:P}return Reflect.get(_,p,y)},getOwnPropertyDescriptor(_,p){var y=Reflect.getOwnPropertyDescriptor(_,p);if(y&&"value"in y){var x=s.get(p);x&&(y.value=c(x))}else if(y===void 0){var b=s.get(p),P=b?.v;if(b!==void 0&&P!==Xe)return{enumerable:!0,configurable:!0,value:P,writable:!0}}return y},has(_,p){if(p===Ri)return!0;var y=s.get(p),x=y!==void 0&&y.v!==Xe||Reflect.has(_,p);if(y!==void 0||se!==null&&(!x||_n(_,p)?.writable)){y===void 0&&(y=d(()=>{var P=x?ui(_[p]):Xe,E=Et(P);return E}),s.set(p,y));var b=c(y);if(b===Xe)return!1}return x},set(_,p,y,x){var b=s.get(p),P=p in _;if(a&&p==="length")for(var E=y;E<b.v;E+=1){var N=s.get(E+"");N!==void 0?O(N,Xe):E in _&&(N=d(()=>Et(Xe)),s.set(E+"",N))}if(b===void 0)(!P||_n(_,p)?.writable)&&(b=d(()=>Et(void 0)),O(b,ui(y)),s.set(p,b));else{P=b.v!==Xe;var A=d(()=>ui(y));O(b,A)}var M=Reflect.getOwnPropertyDescriptor(_,p);if(M?.set&&M.set.call(x,y),!P){if(a&&typeof p=="string"){var Z=s.get("length"),at=Number(p);Number.isInteger(at)&&at>=Z.v&&O(Z,at+1)}Pr(u)}return!0},ownKeys(_){c(u);var p=Reflect.ownKeys(_).filter(b=>{var P=s.get(b);return P===void 0||P.v!==Xe});for(var[y,x]of s)x.v!==Xe&&!(y in _)&&p.push(y);return p},setPrototypeOf(){Tc()}})}function Vo(n){try{if(n!==null&&typeof n=="object"&&Ri in n)return n[Ri]}catch{}return n}function ru(n,r){return Object.is(Vo(n),Vo(r))}var Go,za,Ma,Ca;function su(){if(Go===void 0){Go=window,za=/Firefox/.test(navigator.userAgent);var n=Element.prototype,r=Node.prototype,s=Text.prototype;Ma=_n(r,"firstChild").get,Ca=_n(r,"nextSibling").get,Ho(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Ho(s)&&(s.__t=void 0)}}function en(n=""){return document.createTextNode(n)}function er(n){return Ma.call(n)}function Or(n){return Ca.call(n)}function v(n,r){return er(n)}function st(n,r=!1){{var s=er(n);return s instanceof Comment&&s.data===""?Or(s):s}}function g(n,r=1,s=!1){let a=n;for(;r--;)a=Or(a);return a}function ou(n){n.textContent=""}function Aa(){return!1}function au(n,r){if(r){const s=document.body;n.autofocus=!0,Dn(()=>{document.activeElement===s&&n.focus()})}}let Yo=!1;function lu(){Yo||(Yo=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const r of n.target.elements)r.__on_r?.()})},{capture:!0}))}function os(n){var r=re,s=se;_i(null),zi(null);try{return n()}finally{_i(r),zi(s)}}function Oa(n,r,s,a=s){n.addEventListener(r,()=>os(s));const u=n.__on_r;u?n.__on_r=()=>{u(),a(!0)}:n.__on_r=()=>a(!0),lu()}function Ia(n){se===null&&(re===null&&wc(),bc()),Nn&&yc()}function cu(n,r){var s=r.last;s===null?r.last=r.first=n:(s.next=n,n.prev=s,r.last=n)}function Mi(n,r,s){var a=se;a!==null&&(a.f&wi)!==0&&(n|=wi);var u={ctx:je,deps:null,nodes:null,f:n|pi|$i,first:null,fn:r,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{Sr(u),u.f|=Ys}catch(_){throw Ve(u),_}else r!==null&&In(u);var h=u;if(s&&h.deps===null&&h.teardown===null&&h.nodes===null&&h.first===h.last&&(h.f&$n)===0&&(h=h.first,(n&on)!==0&&(n&sn)!==0&&h!==null&&(h.f|=sn)),h!==null&&(h.parent=a,a!==null&&cu(h,a),re!==null&&(re.f&ti)!==0&&(n&wn)===0)){var d=re;(d.effects??=[]).push(h)}return u}function Lr(){return re!==null&&!qi}function as(n){const r=Mi(ns,null,!1);return ri(r,ni),r.teardown=n,r}function yn(n){Ia();var r=se.f,s=!re&&(r&an)!==0&&(r&Ys)===0;if(s){var a=je;(a.e??=[]).push(n)}else return $a(n)}function $a(n){return Mi(Gs|fa,n,!1)}function uu(n){return Ia(),Mi(ns|fa,n,!0)}function Da(n){Oi.ensure();const r=Mi(wn|$n,n,!0);return()=>{Ve(r)}}function du(n){Oi.ensure();const r=Mi(wn|$n,n,!0);return(s={})=>new Promise(a=>{s.outro?Mn(r,()=>{Ve(r),a(void 0)}):(Ve(r),a(void 0))})}function ls(n){return Mi(Gs,n,!1)}function hu(n){return Mi(Js|$n,n,!0)}function Qs(n,r=0){return Mi(ns|r,n,!0)}function G(n,r=[],s=[],a=[]){ka(a,r,s,u=>{Mi(ns,()=>n(...u.map(c)),!0)})}function rr(n,r=0){var s=Mi(on|r,n,!0);return s}function Na(n,r=0){var s=Mi(da|r,n,!0);return s}function vi(n){return Mi(an|$n,n,!0)}function Za(n){var r=n.teardown;if(r!==null){const s=Nn,a=re;Jo(!0),_i(null);try{r.call(null)}finally{Jo(s),_i(a)}}}function Ba(n,r=!1){var s=n.first;for(n.first=n.last=null;s!==null;){const u=s.ac;u!==null&&os(()=>{u.abort(Yn)});var a=s.next;(s.f&wn)!==0?s.parent=null:Ve(s,r),s=a}}function fu(n){for(var r=n.first;r!==null;){var s=r.next;(r.f&an)===0&&Ve(r),r=s}}function Ve(n,r=!0){var s=!1;(r||(n.f&ha)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(vu(n.nodes.start,n.nodes.end),s=!0),Ba(n,r&&!s),ts(n,0),ri(n,tn);var a=n.nodes&&n.nodes.t;if(a!==null)for(const h of a)h.stop();Za(n);var u=n.parent;u!==null&&u.first!==null&&qa(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function vu(n,r){for(;n!==null;){var s=n===r?null:Or(n);n.remove(),n=s}}function qa(n){var r=n.parent,s=n.prev,a=n.next;s!==null&&(s.next=a),a!==null&&(a.prev=s),r!==null&&(r.first===n&&(r.first=a),r.last===n&&(r.last=s))}function Mn(n,r,s=!0){var a=[];Ra(n,a,!0);var u=()=>{s&&Ve(n),r&&r()},h=a.length;if(h>0){var d=()=>--h||u();for(var _ of a)_.out(d)}else u()}function Ra(n,r,s){if((n.f&wi)===0){n.f^=wi;var a=n.nodes&&n.nodes.t;if(a!==null)for(const _ of a)(_.is_global||s)&&r.push(_);for(var u=n.first;u!==null;){var h=u.next,d=(u.f&sn)!==0||(u.f&an)!==0&&(n.f&on)!==0;Ra(u,r,d?s:!1),u=h}}}function to(n){ja(n,!0)}function ja(n,r){if((n.f&wi)!==0){n.f^=wi,(n.f&ni)===0&&(ri(n,pi),In(n));for(var s=n.first;s!==null;){var a=s.next,u=(s.f&sn)!==0||(s.f&an)!==0;ja(s,u?r:!1),s=a}var h=n.nodes&&n.nodes.t;if(h!==null)for(const d of h)(d.is_global||r)&&d.in()}}function Fa(n,r){if(n.nodes)for(var s=n.nodes.start,a=n.nodes.end;s!==null;){var u=s===a?null:Or(s);r.append(s),s=u}}let Cn=!1;function Qr(n){Cn=n}let Nn=!1;function Jo(n){Nn=n}let re=null,qi=!1;function _i(n){re=n}let se=null;function zi(n){se=n}let nn=null;function Ha(n){re!==null&&(nn===null?nn=[n]:nn.push(n))}let ci=null,yi=0,ki=null;function _u(n){ki=n}let Wa=1,Er=0,An=Er;function Ko(n){An=n}function Ua(){return++Wa}function Ir(n){var r=n.f;if((r&pi)!==0)return!0;if(r&ti&&(n.f&=~On),(r&ji)!==0){var s=n.deps;if(s!==null)for(var a=s.length,u=0;u<a;u++){var h=s[u];if(Ir(h)&&La(h),h.wv>n.wv)return!0}(r&$i)!==0&&Ei===null&&ri(n,ni)}return!1}function Va(n,r,s=!0){var a=n.reactions;if(a!==null&&!nn?.includes(n))for(var u=0;u<a.length;u++){var h=a[u];(h.f&ti)!==0?Va(h,r,!1):r===h&&(s?ri(h,pi):(h.f&ni)!==0&&ri(h,ji),In(h))}}function Ga(n){var r=ci,s=yi,a=ki,u=re,h=nn,d=je,_=qi,p=An,y=n.f;ci=null,yi=0,ki=null,re=(y&(an|wn))===0?n:null,nn=null,Kn(n.ctx),qi=!1,An=++Er,n.ac!==null&&(os(()=>{n.ac.abort(Yn)}),n.ac=null);try{n.f|=Bs;var x=n.fn,b=x(),P=n.deps;if(ci!==null){var E;if(ts(n,yi),P!==null&&yi>0)for(P.length=yi+ci.length,E=0;E<ci.length;E++)P[yi+E]=ci[E];else n.deps=P=ci;if(Lr()&&(n.f&$i)!==0)for(E=yi;E<P.length;E++)(P[E].reactions??=[]).push(n)}else P!==null&&yi<P.length&&(ts(n,yi),P.length=yi);if(Cr()&&ki!==null&&!qi&&P!==null&&(n.f&(ti|ji|pi))===0)for(E=0;E<ki.length;E++)Va(ki[E],n);return u!==null&&u!==n&&(Er++,ki!==null&&(a===null?a=ki:a.push(...ki))),(n.f&pn)!==0&&(n.f^=pn),b}catch(N){return ba(N)}finally{n.f^=Bs,ci=r,yi=s,ki=a,re=u,nn=h,Kn(d),qi=_,An=p}}function pu(n,r){let s=r.reactions;if(s!==null){var a=dc.call(s,n);if(a!==-1){var u=s.length-1;u===0?s=r.reactions=null:(s[a]=s[u],s.pop())}}s===null&&(r.f&ti)!==0&&(ci===null||!ci.includes(r))&&(ri(r,ji),(r.f&$i)!==0&&(r.f^=$i,r.f&=~On),Ta(r),ts(r,0))}function ts(n,r){var s=n.deps;if(s!==null)for(var a=r;a<s.length;a++)pu(n,s[a])}function Sr(n){var r=n.f;if((r&tn)===0){ri(n,ni);var s=se,a=Cn;se=n,Cn=!0;try{(r&(on|da))!==0?fu(n):Ba(n),Za(n);var u=Ga(n);n.teardown=typeof u=="function"?u:null,n.wv=Wa;var h;Ns&&Hc&&(n.f&pi)!==0&&n.deps}finally{Cn=a,se=s}}}async function mu(){await Promise.resolve(),Vc()}function c(n){var r=n.f,s=(r&ti)!==0;if(re!==null&&!qi){var a=se!==null&&(se.f&tn)!==0;if(!a&&!nn?.includes(n)){var u=re.deps;if((re.f&Bs)!==0)n.rv<Er&&(n.rv=Er,ci===null&&u!==null&&u[yi]===n?yi++:ci===null?ci=[n]:ci.includes(n)||ci.push(n));else{(re.deps??=[]).push(n);var h=n.reactions;h===null?n.reactions=[re]:h.includes(re)||h.push(re)}}}if(Nn){if(mn.has(n))return mn.get(n);if(s){var d=n,_=d.v;return((d.f&ni)===0&&d.reactions!==null||Ja(d))&&(_=Xs(d)),mn.set(d,_),_}}else s&&(!Ei?.has(n)||ce?.is_fork&&!Lr())&&(d=n,Ir(d)&&La(d),Cn&&Lr()&&(d.f&$i)===0&&Ya(d));if(Ei?.has(n))return Ei.get(n);if((n.f&pn)!==0)throw n.v;return n.v}function Ya(n){if(n.deps!==null){n.f^=$i;for(const r of n.deps)(r.reactions??=[]).push(n),(r.f&ti)!==0&&(r.f&$i)===0&&Ya(r)}}function Ja(n){if(n.v===Xe)return!0;if(n.deps===null)return!1;for(const r of n.deps)if(mn.has(r)||(r.f&ti)!==0&&Ja(r))return!0;return!1}function bn(n){var r=qi;try{return qi=!0,n()}finally{qi=r}}const gu=-7169;function ri(n,r){n.f=n.f&gu|r}function Gn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Ri in n)js(n);else if(!Array.isArray(n))for(let r in n){const s=n[r];typeof s=="object"&&s&&Ri in s&&js(s)}}}function js(n,r=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!r.has(n)){r.add(n),n instanceof Date&&n.getTime();for(let a in n)try{js(n[a],r)}catch{}const s=Vs(n);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const a=ca(s);for(let u in a){const h=a[u].get;if(h)try{h.call(n)}catch{}}}}}function yu(n){return n.endsWith("capture")&&n!=="gotpointercapture"&&n!=="lostpointercapture"}const bu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function wu(n){return bu.includes(n)}const xu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Pu(n){return n=n.toLowerCase(),xu[n]??n}const ku=["touchstart","touchmove"];function Tu(n){return ku.includes(n)}const Ka=new Set,Fs=new Set;function Xa(n,r,s,a={}){function u(h){if(a.capture||mr.call(r,h),!h.cancelBubble)return os(()=>s?.call(this,h))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Dn(()=>{r.addEventListener(n,u,a)}):r.addEventListener(n,u,a),u}function As(n,r,s,a,u){var h={capture:a,passive:u},d=Xa(n,r,s,h);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&as(()=>{r.removeEventListener(n,d,h)})}function Zn(n){for(var r=0;r<n.length;r++)Ka.add(n[r]);for(var s of Fs)s(n)}let Xo=null;function mr(n){var r=this,s=r.ownerDocument,a=n.type,u=n.composedPath?.()||[],h=u[0]||n.target;Xo=n;var d=0,_=Xo===n&&n.__root;if(_){var p=u.indexOf(_);if(p!==-1&&(r===document||r===window)){n.__root=r;return}var y=u.indexOf(r);if(y===-1)return;p<=y&&(d=p)}if(h=u[d]||n.target,h!==r){hc(n,"currentTarget",{configurable:!0,get(){return h||s}});var x=re,b=se;_i(null),zi(null);try{for(var P,E=[];h!==null;){var N=h.assignedSlot||h.parentNode||h.host||null;try{var A=h["__"+a];A!=null&&(!h.disabled||n.target===h)&&A.call(h,n)}catch(M){P?E.push(M):P=M}if(n.cancelBubble||N===r||N===null)break;h=N}if(P){for(let M of E)queueMicrotask(()=>{throw M});throw P}}finally{n.__root=r,delete n.currentTarget,_i(x),zi(b)}}}function Qa(n){var r=document.createElement("template");return r.innerHTML=n.replaceAll("<!>","<!---->"),r.content}function zr(n,r){var s=se;s.nodes===null&&(s.nodes={start:n,end:r,a:null,t:null})}function D(n,r){var s=(r&Dc)!==0,a=(r&Nc)!==0,u,h=!n.startsWith("<!>");return()=>{u===void 0&&(u=Qa(h?n:"<!>"+n),s||(u=er(u)));var d=a||za?document.importNode(u,!0):u.cloneNode(!0);if(s){var _=er(d),p=d.lastChild;zr(_,p)}else zr(d,d);return d}}function Lu(n,r,s="svg"){var a=!n.startsWith("<!>"),u=`<${s}>${a?n:"<!>"+n}</${s}>`,h;return()=>{if(!h){var d=Qa(u),_=er(d);h=er(_)}var p=h.cloneNode(!0);return zr(p,p),p}}function tl(n,r){return Lu(n,r,"svg")}function Dt(){var n=document.createDocumentFragment(),r=document.createComment(""),s=en();return n.append(r,s),zr(r,s),n}function S(n,r){n!==null&&n.before(r)}function z(n,r){var s=r==null?"":typeof r=="object"?r+"":r;s!==(n.__t??=n.nodeValue)&&(n.__t=s,n.nodeValue=s+"")}function Eu(n,r){return Su(n,r)}const Un=new Map;function Su(n,{target:r,anchor:s,props:a={},events:u,context:h,intro:d=!0}){su();var _=new Set,p=b=>{for(var P=0;P<b.length;P++){var E=b[P];if(!_.has(E)){_.add(E);var N=Tu(E);r.addEventListener(E,mr,{passive:N});var A=Un.get(E);A===void 0?(document.addEventListener(E,mr,{passive:N}),Un.set(E,1)):Un.set(E,A+1)}}};p(is(Ka)),Fs.add(p);var y=void 0,x=du(()=>{var b=s??r.appendChild(en());return Kc(b,{pending:()=>{}},P=>{if(h){Fi({});var E=je;E.c=h}u&&(a.$$events=u),y=n(P,a)||{},h&&Hi()}),()=>{for(var P of _){r.removeEventListener(P,mr);var E=Un.get(P);--E===0?(document.removeEventListener(P,mr),Un.delete(P)):Un.set(P,E)}Fs.delete(p),b!==s&&b.parentNode?.removeChild(b)}});return zu.set(y,x),y}let zu=new WeakMap;class cs{anchor;#t=new Map;#e=new Map;#n=new Map;#i=new Set;#l=!0;constructor(r,s=!0){this.anchor=r,this.#l=s}#s=()=>{var r=ce;if(this.#t.has(r)){var s=this.#t.get(r),a=this.#e.get(s);if(a)to(a),this.#i.delete(s);else{var u=this.#n.get(s);u&&(this.#e.set(s,u.effect),this.#n.delete(s),u.fragment.lastChild.remove(),this.anchor.before(u.fragment),a=u.effect)}for(const[h,d]of this.#t){if(this.#t.delete(h),h===r)break;const _=this.#n.get(d);_&&(Ve(_.effect),this.#n.delete(d))}for(const[h,d]of this.#e){if(h===s||this.#i.has(h))continue;const _=()=>{if(Array.from(this.#t.values()).includes(h)){var y=document.createDocumentFragment();Fa(d,y),y.append(en()),this.#n.set(h,{effect:d,fragment:y})}else Ve(d);this.#i.delete(h),this.#e.delete(h)};this.#l||!a?(this.#i.add(h),Mn(d,_,!1)):_()}}};#r=r=>{this.#t.delete(r);const s=Array.from(this.#t.values());for(const[a,u]of this.#n)s.includes(a)||(Ve(u.effect),this.#n.delete(a))};ensure(r,s){var a=ce,u=Aa();if(s&&!this.#e.has(r)&&!this.#n.has(r))if(u){var h=document.createDocumentFragment(),d=en();h.append(d),this.#n.set(r,{effect:vi(()=>s(d)),fragment:h})}else this.#e.set(r,vi(()=>s(this.anchor)));if(this.#t.set(a,r),u){for(const[_,p]of this.#e)_===r?a.skipped_effects.delete(p):a.skipped_effects.add(p);for(const[_,p]of this.#n)_===r?a.skipped_effects.delete(p.effect):a.skipped_effects.add(p.effect);a.oncommit(this.#s),a.ondiscard(this.#r)}else this.#s()}}function tt(n,r,s=!1){var a=new cs(n),u=s?sn:0;function h(d,_){a.ensure(d,_)}rr(()=>{var d=!1;r((_,p=!0)=>{d=!0,h(p,_)}),d||h(!1,null)},u)}function Qe(n,r){return r}function Mu(n,r,s){for(var a=[],u=r.length,h,d=r.length,_=0;_<u;_++){let b=r[_];Mn(b,()=>{if(h){if(h.pending.delete(b),h.done.add(b),h.pending.size===0){var P=n.outrogroups;Hs(is(h.done)),P.delete(h),P.size===0&&(n.outrogroups=null)}}else d-=1},!1)}if(d===0){var p=a.length===0&&s!==null;if(p){var y=s,x=y.parentNode;ou(x),x.append(y),n.items.clear()}Hs(r,!p)}else h={pending:new Set(r),done:new Set},(n.outrogroups??=new Set).add(h)}function Hs(n,r=!0){for(var s=0;s<n.length;s++)Ve(n[s],r)}var Qo;function Oe(n,r,s,a,u,h=null){var d=n,_=new Map,p=(r&_a)!==0;if(p){var y=n;d=y.appendChild(en())}var x=null,b=Ks(()=>{var Z=s();return Us(Z)?Z:Z==null?[]:is(Z)}),P,E=!0;function N(){M.fallback=x,Cu(M,P,d,r,a),x!==null&&(P.length===0?(x.f&Qi)===0?to(x):(x.f^=Qi,gr(x,null,d)):Mn(x,()=>{x=null}))}var A=rr(()=>{P=c(b);for(var Z=P.length,at=new Set,j=ce,R=Aa(),K=0;K<Z;K+=1){var Y=P[K],J=a(Y,K),F=E?null:_.get(J);F?(F.v&&Qn(F.v,Y),F.i&&Qn(F.i,K),R&&j.skipped_effects.delete(F.e)):(F=Au(_,E?d:Qo??=en(),Y,J,K,u,r,s),E||(F.e.f|=Qi),_.set(J,F)),at.add(J)}if(Z===0&&h&&!x&&(E?x=vi(()=>h(d)):(x=vi(()=>h(Qo??=en())),x.f|=Qi)),!E)if(R){for(const[ot,lt]of _)at.has(ot)||j.skipped_effects.add(lt.e);j.oncommit(N),j.ondiscard(()=>{})}else N();c(b)}),M={effect:A,items:_,outrogroups:null,fallback:x};E=!1}function Cu(n,r,s,a,u){var h=(a&Mc)!==0,d=r.length,_=n.items,p=n.effect.first,y,x=null,b,P=[],E=[],N,A,M,Z;if(h)for(Z=0;Z<d;Z+=1)N=r[Z],A=u(N,Z),M=_.get(A).e,(M.f&Qi)===0&&(M.nodes?.a?.measure(),(b??=new Set).add(M));for(Z=0;Z<d;Z+=1){if(N=r[Z],A=u(N,Z),M=_.get(A).e,n.outrogroups!==null)for(const lt of n.outrogroups)lt.pending.delete(M),lt.done.delete(M);if((M.f&Qi)!==0)if(M.f^=Qi,M===p)gr(M,null,s);else{var at=x?x.next:p;M===n.effect.last&&(n.effect.last=M.prev),M.prev&&(M.prev.next=M.next),M.next&&(M.next.prev=M.prev),vn(n,x,M),vn(n,M,at),gr(M,at,s),x=M,P=[],E=[],p=x.next;continue}if((M.f&wi)!==0&&(to(M),h&&(M.nodes?.a?.unfix(),(b??=new Set).delete(M))),M!==p){if(y!==void 0&&y.has(M)){if(P.length<E.length){var j=E[0],R;x=j.prev;var K=P[0],Y=P[P.length-1];for(R=0;R<P.length;R+=1)gr(P[R],j,s);for(R=0;R<E.length;R+=1)y.delete(E[R]);vn(n,K.prev,Y.next),vn(n,x,K),vn(n,Y,j),p=j,x=Y,Z-=1,P=[],E=[]}else y.delete(M),gr(M,p,s),vn(n,M.prev,M.next),vn(n,M,x===null?n.effect.first:x.next),vn(n,x,M),x=M;continue}for(P=[],E=[];p!==null&&p!==M;)(y??=new Set).add(p),E.push(p),p=p.next;if(p===null)continue}(M.f&Qi)===0&&P.push(M),x=M,p=M.next}if(n.outrogroups!==null){for(const lt of n.outrogroups)lt.pending.size===0&&(Hs(is(lt.done)),n.outrogroups?.delete(lt));n.outrogroups.size===0&&(n.outrogroups=null)}if(p!==null||y!==void 0){var J=[];if(y!==void 0)for(M of y)(M.f&wi)===0&&J.push(M);for(;p!==null;)(p.f&wi)===0&&p!==n.fallback&&J.push(p),p=p.next;var F=J.length;if(F>0){var ot=(a&_a)!==0&&d===0?s:null;if(h){for(Z=0;Z<F;Z+=1)J[Z].nodes?.a?.measure();for(Z=0;Z<F;Z+=1)J[Z].nodes?.a?.fix()}Mu(n,J,ot)}}h&&Dn(()=>{if(b!==void 0)for(M of b)M.nodes?.a?.apply()})}function Au(n,r,s,a,u,h,d,_){var p=(d&Sc)!==0?(d&Cc)===0?iu(s,!1,!1):gn(s):null,y=(d&zc)!==0?gn(u):null;return{v:p,i:y,e:vi(()=>(h(r,p??s,y??u,_),()=>{n.delete(a)}))}}function gr(n,r,s){if(n.nodes)for(var a=n.nodes.start,u=n.nodes.end,h=r&&(r.f&Qi)===0?r.nodes.start:s;a!==null;){var d=Or(a);if(h.before(a),a===u)return;a=d}}function vn(n,r,s){r===null?n.effect.first=s:r.next=s,s===null?n.effect.last=r:s.prev=r}function ye(n,r,s,a,u){var h=r.$$slots?.[s],d=!1;h===!0&&(h=r.children,d=!0),h===void 0||h(n,d?()=>a:a)}function Ou(n,r,...s){var a=new cs(n);rr(()=>{const u=r()??null;a.ensure(u,u&&(h=>u(h,...s)))},sn)}function rn(n,r,s){var a=new cs(n);rr(()=>{var u=r()??null;a.ensure(u,u&&(h=>s(h,u)))},sn)}function Iu(n,r,s,a,u,h){var d=null,_=n,p=new cs(_,!1);rr(()=>{const y=r()||null;var x=Bc;if(y===null){p.ensure(null,null);return}return p.ensure(y,b=>{if(y){if(d=document.createElementNS(x,y),zr(d,d),a){var P=d.appendChild(en());a(d,P)}se.nodes.end=d,b.before(d)}}),()=>{}},sn),as(()=>{})}function $u(n,r){var s=void 0,a;Na(()=>{s!==(s=r())&&(a&&(Ve(a),a=null),s&&(a=vi(()=>{ls(()=>s(n))})))})}function el(n){var r,s,a="";if(typeof n=="string"||typeof n=="number")a+=n;else if(typeof n=="object")if(Array.isArray(n)){var u=n.length;for(r=0;r<u;r++)n[r]&&(s=el(n[r]))&&(a&&(a+=" "),a+=s)}else for(s in n)n[s]&&(a&&(a+=" "),a+=s);return a}function Du(){for(var n,r,s=0,a="",u=arguments.length;s<u;s++)(n=arguments[s])&&(r=el(n))&&(a&&(a+=" "),a+=r);return a}function Nu(n){return typeof n=="object"?Du(n):n??""}const ta=[...` 	
\r\fÂ \v\uFEFF`];function Zu(n,r,s){var a=n==null?"":""+n;if(r&&(a=a?a+" "+r:r),s){for(var u in s)if(s[u])a=a?a+" "+u:u;else if(a.length)for(var h=u.length,d=0;(d=a.indexOf(u,d))>=0;){var _=d+h;(d===0||ta.includes(a[d-1]))&&(_===a.length||ta.includes(a[_]))?a=(d===0?"":a.substring(0,d))+a.substring(_+1):d=_}}return a===""?null:a}function ea(n,r=!1){var s=r?" !important;":";",a="";for(var u in n){var h=n[u];h!=null&&h!==""&&(a+=" "+u+": "+h+s)}return a}function Os(n){return n[0]!=="-"||n[1]!=="-"?n.toLowerCase():n}function Bu(n,r){if(r){var s="",a,u;if(Array.isArray(r)?(a=r[0],u=r[1]):a=r,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var h=!1,d=0,_=!1,p=[];a&&p.push(...Object.keys(a).map(Os)),u&&p.push(...Object.keys(u).map(Os));var y=0,x=-1;const A=n.length;for(var b=0;b<A;b++){var P=n[b];if(_?P==="/"&&n[b-1]==="*"&&(_=!1):h?h===P&&(h=!1):P==="/"&&n[b+1]==="*"?_=!0:P==='"'||P==="'"?h=P:P==="("?d++:P===")"&&d--,!_&&h===!1&&d===0){if(P===":"&&x===-1)x=b;else if(P===";"||b===A-1){if(x!==-1){var E=Os(n.substring(y,x).trim());if(!p.includes(E)){P!==";"&&b++;var N=n.substring(y,b).trim();s+=" "+N+";"}}y=b+1,x=-1}}}}return a&&(s+=ea(a)),u&&(s+=ea(u,!0)),s=s.trim(),s===""?null:s}return n==null?null:String(n)}function Si(n,r,s,a,u,h){var d=n.__className;if(d!==s||d===void 0){var _=Zu(s,a,h);_==null?n.removeAttribute("class"):r?n.className=_:n.setAttribute("class",_),n.__className=s}else if(h&&u!==h)for(var p in h){var y=!!h[p];(u==null||y!==!!u[p])&&n.classList.toggle(p,y)}return h}function Is(n,r={},s,a){for(var u in s){var h=s[u];r[u]!==h&&(s[u]==null?n.style.removeProperty(u):n.style.setProperty(u,h,a))}}function ii(n,r,s,a){var u=n.__style;if(u!==r){var h=Bu(r,a);h==null?n.removeAttribute("style"):n.style.cssText=h,n.__style=r}else a&&(Array.isArray(a)?(Is(n,s?.[0],a[0]),Is(n,s?.[1],a[1],"important")):Is(n,s,a));return a}function es(n,r,s=!1){if(n.multiple){if(r==null)return;if(!Us(r))return Rc();for(var a of n.options)a.selected=r.includes(kr(a));return}for(a of n.options){var u=kr(a);if(ru(u,r)){a.selected=!0;return}}(!s||r!==void 0)&&(n.selectedIndex=-1)}function il(n){var r=new MutationObserver(()=>{es(n,n.__value)});r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),as(()=>{r.disconnect()})}function nl(n,r,s=r){var a=new WeakSet,u=!0;Oa(n,"change",h=>{var d=h?"[selected]":":checked",_;if(n.multiple)_=[].map.call(n.querySelectorAll(d),kr);else{var p=n.querySelector(d)??n.querySelector("option:not([disabled])");_=p&&kr(p)}s(_),ce!==null&&a.add(ce)}),ls(()=>{var h=r();if(n===document.activeElement){var d=wr??ce;if(a.has(d))return}if(es(n,h,u),u&&h===void 0){var _=n.querySelector(":checked");_!==null&&(h=kr(_),s(h))}n.__value=h,u=!1}),il(n)}function kr(n){return"__value"in n?n.__value:n.value}const _r=Symbol("class"),pr=Symbol("style"),rl=Symbol("is custom element"),sl=Symbol("is html");function qu(n,r){r?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function $e(n,r,s,a){var u=ol(n);u[r]!==(u[r]=s)&&(r==="loading"&&(n[pc]=s),s==null?n.removeAttribute(r):typeof s!="string"&&al(n).includes(r)?n[r]=s:n.setAttribute(r,s))}function Ru(n,r,s,a,u=!1,h=!1){var d=ol(n),_=d[rl],p=!d[sl],y=r||{},x=n.tagName==="OPTION";for(var b in r)b in s||(s[b]=null);s.class?s.class=Nu(s.class):s[_r]&&(s.class=null),s[pr]&&(s.style??=null);var P=al(n);for(const R in s){let K=s[R];if(x&&R==="value"&&K==null){n.value=n.__value="",y[R]=K;continue}if(R==="class"){var E=n.namespaceURI==="http://www.w3.org/1999/xhtml";Si(n,E,K,a,r?.[_r],s[_r]),y[R]=K,y[_r]=s[_r];continue}if(R==="style"){ii(n,K,r?.[pr],s[pr]),y[R]=K,y[pr]=s[pr];continue}var N=y[R];if(!(K===N&&!(K===void 0&&n.hasAttribute(R)))){y[R]=K;var A=R[0]+R[1];if(A!=="$$")if(A==="on"){const Y={},J="$$"+R;let F=R.slice(2);var M=wu(F);if(yu(F)&&(F=F.slice(0,-7),Y.capture=!0),!M&&N){if(K!=null)continue;n.removeEventListener(F,y[J],Y),y[J]=null}if(K!=null)if(M)n[`__${F}`]=K,Zn([F]);else{let ot=function(lt){y[R].call(this,lt)};var j=ot;y[J]=Xa(F,n,ot,Y)}else M&&(n[`__${F}`]=void 0)}else if(R==="style")$e(n,R,K);else if(R==="autofocus")au(n,!!K);else if(!_&&(R==="__value"||R==="value"&&K!=null))n.value=n.__value=K;else if(R==="selected"&&x)qu(n,K);else{var Z=R;p||(Z=Pu(Z));var at=Z==="defaultValue"||Z==="defaultChecked";if(K==null&&!_&&!at)if(d[R]=null,Z==="value"||Z==="checked"){let Y=n;const J=r===void 0;if(Z==="value"){let F=Y.defaultValue;Y.removeAttribute(Z),Y.defaultValue=F,Y.value=Y.__value=J?F:null}else{let F=Y.defaultChecked;Y.removeAttribute(Z),Y.defaultChecked=F,Y.checked=J?F:!1}}else n.removeAttribute(R);else at||P.includes(Z)&&(_||typeof K!="string")?(n[Z]=K,Z in d&&(d[Z]=Xe)):typeof K!="function"&&$e(n,Z,K)}}}return y}function ia(n,r,s=[],a=[],u=[],h,d=!1,_=!1){ka(u,s,a,p=>{var y=void 0,x={},b=n.nodeName==="SELECT",P=!1;if(Na(()=>{var N=r(...p.map(c)),A=Ru(n,y,N,h,d,_);P&&b&&"value"in N&&es(n,N.value);for(let Z of Object.getOwnPropertySymbols(x))N[Z]||Ve(x[Z]);for(let Z of Object.getOwnPropertySymbols(N)){var M=N[Z];Z.description===qc&&(!y||M!==y[Z])&&(x[Z]&&Ve(x[Z]),x[Z]=vi(()=>$u(n,()=>M))),A[Z]=M}y=A}),b){var E=n;ls(()=>{es(E,y.value,!0),il(E)})}P=!0})}function ol(n){return n.__attributes??={[rl]:n.nodeName.includes("-"),[sl]:n.namespaceURI===Zc}}var na=new Map;function al(n){var r=n.getAttribute("is")||n.nodeName,s=na.get(r);if(s)return s;na.set(r,s=[]);for(var a,u=n,h=Element.prototype;h!==u;){a=ca(u);for(var d in a)a[d].set&&s.push(d);u=Vs(u)}return s}function Ii(n,r,s=r){var a=new WeakSet;Oa(n,"input",async u=>{var h=u?n.defaultValue:n.value;if(h=$s(n)?Ds(h):h,s(h),ce!==null&&a.add(ce),await mu(),h!==(h=r())){var d=n.selectionStart,_=n.selectionEnd,p=n.value.length;if(n.value=h??"",_!==null){var y=n.value.length;d===_&&_===p&&y>p?(n.selectionStart=y,n.selectionEnd=y):(n.selectionStart=d,n.selectionEnd=Math.min(_,y))}}}),bn(r)==null&&n.value&&(s($s(n)?Ds(n.value):n.value),ce!==null&&a.add(ce)),Qs(()=>{var u=r();if(n===document.activeElement){var h=wr??ce;if(a.has(h))return}$s(n)&&u===Ds(n.value)||n.type==="date"&&!u&&!n.value||u!==n.value&&(n.value=u??"")})}function $s(n){var r=n.type;return r==="number"||r==="range"}function Ds(n){return n===""?null:+n}function ra(n,r){return n===r||n?.[Ri]===r}function ju(n={},r,s,a){return ls(()=>{var u,h;return Qs(()=>{u=h,h=[],bn(()=>{n!==s(...h)&&(r(n,...h),u&&ra(s(...u),n)&&r(null,...u))})}),()=>{Dn(()=>{h&&ra(s(...h),n)&&r(null,...h)})}}),n}function Fu(n=!1){const r=je,s=r.l.u;if(!s)return;let a=()=>Gn(r.s);if(n){let u=0,h={};const d=Ar(()=>{let _=!1;const p=r.s;for(const y in p)p[y]!==h[y]&&(h[y]=p[y],_=!0);return _&&u++,u});a=()=>c(d)}s.b.length&&uu(()=>{sa(r,a),Zs(s.b)}),yn(()=>{const u=bn(()=>s.m.map(_c));return()=>{for(const h of u)typeof h=="function"&&h()}}),s.a.length&&yn(()=>{sa(r,a),Zs(s.a)})}function sa(n,r){if(n.l.s)for(const s of n.l.s)c(s);r()}let Jr=!1;function Hu(n){var r=Jr;try{return Jr=!1,[n(),Jr]}finally{Jr=r}}const Wu={get(n,r){if(!n.exclude.includes(r))return c(n.version),r in n.special?n.special[r]():n.props[r]},set(n,r,s){if(!(r in n.special)){var a=se;try{zi(n.parent_effect),n.special[r]=bi({get[r](){return n.props[r]}},r,pa)}finally{zi(a)}}return n.special[r](s),tr(n.version),!0},getOwnPropertyDescriptor(n,r){if(!n.exclude.includes(r)&&r in n.props)return{enumerable:!0,configurable:!0,value:n.props[r]}},deleteProperty(n,r){return n.exclude.includes(r)||(n.exclude.push(r),tr(n.version)),!0},has(n,r){return n.exclude.includes(r)?!1:r in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(r=>!n.exclude.includes(r))}};function fe(n,r){return new Proxy({props:n,exclude:r,special:{},version:gn(0),parent_effect:se},Wu)}const Uu={get(n,r){let s=n.props.length;for(;s--;){let a=n.props[s];if(vr(a)&&(a=a()),typeof a=="object"&&a!==null&&r in a)return a[r]}},set(n,r,s){let a=n.props.length;for(;a--;){let u=n.props[a];vr(u)&&(u=u());const h=_n(u,r);if(h&&h.set)return h.set(s),!0}return!1},getOwnPropertyDescriptor(n,r){let s=n.props.length;for(;s--;){let a=n.props[s];if(vr(a)&&(a=a()),typeof a=="object"&&a!==null&&r in a){const u=_n(a,r);return u&&!u.configurable&&(u.configurable=!0),u}}},has(n,r){if(r===Ri||r===va)return!1;for(let s of n.props)if(vr(s)&&(s=s()),s!=null&&r in s)return!0;return!1},ownKeys(n){const r=[];for(let s of n.props)if(vr(s)&&(s=s()),!!s){for(const a in s)r.includes(a)||r.push(a);for(const a of Object.getOwnPropertySymbols(s))r.includes(a)||r.push(a)}return r}};function Pe(...n){return new Proxy({props:n},Uu)}function bi(n,r,s,a){var u=!nr||(s&Oc)!==0,h=(s&Ic)!==0,d=(s&$c)!==0,_=a,p=!0,y=()=>(p&&(p=!1,_=d?bn(a):a),_),x;if(h){var b=Ri in n||va in n;x=_n(n,r)?.set??(b&&r in n?j=>n[r]=j:void 0)}var P,E=!1;h?[P,E]=Hu(()=>n[r]):P=n[r],P===void 0&&a!==void 0&&(P=y(),x&&(u&&Pc(),x(P)));var N;if(u?N=()=>{var j=n[r];return j===void 0?y():(p=!0,j)}:N=()=>{var j=n[r];return j!==void 0&&(_=void 0),j===void 0?_:j},u&&(s&pa)===0)return N;if(x){var A=n.$$legacy;return(function(j,R){return arguments.length>0?((!u||!R||A||E)&&x(R?N():j),j):N()})}var M=!1,Z=((s&Ac)!==0?Ar:Ks)(()=>(M=!1,N()));h&&c(Z);var at=se;return(function(j,R){if(arguments.length>0){const K=R?c(Z):u&&h?ui(j):j;return O(Z,K),M=!0,_!==void 0&&(_=K),j}return Nn&&M||(at.f&tn)!==0?Z.v:c(Z)})}function Vu(n){je===null&&mc(),nr&&je.l!==null?Gu(je).m.push(n):yn(()=>{const r=bn(n);if(typeof r=="function")return r})}function Gu(n){var r=n.l;return r.u??={a:[],b:[],m:[]}}const Yu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Yu);Wc();const Ju={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ku=tl("<svg><!><!></svg>");function ke(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]),a=fe(s,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Fi(r,!1);let u=bi(r,"name",8,void 0),h=bi(r,"color",8,"currentColor"),d=bi(r,"size",8,24),_=bi(r,"strokeWidth",8,2),p=bi(r,"absoluteStrokeWidth",8,!1),y=bi(r,"iconNode",24,()=>[]);const x=(...N)=>N.filter((A,M,Z)=>!!A&&Z.indexOf(A)===M).join(" ");Fu();var b=Ku();ia(b,(N,A)=>({...Ju,...a,width:d(),height:d(),stroke:h(),"stroke-width":N,class:A}),[()=>(Gn(p()),Gn(_()),Gn(d()),bn(()=>p()?Number(_())*24/Number(d()):_())),()=>(Gn(u()),Gn(s),bn(()=>x("lucide-icon","lucide",u()?`lucide-${u()}`:"",s.class)))]);var P=v(b);Oe(P,1,y,Qe,(N,A)=>{var M=ne(()=>br(c(A),2));let Z=()=>c(M)[0],at=()=>c(M)[1];var j=Dt(),R=st(j);Iu(R,Z,!0,(K,Y)=>{ia(K,()=>({...at()}))}),S(N,j)});var E=g(P);ye(E,r,"default",{}),S(n,b),Hi()}function Xu(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];ke(n,Pe({name:"book"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function Ws(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];ke(n,Pe({name:"calendar"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function ll(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"}],["circle",{cx:"7",cy:"17",r:"2"}],["path",{d:"M9 17h6"}],["circle",{cx:"17",cy:"17",r:"2"}]];ke(n,Pe({name:"car"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function Qu(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M20 6 9 17l-5-5"}]];ke(n,Pe({name:"check"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function cl(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m15 18-6-6 6-6"}]];ke(n,Pe({name:"chevron-left"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function ul(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m9 18 6-6-6-6"}]];ke(n,Pe({name:"chevron-right"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function oa(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 6v6l4 2"}],["circle",{cx:"12",cy:"12",r:"10"}]];ke(n,Pe({name:"clock"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function td(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}],["path",{d:"M16 14v6"}],["path",{d:"M8 14v6"}],["path",{d:"M12 16v6"}]];ke(n,Pe({name:"cloud-rain"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function ed(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}],["path",{d:"M8 15h.01"}],["path",{d:"M8 19h.01"}],["path",{d:"M12 17h.01"}],["path",{d:"M12 21h.01"}],["path",{d:"M16 15h.01"}],["path",{d:"M16 19h.01"}]];ke(n,Pe({name:"cloud-snow"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function id(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];ke(n,Pe({name:"cloud"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function eo(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["line",{x1:"12",x2:"12",y1:"2",y2:"22"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}]];ke(n,Pe({name:"dollar-sign"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function io(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 15V3"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["path",{d:"m7 10 5 5 5-5"}]];ke(n,Pe({name:"download"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function nd(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];ke(n,Pe({name:"ellipsis-vertical"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function dl(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5"}]];ke(n,Pe({name:"heart"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function hl(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];ke(n,Pe({name:"house"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function rd(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];ke(n,Pe({name:"image"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function aa(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m5 8 6 6"}],["path",{d:"m4 14 6-6 2-3"}],["path",{d:"M2 5h12"}],["path",{d:"M7 2h1"}],["path",{d:"m22 22-5-10-5 10"}],["path",{d:"M14 18h6"}]];ke(n,Pe({name:"languages"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function sd(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];ke(n,Pe({name:"loader-circle"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function Jn(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"}],["circle",{cx:"12",cy:"10",r:"3"}]];ke(n,Pe({name:"map-pin"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function fl(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]];ke(n,Pe({name:"package"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function Mr(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];ke(n,Pe({name:"plus"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function od(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];ke(n,Pe({name:"search"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function vl(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]];ke(n,Pe({name:"shopping-cart"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function Kr(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];ke(n,Pe({name:"square-pen"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function ad(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];ke(n,Pe({name:"sun"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function zn(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];ke(n,Pe({name:"trash-2"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function _l(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}],["path",{d:"M7 2v20"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"}]];ke(n,Pe({name:"utensils"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function ld(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2"}]];ke(n,Pe({name:"wind"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}function Tr(n,r){const s=fe(r,["children","$$slots","$$events","$$legacy"]);const a=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];ke(n,Pe({name:"x"},()=>s,{get iconNode(){return a},children:(u,h)=>{var d=Dt(),_=st(d);ye(_,r,"default",{}),S(u,d)},$$slots:{default:!0}}))}const cd=["TWD","JPY","USD"],Li={TWD:"NT$",JPY:"Â¥",USD:"$"};class ud{#t=Et(ui([]));get trips(){return c(this.#t)}set trips(r){O(this.#t,r,!0)}constructor(){if(typeof localStorage<"u"){const r=localStorage.getItem("trips");if(r)try{const s=JSON.parse(r);s.forEach(a=>{a.currency||(a.currency="USD"),a.generalExpenses||(a.generalExpenses=[]),a.days.forEach(u=>{u.journals||(u.journals=[],u.journal&&(u.journal.content||u.journal.location)&&u.journals.push({id:ir(),timestamp:"12:00",content:u.journal.content||"",weather:u.journal.weather||null,location:u.journal.location||"",photos:[]}),delete u.journal),u.journals.forEach(h=>{h.photos||(h.photos=[])}),u.activities.forEach(h=>{h.actualCost&&!h.expenses?h.expenses=[{id:ir(),amount:h.actualCost,category:h.category||"other",date:u.date,currency:a.currency}]:h.expenses||(h.expenses=[]),h.expenses.forEach(d=>{d.currency||(d.currency=a.currency)}),delete h.actualCost,delete h.category})})}),this.trips=s}catch(s){console.error("Failed to parse trips",s)}Da(()=>{yn(()=>{localStorage.setItem("trips",JSON.stringify(this.trips))})})}}addTrip(r){r.days.forEach(s=>{s.journals||(s.journals=[])}),r.generalExpenses||(r.generalExpenses=[]),this.trips.push(r)}removeTrip(r){this.trips=this.trips.filter(s=>s.id!==r)}updateTrip(r){const s=this.trips.findIndex(a=>a.id===r.id);s!==-1&&(this.trips[s]=r)}getTrip(r){return this.trips.find(s=>s.id===r)}addJournalEntry(r,s,a){const u=this.getTrip(r);u&&u.days[s]&&(u.days[s].journals.push(a),u.days[s].journals.sort((h,d)=>h.timestamp.localeCompare(d.timestamp)))}updateJournalEntry(r,s,a){const u=this.getTrip(r);if(u&&u.days[s]){const h=u.days[s].journals.findIndex(d=>d.id===a.id);h!==-1&&(u.days[s].journals[h]=a,u.days[s].journals.sort((d,_)=>d.timestamp.localeCompare(_.timestamp)))}}removeJournalEntry(r,s,a){const u=this.getTrip(r);u&&u.days[s]&&(u.days[s].journals=u.days[s].journals.filter(h=>h.id!==a))}addActivity(r,s,a){const u=this.getTrip(r);u&&u.days[s]&&u.days[s].activities.push(a)}updateActivity(r,s,a){const u=this.getTrip(r);if(u&&u.days[s]){const h=u.days[s].activities.findIndex(d=>d.id===a.id);h!==-1&&(u.days[s].activities[h]=a)}}removeActivity(r,s,a){const u=this.getTrip(r);u&&u.days[s]&&u.days[s].activities.splice(a,1)}addExpense(r,s,a,u){const h=this.getTrip(r);if(h){const d=h.days[s]?.activities.find(_=>_.id===a);d&&d.expenses.push(u)}}updateExpense(r,s,a,u){const h=this.getTrip(r);if(h){const d=h.days[s]?.activities.find(_=>_.id===a);if(d){const _=d.expenses.findIndex(p=>p.id===u.id);_!==-1&&(d.expenses[_]=u)}}}removeExpense(r,s,a,u){const h=this.getTrip(r);if(h){const d=h.days[s]?.activities.find(_=>_.id===a);d&&(d.expenses=d.expenses.filter(_=>_.id!==u))}}addGeneralExpense(r,s){const a=this.getTrip(r);a&&(a.generalExpenses||(a.generalExpenses=[]),a.generalExpenses.push(s))}updateGeneralExpense(r,s){const a=this.getTrip(r);if(a&&a.generalExpenses){const u=a.generalExpenses.findIndex(h=>h.id===s.id);u!==-1&&(a.generalExpenses[u]=s)}}removeGeneralExpense(r,s){const a=this.getTrip(r);a&&a.generalExpenses&&(a.generalExpenses=a.generalExpenses.filter(u=>u.id!==s))}}const Re=new ud;function ir(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():Date.now().toString(36)+Math.random().toString(36).substring(2)}const dd={en:{"nav.myTrip":"My Trip","nav.expenses":"Expenses","nav.journal":"Journal","nav.travelAssistant":"Travel Assistant","finance.selectTrip":"Select a Trip to View Finances","finance.noTrips":'No trips found. Go to "My Trip" to create one.',"finance.back":"All Trips","finance.finances":"Finances","finance.view.all":"All Trip","finance.view.daily":"Daily","finance.totalEstimated":"Total Estimated","finance.totalActual":"Total Actual Spent","finance.breakdown":"Category Breakdown","finance.detailed":"Detailed Expenses","finance.day":"Day","journal.selectTrip":"Select a Trip to Write Journal","journal.back":"All Trips","journal.title":"Journal","journal.placeholder":"Write about your day...","journal.weather":"Weather","journal.location":"Location","journal.locationPlaceholder":"Where are you today?","journal.sunny":"Sunny","journal.cloudy":"Cloudy","journal.rainy":"Rainy","journal.snowy":"Snowy","journal.windy":"Windy","journal.addEntry":"Add Entry","journal.editEntry":"Edit Entry","journal.time":"Time","journal.delete":"Delete","journal.empty":"No journal entries yet. Tap + to add one!","journal.photos":"Photos","journal.addPhotos":"Add Photos","journal.viewEntry":"View Entry","journal.edit":"Edit","journal.close":"Close","journal.export":"Export as HTML","cat.transport":"Transport","cat.food":"Food","cat.stay":"Accommodation","cat.shopping":"Shopping","cat.medical":"Medical","cat.other":"Other","trip.myTrips":"My Trips","trip.planNew":"Plan a new trip","trip.destination":"Destination","trip.startDate":"Start Date","trip.endDate":"End Date","trip.currency":"Currency","trip.create":"Create Trip","trip.cancel":"Cancel","trip.newTrip":"New Trip","trip.back":"Trips","trip.addActivity":"Add Activity","trip.emptyActivities":"No activities yet. Click 'Add Activity' to start planning!","trip.editPlan":"Edit Plan","trip.googleMaps":"Google Maps","trip.backToList":"Back to list","trip.newActivity":"New Activity","trip.editActivity":"Edit Activity","trip.searchLocation":"Search Location","trip.name":"Name","trip.notes":"Notes","trip.totalActual":"Total Actual:","trip.deleteActivity":"Delete Activity","trip.saveChanges":"Save Changes","trip.expenses":"Expenses","modal.addExpense":"Add Expense","modal.editExpense":"Edit Expense","modal.amount":"Amount","modal.save":"Save","modal.expensesFor":"Expenses for","modal.noExpenses":"No expenses logged for this activity.","modal.addNewExpense":"Add New Expense","csv.export":"Export CSV","csv.summary":"Summary","csv.details":"Details","csv.headers.date":"Date","csv.headers.day":"Day","csv.headers.activity":"Activity","csv.headers.category":"Category","csv.headers.currency":"Currency","csv.headers.amount":"Amount","csv.headers.notes":"Notes","csv.headers.total":"Total","nav.back":"Back","trip.planNewAdventure":"Plan a New Adventure","trip.fillBasicInfo":"Fill in basic trip information to start your journey","trip.basicInfo":"Basic Information","trip.dates":"Dates","trip.otherSettings":"Other Settings","trip.startYourPlan":"Start Planning","trip.empty":"No trips yet","trip.days":"days","trip.deleteTrip":"Delete Trip","trip.showMap":"Show Map","trip.hideMap":"Hide Map"},zh:{"nav.myTrip":"æçè¡ç¨","nav.expenses":"è²»ç¨","nav.journal":"æéæ¥è¨","nav.travelAssistant":"æéå©æ","finance.selectTrip":"é¸æè¡ç¨ä»¥æ¥çè²»ç¨","finance.noTrips":"æ²ææ¾å°è¡ç¨ãè«åå¾ãæçè¡ç¨ãå»ºç«ä¸åã","finance.back":"å¨é¨è¡ç¨","finance.finances":"è²»ç¨çµ±è¨","finance.view.all":"å¨é¨è¡ç¨","finance.view.daily":"æ¯æ¥","finance.totalEstimated":"é ä¼°ç¸½è±è²»","finance.totalActual":"å¯¦éç¸½è±è²»","finance.breakdown":"æ¶è²»é¡å¥çµ±è¨","finance.detailed":"æ¶è²»æç´°","finance.day":"ç¬¬","journal.selectTrip":"é¸æè¡ç¨ä»¥æ°å¯«æ¥è¨","journal.back":"å¨é¨è¡ç¨","journal.title":"æéæ¥è¨","journal.placeholder":"è¨éä»å¤©ç¼ççæäº...","journal.weather":"å¤©æ°£","journal.location":"å°é»","journal.locationPlaceholder":"ä»å¤©å¨åªè£¡ï¼","journal.sunny":"æ´å¤©","journal.cloudy":"å¤é²","journal.rainy":"é¨å¤©","journal.snowy":"éªå¤©","journal.windy":"å®é¢¨","journal.addEntry":"æ°å¢æ¥è¨","journal.editEntry":"ç·¨è¼¯æ¥è¨","journal.time":"æé","journal.delete":"åªé¤","journal.empty":"å°ç¡æ¥è¨ãé»æ + æ°å¢ä¸ç¯ï¼","journal.photos":"ç§ç","journal.addPhotos":"æ°å¢ç§ç","journal.viewEntry":"æ¥çæ¥è¨","journal.edit":"ç·¨è¼¯","journal.close":"éé","journal.export":"å¯åºæç¶²é ","cat.transport":"äº¤é","cat.food":"é£ç©","cat.stay":"ä½å®¿","cat.shopping":"è³¼ç©","cat.medical":"é«ç","cat.other":"å¶ä»","trip.myTrips":"æçè¡ç¨","trip.planNew":"å»ºç«æ°è¡ç¨","trip.destination":"ç®çå°","trip.startDate":"éå§æ¥æ","trip.endDate":"çµææ¥æ","trip.currency":"è²¨å¹£","trip.create":"å»ºç«è¡ç¨","trip.cancel":"åæ¶","trip.newTrip":"æ°è¡ç¨","trip.back":"è¡ç¨åè¡¨","trip.addActivity":"æ°å¢æ´»å","trip.emptyActivities":"å°ç¡æ´»åãé»æãæ°å¢æ´»åãéå§è¦åï¼","trip.editPlan":"ç·¨è¼¯è¨ç«","trip.googleMaps":"Google å°å","trip.backToList":"è¿ååè¡¨","trip.newActivity":"æ°å¢æ´»å","trip.editActivity":"ç·¨è¼¯æ´»å","trip.searchLocation":"æå°å°é»","trip.name":"åç¨±","trip.notes":"ç­è¨","trip.totalActual":"å¯¦éç¸½è¨:","trip.deleteActivity":"åªé¤æ´»å","trip.saveChanges":"å²å­è®æ´","trip.expenses":"è²»ç¨","modal.addExpense":"æ°å¢è²»ç¨","modal.editExpense":"ç·¨è¼¯è²»ç¨","modal.amount":"éé¡","modal.save":"å²å­","modal.expensesFor":"çè²»ç¨","modal.noExpenses":"æ­¤æ´»åå°ç¡è²»ç¨è¨éã","modal.addNewExpense":"æ°å¢è²»ç¨é ç®","csv.export":"å¯åº CSV","csv.summary":"æ¶è²»çµ±è¨","csv.details":"è©³ç´°æç´°","csv.headers.date":"æ¥æ","csv.headers.day":"å¤©æ¸","csv.headers.activity":"æ´»ååç¨±","csv.headers.category":"é¡å¥","csv.headers.currency":"å¹£å¥","csv.headers.amount":"éé¡","csv.headers.notes":"åè¨»","csv.headers.total":"ç¸½è¨","nav.back":"è¿å","trip.planNewAdventure":"è¦åæ°çåéª","trip.fillBasicInfo":"å¡«å¯«è¡ç¨åºæ¬è³è¨éå§æ¨çæç¨","trip.basicInfo":"åºæ¬è³è¨","trip.dates":"æ¥æ","trip.otherSettings":"å¶ä»è¨­å®","trip.startYourPlan":"éå§è¦å","trip.empty":"æ«ç¡è¡ç¨","trip.days":"å¤©","trip.deleteTrip":"åªé¤è¡ç¨","trip.showMap":"é¡¯ç¤ºå°å","trip.hideMap":"é±èå°å"}};class hd{#t=Et("en");get lang(){return c(this.#t)}set lang(r){O(this.#t,r,!0)}constructor(){if(typeof localStorage<"u"){const r=localStorage.getItem("app_lang");(r==="en"||r==="zh")&&(this.lang=r)}}toggle(){this.lang=this.lang==="en"?"zh":"en",typeof localStorage<"u"&&localStorage.setItem("app_lang",this.lang)}t(r){return dd[this.lang][r]||r}day(r){return this.lang==="zh"?`ç¬¬ ${r} å¤©`:`Day ${r}`}}const k=new hd;var fd=D('<button class="back-btn svelte-whg6dh"> </button>'),vd=D("<button><!> <span> </span></button>"),_d=D('<button class="back-btn-mobile svelte-whg6dh">â è¿å</button>'),pd=D('<button><!> <span class="sr-only svelte-whg6dh"> </span></button>'),md=D('<div class="app-shell svelte-whg6dh"><aside class="sidebar svelte-whg6dh"><div><!> <div class="logo svelte-whg6dh"><img alt="TripFlow Logo" class="logo-img svelte-whg6dh"/> <span> </span></div> <nav class="svelte-whg6dh"></nav></div> <div class="sidebar-footer"><button class="lang-btn svelte-whg6dh"><!> <span> </span></button></div></aside> <div class="main-content svelte-whg6dh"><header class="mobile-header svelte-whg6dh"><!> <h1 class="svelte-whg6dh"> </h1> <button class="icon-btn svelte-whg6dh"><!></button></header> <main class="svelte-whg6dh"><!></main> <nav class="bottom-nav svelte-whg6dh"></nav></div></div>');function gd(n,r){Fi(r,!0);let s=bi(r,"view",15,"itinerary"),a=bi(r,"hasTrip",3,!1),u=ne(()=>[{id:"itinerary",label:k.t("nav.myTrip"),icon:Ws},{id:"finance",label:k.t("nav.expenses"),icon:eo},{id:"journal",label:k.t("nav.journal"),icon:Xu}]);var h=md(),d=v(h),_=v(d),p=v(_);{var y=Ft=>{var ht=fd();ht.__click=function(...B){r.onBackTrip?.apply(this,B)};var H=v(ht);G(B=>z(H,`â ${B??""}`),[()=>k.t("nav.back")||"è¿å"]),S(Ft,ht)};tt(p,Ft=>{a()&&Ft(y)})}var x=g(p,2),b=v(x),P=g(b,2),E=v(P),N=g(x,2);Oe(N,21,()=>c(u),Qe,(Ft,ht)=>{var H=vd();H.__click=()=>s(c(ht).id);let B;var kt=v(H);rn(kt,()=>c(ht).icon,(pt,ft)=>{ft(pt,{size:20})});var q=g(kt,2),et=v(q);G(()=>{B=Si(H,1,"svelte-whg6dh",null,B,{active:s()===c(ht).id}),z(et,c(ht).label)}),S(Ft,H)});var A=g(_,2),M=v(A);M.__click=()=>k.toggle();var Z=v(M);aa(Z,{size:20});var at=g(Z,2),j=v(at),R=g(d,2),K=v(R),Y=v(K);{var J=Ft=>{var ht=_d();ht.__click=function(...H){r.onBackTrip?.apply(this,H)},S(Ft,ht)};tt(Y,Ft=>{a()&&Ft(J)})}var F=g(Y,2),ot=v(F),lt=g(F,2);lt.__click=()=>k.toggle();var wt=v(lt);aa(wt,{size:20});var Ot=g(K,2),ve=v(Ot);Ou(ve,()=>r.children);var Qt=g(Ot,2);Oe(Qt,21,()=>c(u),Qe,(Ft,ht)=>{var H=pd();H.__click=()=>s(c(ht).id);let B;var kt=v(H);rn(kt,()=>c(ht).icon,(pt,ft)=>{ft(pt,{size:24})});var q=g(kt,2),et=v(q);G(()=>{$e(H,"aria-label",c(ht).label),B=Si(H,1,"svelte-whg6dh",null,B,{active:s()===c(ht).id}),z(et,c(ht).label)}),S(Ft,H)}),G((Ft,ht)=>{$e(b,"src","/tripplanner_Web/logo.png"),z(E,Ft),z(j,k.lang==="en"?"ä¸­æ":"English"),z(ot,ht)},[()=>k.t("nav.travelAssistant"),()=>c(u).find(Ft=>Ft.id===s())?.label]),S(n,h),Hi()}Zn(["click"]);function yd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var yr={exports:{}};var bd=yr.exports,la;function wd(){return la||(la=1,(function(n,r){(function(s,a){a(r)})(bd,(function(s){var a="1.9.4";function u(t){var e,i,o,l;for(i=1,o=arguments.length;i<o;i++){l=arguments[i];for(e in l)t[e]=l[e]}return t}var h=Object.create||(function(){function t(){}return function(e){return t.prototype=e,new t}})();function d(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var o=i.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(i.call(arguments)):arguments)}}var _=0;function p(t){return"_leaflet_id"in t||(t._leaflet_id=++_),t._leaflet_id}function y(t,e,i){var o,l,f,m;return m=function(){o=!1,l&&(f.apply(i,l),l=!1)},f=function(){o?l=arguments:(t.apply(i,arguments),setTimeout(m,e),o=!0)},f}function x(t,e,i){var o=e[1],l=e[0],f=o-l;return t===o&&i?t:((t-l)%f+f)%f+l}function b(){return!1}function P(t,e){if(e===!1)return t;var i=Math.pow(10,e===void 0?6:e);return Math.round(t*i)/i}function E(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return E(t).split(/\s+/)}function A(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var i in e)t.options[i]=e[i];return t.options}function M(t,e,i){var o=[];for(var l in t)o.push(encodeURIComponent(i?l.toUpperCase():l)+"="+encodeURIComponent(t[l]));return(!e||e.indexOf("?")===-1?"?":"&")+o.join("&")}var Z=/\{ *([\w_ -]+) *\}/g;function at(t,e){return t.replace(Z,function(i,o){var l=e[o];if(l===void 0)throw new Error("No value provided for variable "+i);return typeof l=="function"&&(l=l(e)),l})}var j=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function R(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var J=0;function F(t){var e=+new Date,i=Math.max(0,16-(e-J));return J=e+i,window.setTimeout(t,i)}var ot=window.requestAnimationFrame||Y("RequestAnimationFrame")||F,lt=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function wt(t,e,i){if(i&&ot===F)t.call(e);else return ot.call(window,d(t,e))}function Ot(t){t&&lt.call(window,t)}var ve={__proto__:null,extend:u,create:h,bind:d,get lastId(){return _},stamp:p,throttle:y,wrapNum:x,falseFn:b,formatNum:P,trim:E,splitWords:N,setOptions:A,getParamString:M,template:at,isArray:j,indexOf:R,emptyImageUrl:K,requestFn:ot,cancelFn:lt,requestAnimFrame:wt,cancelAnimFrame:Ot};function Qt(){}Qt.extend=function(t){var e=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=h(i);o.constructor=e,e.prototype=o;for(var l in this)Object.prototype.hasOwnProperty.call(this,l)&&l!=="prototype"&&l!=="__super__"&&(e[l]=this[l]);return t.statics&&u(e,t.statics),t.includes&&(Ft(t.includes),u.apply(null,[o].concat(t.includes))),u(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?h(i.options):{},u(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,m=o._initHooks.length;f<m;f++)o._initHooks[f].call(this)}},e},Qt.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},Qt.mergeOptions=function(t){return u(this.prototype.options,t),this},Qt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function Ft(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=j(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ht={on:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e);else{t=N(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],e,i)}return this},off:function(t,e,i){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var o in t)this._off(o,t[o],e);else{t=N(t);for(var l=arguments.length===1,f=0,m=t.length;f<m;f++)l?this._off(t[f]):this._off(t[f],e,i)}return this},_on:function(t,e,i,o){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,i)===!1){i===this&&(i=void 0);var l={fn:e,ctx:i};o&&(l.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(l)}},_off:function(t,e,i){var o,l,f;if(this._events&&(o=this._events[t],!!o)){if(arguments.length===1){if(this._firingCount)for(l=0,f=o.length;l<f;l++)o[l].fn=b;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var m=this._listens(t,e,i);if(m!==!1){var w=o[m];this._firingCount&&(w.fn=b,this._events[t]=o=o.slice()),o.splice(m,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var l=this._events[t];if(l){this._firingCount=this._firingCount+1||1;for(var f=0,m=l.length;f<m;f++){var w=l[f],T=w.fn;w.once&&this.off(t,T,w.ctx),T.call(w.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e,i,o){typeof t!="string"&&console.warn('"string" type argument expected');var l=e;typeof e!="function"&&(o=!!e,l=void 0,i=void 0);var f=this._events&&this._events[t];if(f&&f.length&&this._listens(t,l,i)!==!1)return!0;if(o){for(var m in this._eventParents)if(this._eventParents[m].listens(t,e,i,o))return!0}return!1},_listens:function(t,e,i){if(!this._events)return!1;var o=this._events[t]||[];if(!e)return!!o.length;i===this&&(i=void 0);for(var l=0,f=o.length;l<f;l++)if(o[l].fn===e&&o[l].ctx===i)return l;return!1},once:function(t,e,i){if(typeof t=="object")for(var o in t)this._on(o,t[o],e,!0);else{t=N(t);for(var l=0,f=t.length;l<f;l++)this._on(t[l],e,i,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[p(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[p(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};ht.addEventListener=ht.on,ht.removeEventListener=ht.clearAllEventListeners=ht.off,ht.addOneTimeEventListener=ht.once,ht.fireEvent=ht.fire,ht.hasEventListeners=ht.listens;var H=Qt.extend(ht);function B(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var kt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(t){return this.clone()._add(q(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(q(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new B(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new B(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=kt(this.x),this.y=kt(this.y),this},distanceTo:function(t){t=q(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=q(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=q(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+P(this.x)+", "+P(this.y)+")"}};function q(t,e,i){return t instanceof B?t:j(t)?new B(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new B(t.x,t.y):new B(t,e,i)}function et(t,e){if(t)for(var i=e?[t,e]:t,o=0,l=i.length;o<l;o++)this.extend(i[o])}et.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof B||typeof t[0]=="number"||"x"in t)e=i=q(t);else if(t=pt(t),e=t.min,i=t.max,!e||!i)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=i.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(t){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return typeof t[0]=="number"||t instanceof B?t=q(t):t=pt(t),t instanceof et?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=pt(t);var e=this.min,i=this.max,o=t.min,l=t.max,f=l.x>=e.x&&o.x<=i.x,m=l.y>=e.y&&o.y<=i.y;return f&&m},overlaps:function(t){t=pt(t);var e=this.min,i=this.max,o=t.min,l=t.max,f=l.x>e.x&&o.x<i.x,m=l.y>e.y&&o.y<i.y;return f&&m},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,i=this.max,o=Math.abs(e.x-i.x)*t,l=Math.abs(e.y-i.y)*t;return pt(q(e.x-o,e.y-l),q(i.x+o,i.y+l))},equals:function(t){return t?(t=pt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function pt(t,e){return!t||t instanceof et?t:new et(t,e)}function ft(t,e){if(t)for(var i=e?[t,e]:t,o=0,l=i.length;o<l;o++)this.extend(i[o])}ft.prototype={extend:function(t){var e=this._southWest,i=this._northEast,o,l;if(t instanceof gt)o=t,l=t;else if(t instanceof ft){if(o=t._southWest,l=t._northEast,!o||!l)return this}else return t?this.extend(W(t)||ct(t)):this;return!e&&!i?(this._southWest=new gt(o.lat,o.lng),this._northEast=new gt(l.lat,l.lng)):(e.lat=Math.min(o.lat,e.lat),e.lng=Math.min(o.lng,e.lng),i.lat=Math.max(l.lat,i.lat),i.lng=Math.max(l.lng,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,o=Math.abs(e.lat-i.lat)*t,l=Math.abs(e.lng-i.lng)*t;return new ft(new gt(e.lat-o,e.lng-l),new gt(i.lat+o,i.lng+l))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof gt||"lat"in t?t=W(t):t=ct(t);var e=this._southWest,i=this._northEast,o,l;return t instanceof ft?(o=t.getSouthWest(),l=t.getNorthEast()):o=l=t,o.lat>=e.lat&&l.lat<=i.lat&&o.lng>=e.lng&&l.lng<=i.lng},intersects:function(t){t=ct(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>=e.lat&&o.lat<=i.lat,m=l.lng>=e.lng&&o.lng<=i.lng;return f&&m},overlaps:function(t){t=ct(t);var e=this._southWest,i=this._northEast,o=t.getSouthWest(),l=t.getNorthEast(),f=l.lat>e.lat&&o.lat<i.lat,m=l.lng>e.lng&&o.lng<i.lng;return f&&m},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ct(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ct(t,e){return t instanceof ft?t:new ft(t,e)}function gt(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,i!==void 0&&(this.alt=+i)}gt.prototype={equals:function(t,e){if(!t)return!1;t=W(t);var i=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return i<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+P(this.lat,t)+", "+P(this.lng,t)+")"},distanceTo:function(t){return be.distance(this,W(t))},wrap:function(){return be.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return ct([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function W(t,e,i){return t instanceof gt?t:j(t)&&typeof t[0]!="object"?t.length===3?new gt(t[0],t[1],t[2]):t.length===2?new gt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new gt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new gt(t,e,i)}var It={latLngToPoint:function(t,e){var i=this.projection.project(t),o=this.scale(e);return this.transformation._transform(i,o)},pointToLatLng:function(t,e){var i=this.scale(e),o=this.transformation.untransform(t,i);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),o=this.transformation.transform(e.min,i),l=this.transformation.transform(e.max,i);return new et(o,l)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?x(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?x(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return new gt(i,e,o)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),o=e.lat-i.lat,l=e.lng-i.lng;if(o===0&&l===0)return t;var f=t.getSouthWest(),m=t.getNorthEast(),w=new gt(f.lat-o,f.lng-l),T=new gt(m.lat-o,m.lng-l);return new ft(w,T)}},be=u({},It,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,o=t.lat*i,l=e.lat*i,f=Math.sin((e.lat-t.lat)*i/2),m=Math.sin((e.lng-t.lng)*i/2),w=f*f+Math.cos(o)*Math.cos(l)*m*m,T=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));return this.R*T}}),Nt=6378137,C={R:Nt,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,o=Math.max(Math.min(i,t.lat),-i),l=Math.sin(o*e);return new B(this.R*t.lng*e,this.R*Math.log((1+l)/(1-l))/2)},unproject:function(t){var e=180/Math.PI;return new gt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(function(){var t=Nt*Math.PI;return new et([-t,-t],[t,t])})()};function V(t,e,i,o){if(j(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=i,this._d=o}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new B((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function Q(t,e,i,o){return new V(t,e,i,o)}var nt=u({},be,{code:"EPSG:3857",projection:C,transformation:(function(){var t=.5/(Math.PI*C.R);return Q(t,.5,-t,.5)})()}),$t=u({},nt,{code:"EPSG:900913"});function Ut(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function _t(t,e){var i="",o,l,f,m,w,T;for(o=0,f=t.length;o<f;o++){for(w=t[o],l=0,m=w.length;l<m;l++)T=w[l],i+=(l?"L":"M")+T.x+" "+T.y;i+=e?I.svg?"z":"x":""}return i||"M0 0"}var Vt=document.documentElement.style,te="ActiveXObject"in window,_e=te&&!document.addEventListener,De="msLaunchUri"in navigator&&!("documentMode"in document),pe=X("webkit"),Te=X("android"),Se=X("android 2")||X("android 3"),ze=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ue=Te&&X("Google")&&ze<537&&!("AudioNode"in window),oe=!!window.opera,Me=!De&&X("chrome"),mt=X("gecko")&&!pe&&!oe&&!te,rt=!Me&&X("safari"),ut=X("phantom"),it="OTransition"in Vt,Zt=navigator.platform.indexOf("Win")===0,Lt=te&&"transition"in Vt,xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Se,Pt="MozPerspective"in Vt,Gt=!window.L_DISABLE_3D&&(Lt||xt||Pt)&&!it&&!ut,St=typeof orientation<"u"||X("mobile"),ae=St&&pe,Ht=St&&xt,Yt=!window.PointerEvent&&window.MSPointerEvent,Le=!!(window.PointerEvent||Yt),we="ontouchstart"in window||!!window.TouchEvent,Ce=!window.L_NO_TOUCH&&(we||Le),Bt=St&&oe,me=St&&mt,dt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,de=(function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",b,e),window.removeEventListener("testPassiveEventSupport",b,e)}catch{}return t})(),yt=(function(){return!!document.createElement("canvas").getContext})(),qt=!!(document.createElementNS&&Ut("svg").createSVGRect),ee=!!qt&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Tt=!qt&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}})(),zt=navigator.platform.indexOf("Mac")===0,Wt=navigator.platform.indexOf("Linux")===0;function X(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var I={ie:te,ielt9:_e,edge:De,webkit:pe,android:Te,android23:Se,androidStock:ue,opera:oe,chrome:Me,gecko:mt,safari:rt,phantom:ut,opera12:it,win:Zt,ie3d:Lt,webkit3d:xt,gecko3d:Pt,any3d:Gt,mobile:St,mobileWebkit:ae,mobileWebkit3d:Ht,msPointer:Yt,pointer:Le,touch:Ce,touchNative:we,mobileOpera:Bt,mobileGecko:me,retina:dt,passiveEvents:de,canvas:yt,svg:qt,vml:Tt,inlineSvg:ee,mac:zt,linux:Wt},bt=I.msPointer?"MSPointerDown":"pointerdown",Kt=I.msPointer?"MSPointerMove":"pointermove",le=I.msPointer?"MSPointerUp":"pointerup",he=I.msPointer?"MSPointerCancel":"pointercancel",ie={touchstart:bt,touchmove:Kt,touchend:le,touchcancel:he},Ne={touchstart:Di,touchmove:ei,touchend:ei,touchcancel:ei},Fe={},di=!1;function si(t,e,i){return e==="touchstart"&&hi(),Ne[e]?(i=Ne[e].bind(this,i),t.addEventListener(ie[e],i,!1),i):(console.warn("wrong event specified:",e),b)}function qe(t,e,i){if(!ie[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(ie[e],i,!1)}function We(t){Fe[t.pointerId]=t}function oi(t){Fe[t.pointerId]&&(Fe[t.pointerId]=t)}function mi(t){delete Fe[t.pointerId]}function hi(){di||(document.addEventListener(bt,We,!0),document.addEventListener(Kt,oi,!0),document.addEventListener(le,mi,!0),document.addEventListener(he,mi,!0),di=!0)}function ei(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var i in Fe)e.touches.push(Fe[i]);e.changedTouches=[e],t(e)}}function Di(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ke(e),ei(t,e)}function Wi(t){var e={},i,o;for(o in t)i=t[o],e[o]=i&&i.bind?i.bind(t):i;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var ln=200;function xn(t,e){t.addEventListener("dblclick",e);var i=0,o;function l(f){if(f.detail!==1){o=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var m=so(f);if(!(m.some(function(T){return T instanceof HTMLLabelElement&&T.attributes.for})&&!m.some(function(T){return T instanceof HTMLInputElement||T instanceof HTMLSelectElement}))){var w=Date.now();w-i<=ln?(o++,o===2&&e(Wi(f))):o=1,i=w}}}return t.addEventListener("click",l),{dblclick:e,simDblclick:l}}function Jt(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Ie=dn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Be=dn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ge=Be==="webkitTransition"||Be==="OTransition"?Be+"End":"transitionend";function Ye(t){return typeof t=="string"?document.getElementById(t):t}function Je(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||i==="auto")&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);i=o?o[e]:null}return i==="auto"?null:i}function Rt(t,e,i){var o=document.createElement(t);return o.className=e||"",i&&i.appendChild(o),o}function xe(t){var e=t.parentNode;e&&e.removeChild(t)}function cn(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ui(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function un(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Bn(t,e){if(t.classList!==void 0)return t.classList.contains(e);var i=Ct(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function Mt(t,e){if(t.classList!==void 0)for(var i=N(e),o=0,l=i.length;o<l;o++)t.classList.add(i[o]);else if(!Bn(t,e)){var f=Ct(t);sr(t,(f?f+" ":"")+e)}}function Ze(t,e){t.classList!==void 0?t.classList.remove(e):sr(t,E((" "+Ct(t)+" ").replace(" "+e+" "," ")))}function sr(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Ct(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ae(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Pn(t,e)}function Pn(t,e){var i=!1,o="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(o)}catch{if(e===1)return}e=Math.round(e*100),i?(i.Enabled=e!==100,i.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function dn(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function gi(t,e,i){var o=e||new B(0,0);t.style[Ie]=(I.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(i?" scale("+i+")":"")}function ge(t,e){t._leaflet_pos=e,I.any3d?gi(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ai(t){return t._leaflet_pos||new B(0,0)}var Vi,kn,us;if("onselectstart"in document)Vi=function(){At(window,"selectstart",Ke)},kn=function(){Ee(window,"selectstart",Ke)};else{var or=dn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vi=function(){if(or){var t=document.documentElement.style;us=t[or],t[or]="none"}},kn=function(){or&&(document.documentElement.style[or]=us,us=void 0)}}function ds(){At(window,"dragstart",Ke)}function hs(){Ee(window,"dragstart",Ke)}var $r,fs;function vs(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Dr(),$r=t,fs=t.style.outlineStyle,t.style.outlineStyle="none",At(window,"keydown",Dr))}function Dr(){$r&&($r.style.outlineStyle=fs,$r=void 0,fs=void 0,Ee(window,"keydown",Dr))}function no(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function _s(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var ml={__proto__:null,TRANSFORM:Ie,TRANSITION:Be,TRANSITION_END:Ge,get:Ye,getStyle:Je,create:Rt,remove:xe,empty:cn,toFront:Ui,toBack:un,hasClass:Bn,addClass:Mt,removeClass:Ze,setClass:sr,getClass:Ct,setOpacity:Ae,testProp:dn,setTransform:gi,setPosition:ge,getPosition:ai,get disableTextSelection(){return Vi},get enableTextSelection(){return kn},disableImageDrag:ds,enableImageDrag:hs,preventOutline:vs,restoreOutline:Dr,getSizedParentNode:no,getScale:_s};function At(t,e,i,o){if(e&&typeof e=="object")for(var l in e)ms(t,l,e[l],i);else{e=N(e);for(var f=0,m=e.length;f<m;f++)ms(t,e[f],i,o)}return this}var Ni="_leaflet_events";function Ee(t,e,i,o){if(arguments.length===1)ro(t),delete t[Ni];else if(e&&typeof e=="object")for(var l in e)gs(t,l,e[l],i);else if(e=N(e),arguments.length===2)ro(t,function(w){return R(e,w)!==-1});else for(var f=0,m=e.length;f<m;f++)gs(t,e[f],i,o);return this}function ro(t,e){for(var i in t[Ni]){var o=i.split(/\d/)[0];(!e||e(o))&&gs(t,o,null,null,i)}}var ps={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ms(t,e,i,o){var l=e+p(i)+(o?"_"+p(o):"");if(t[Ni]&&t[Ni][l])return this;var f=function(w){return i.call(o||t,w||window.event)},m=f;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?f=si(t,e,f):I.touch&&e==="dblclick"?f=xn(t,f):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(ps[e]||e,f,I.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(f=function(w){w=w||window.event,bs(t,w)&&m(w)},t.addEventListener(ps[e],f,!1)):t.addEventListener(e,m,!1):t.attachEvent("on"+e,f),t[Ni]=t[Ni]||{},t[Ni][l]=f}function gs(t,e,i,o,l){l=l||e+p(i)+(o?"_"+p(o):"");var f=t[Ni]&&t[Ni][l];if(!f)return this;!I.touchNative&&I.pointer&&e.indexOf("touch")===0?qe(t,e,f):I.touch&&e==="dblclick"?Jt(t,f):"removeEventListener"in t?t.removeEventListener(ps[e]||e,f,!1):t.detachEvent("on"+e,f),t[Ni][l]=null}function Tn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function ys(t){return ms(t,"wheel",Tn),this}function ar(t){return At(t,"mousedown touchstart dblclick contextmenu",Tn),t._leaflet_disable_click=!0,this}function Ke(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ln(t){return Ke(t),Tn(t),this}function so(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function oo(t,e){if(!e)return new B(t.clientX,t.clientY);var i=_s(e),o=i.boundingClientRect;return new B((t.clientX-o.left)/i.x-e.clientLeft,(t.clientY-o.top)/i.y-e.clientTop)}var gl=I.linux&&I.chrome?window.devicePixelRatio:I.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ao(t){return I.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/gl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function bs(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch{return!1}return i!==t}var yl={__proto__:null,on:At,off:Ee,stopPropagation:Tn,disableScrollPropagation:ys,disableClickPropagation:ar,preventDefault:Ke,stop:Ln,getPropagationPath:so,getMousePosition:oo,getWheelDelta:ao,isExternalTarget:bs,addListener:At,removeListener:Ee},lo=H.extend({run:function(t,e,i,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=ai(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=wt(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=this._duration*1e3;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),ge(this._el,i),this.fire("step")},_complete:function(){Ot(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Xt=H.extend({options:{crs:nt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=A(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(W(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Be&&I.any3d&&!I.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),At(this._proxy,Ge,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(W(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=u({animate:i.animate},i.zoom),i.pan=u({animate:i.animate,duration:i.duration},i.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,i.pan&&i.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(I.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var o=this.getZoomScale(e),l=this.getSize().divideBy(2),f=t instanceof B?t:this.latLngToContainerPoint(t),m=f.subtract(l).multiplyBy(1-1/o),w=this.containerPointToLatLng(l.add(m));return this.setView(w,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ct(t);var i=q(e.paddingTopLeft||e.padding||[0,0]),o=q(e.paddingBottomRight||e.padding||[0,0]),l=this.getBoundsZoom(t,!1,i.add(o));if(l=typeof e.maxZoom=="number"?Math.min(e.maxZoom,l):l,l===1/0)return{center:t.getCenter(),zoom:l};var f=o.subtract(i).divideBy(2),m=this.project(t.getSouthWest(),l),w=this.project(t.getNorthEast(),l),T=this.unproject(m.add(w).divideBy(2).add(f),l);return{center:T,zoom:l}},fitBounds:function(t,e){if(t=ct(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=q(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new lo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Mt(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(i=i||{},i.animate===!1||!I.any3d)return this.setView(t,e,i);this._stop();var o=this.project(this.getCenter()),l=this.project(t),f=this.getSize(),m=this._zoom;t=W(t),e=e===void 0?m:e;var w=Math.max(f.x,f.y),T=w*this.getZoomScale(m,e),$=l.distanceTo(o)||1,U=1.42,vt=U*U;function jt(He){var Gr=He?-1:1,ac=He?T:w,lc=T*T-w*w+Gr*vt*vt*$*$,cc=2*ac*vt*$,Cs=lc/cc,Fo=Math.sqrt(Cs*Cs+1)-Cs,uc=Fo<1e-9?-18:Math.log(Fo);return uc}function li(He){return(Math.exp(He)-Math.exp(-He))/2}function Ue(He){return(Math.exp(He)+Math.exp(-He))/2}function Pi(He){return li(He)/Ue(He)}var fi=jt(0);function Wn(He){return w*(Ue(fi)/Ue(fi+U*He))}function nc(He){return w*(Ue(fi)*Pi(fi+U*He)-li(fi))/vt}function rc(He){return 1-Math.pow(1-He,1.5)}var sc=Date.now(),Ro=(jt(1)-fi)/U,oc=i.duration?1e3*i.duration:1e3*Ro*.8;function jo(){var He=(Date.now()-sc)/oc,Gr=rc(He)*Ro;He<=1?(this._flyToFrame=wt(jo,this),this._move(this.unproject(o.add(l.subtract(o).multiplyBy(nc(Gr)/$)),m),this.getScaleZoom(w/Wn(Gr),m),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),jo.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=ct(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),o=this._limitCenter(i,this._zoom,ct(t));return i.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var i=q(e.paddingTopLeft||e.padding||[0,0]),o=q(e.paddingBottomRight||e.padding||[0,0]),l=this.project(this.getCenter()),f=this.project(t),m=this.getPixelBounds(),w=pt([m.min.add(i),m.max.subtract(o)]),T=w.getSize();if(!w.contains(f)){this._enforcingBounds=!0;var $=f.subtract(w.getCenter()),U=w.extend(f).getSize().subtract(T);l.x+=$.x<0?-U.x:U.x,l.y+=$.y<0?-U.y:U.y,this.panTo(this.unproject(l),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),l=i.divideBy(2).round(),f=o.subtract(l);return!f.x&&!f.y?this:(t.animate&&t.pan?this.panBy(f):(t.pan&&this._rawPanBy(f),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=d(this._handleGeolocationResponse,this),i=d(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,i=t.coords.longitude,o=new gt(e,i),l=o.toBounds(t.coords.accuracy*2),f=this._locateOptions;if(f.setView){var m=this.getBoundsZoom(l);this.setView(o,f.maxZoom?Math.min(m,f.maxZoom):m)}var w={latlng:o,bounds:l,timestamp:t.timestamp};for(var T in t.coords)typeof t.coords[T]=="number"&&(w[T]=t.coords[T]);this.fire("locationfound",w)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ot(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)xe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=Rt("div",i,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new ft(e,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=ct(t),i=q(i||[0,0]);var o=this.getZoom()||0,l=this.getMinZoom(),f=this.getMaxZoom(),m=t.getNorthWest(),w=t.getSouthEast(),T=this.getSize().subtract(i),$=pt(this.project(w,o),this.project(m,o)).getSize(),U=I.any3d?this.options.zoomSnap:1,vt=T.x/$.x,jt=T.y/$.y,li=e?Math.max(vt,jt):Math.min(vt,jt);return o=this.getScaleZoom(li,o),U&&(o=Math.round(o/(U/100))*(U/100),o=e?Math.ceil(o/U)*U:Math.floor(o/U)*U),Math.max(l,Math.min(f,o))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new et(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=e===void 0?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=e===void 0?this._zoom:e;var o=i.zoom(t*i.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(W(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(q(t),e)},layerPointToLatLng:function(t){var e=q(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(W(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(W(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ct(t))},distance:function(t,e){return this.options.crs.distance(W(t),W(e))},containerPointToLayerPoint:function(t){return q(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return q(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(q(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t)))},mouseEventToContainerPoint:function(t){return oo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Ye(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");At(e,"scroll",this._onScroll,this),this._containerId=p(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&I.any3d,Mt(t,"leaflet-container"+(I.touch?" leaflet-touch":"")+(I.retina?" leaflet-retina":"")+(I.ielt9?" leaflet-oldie":"")+(I.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Je(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ge(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Mt(t.markerPane,"leaflet-zoom-hide"),Mt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){ge(this._mapPane,new B(0,0));var o=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var l=this._zoom!==e;this._moveStart(l,i)._move(t,e)._moveEnd(l),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,o){e===void 0&&(e=this._zoom);var l=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),o?i&&i.pinch&&this.fire("zoom",i):((l||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ot(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ge(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[p(this._container)]=this;var e=t?Ee:At;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),I.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ot(this._resizeRequest),this._resizeRequest=wt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i=[],o,l=e==="mouseout"||e==="mouseover",f=t.target||t.srcElement,m=!1;f;){if(o=this._targets[p(f)],o&&(e==="click"||e==="preclick")&&this._draggableMoved(o)){m=!0;break}if(o&&o.listens(e,!0)&&(l&&!bs(f,t)||(i.push(o),l))||f===this._container)break;f=f.parentNode}return!i.length&&!m&&!l&&this.listens(e,!0)&&(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var i=t.type;i==="mousedown"&&vs(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if(t.type==="click"){var o=u({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}var l=this._findEventTargets(t,e);if(i){for(var f=[],m=0;m<i.length;m++)i[m].listens(e,!0)&&f.push(i[m]);l=f.concat(l)}if(l.length){e==="contextmenu"&&Ke(t);var w=l[0],T={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var $=w.getLatLng&&(!w._radius||w._radius<=10);T.containerPoint=$?this.latLngToContainerPoint(w.getLatLng()):this.mouseEventToContainerPoint(t),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=$?w.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(m=0;m<l.length;m++)if(l[m].fire(e,T,!0),T.originalEvent._stopped||l[m].options.bubblingMouseEvents===!1&&R(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ai(this._mapPane)||new B(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var i=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,i){var o=this._getNewPixelOrigin(i,e);return pt([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var o=this.project(t,e),l=this.getSize().divideBy(2),f=new et(o.subtract(l),o.add(l)),m=this._getBoundsOffset(f,i,e);return Math.abs(m.x)<=1&&Math.abs(m.y)<=1?t:this.unproject(o.add(m),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),o=new et(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,i){var o=pt(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),l=o.min.subtract(t.min),f=o.max.subtract(t.max),m=this._rebound(l.x,-f.x),w=this._rebound(l.y,-f.y);return new B(m,w)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),o=I.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=Rt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=Ie,o=this._proxy.style[i];gi(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();gi(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),l=this._getCenterOffset(t)._divideBy(1-1/o);return i.animate!==!0&&!this.getSize().contains(l)?!1:(wt(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,o){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Mt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bl(t,e){return new Xt(t,e)}var Ci=Qt.extend({options:{position:"topright"},initialize:function(t){A(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),o=t._controlCorners[i];return Mt(e,"leaflet-control"),i.indexOf("bottom")!==-1?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),lr=function(t){return new Ci(t)};Xt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=Rt("div",e+"control-container",this._container);function o(l,f){var m=e+l+" "+e+f;t[l+f]=Rt("div",m,i)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)xe(this._controlCorners[t]);xe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var co=Ci.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,o){return i<o?-1:o<i?1:0}},initialize:function(t,e,i){A(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ci.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(p(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Mt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Mt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=Rt("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),ar(e),ys(e);var o=this._section=Rt("section",t+"-list");i&&(this._map.on("click",this.collapse,this),At(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var l=this._layersLink=Rt("a",t+"-toggle",e);l.href="#",l.title="Layers",l.setAttribute("role","button"),At(l,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){Ke(f),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=Rt("div",t+"-base",o),this._separator=Rt("div",t+"-separator",o),this._overlaysList=Rt("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&p(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(d(function(o,l){return this.options.sortFunction(o.layer,l.layer,o.name,l.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cn(this._baseLayersList),cn(this._overlaysList),this._layerControlInputs=[];var t,e,i,o,l=0;for(i=0;i<this._layers.length;i++)o=this._layers[i],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,l+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&l>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(p(t.target)),i=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=i,o.firstChild},_addItem:function(t){var e=document.createElement("label"),i=this._map.hasLayer(t.layer),o;t.overlay?(o=document.createElement("input"),o.type="checkbox",o.className="leaflet-control-layers-selector",o.defaultChecked=i):o=this._createRadioElement("leaflet-base-layers_"+p(this),i),this._layerControlInputs.push(o),o.layerId=p(t.layer),At(o,"click",this._onInputClick,this);var l=document.createElement("span");l.innerHTML=" "+t.name;var f=document.createElement("span");e.appendChild(f),f.appendChild(o),f.appendChild(l);var m=t.overlay?this._overlaysList:this._baseLayersList;return m.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,i,o=[],l=[];this._handlingClick=!0;for(var f=t.length-1;f>=0;f--)e=t[f],i=this._getLayer(e.layerId).layer,e.checked?o.push(i):e.checked||l.push(i);for(f=0;f<l.length;f++)this._map.hasLayer(l[f])&&this._map.removeLayer(l[f]);for(f=0;f<o.length;f++)this._map.hasLayer(o[f])||this._map.addLayer(o[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,i,o=this._map.getZoom(),l=t.length-1;l>=0;l--)e=t[l],i=this._getLayer(e.layerId).layer,e.disabled=i.options.minZoom!==void 0&&o<i.options.minZoom||i.options.maxZoom!==void 0&&o>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,At(t,"click",Ke),this.expand();var e=this;setTimeout(function(){Ee(t,"click",Ke),e._preventClick=!1})}}),wl=function(t,e,i){return new co(t,e,i)},ws=Ci.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=Rt("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,o,l){var f=Rt("a",i,o);return f.innerHTML=t,f.href="#",f.title=e,f.setAttribute("role","button"),f.setAttribute("aria-label",e),ar(f),At(f,"click",Ln),At(f,"click",l,this),At(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";Ze(this._zoomInButton,e),Ze(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Mt(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Mt(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xt.mergeOptions({zoomControl:!0}),Xt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ws,this.addControl(this.zoomControl))});var xl=function(t){return new ws(t)},uo=Ci.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=Rt("div",e),o=this.options;return this._addScales(o,e+"-line",i),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=Rt("div",e,i)),t.imperial&&(this._iScale=Rt("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e=t*3.2808399,i,o,l;e>5280?(i=e/5280,o=this._getRoundNum(i),this._updateScale(this._iScale,o+" mi",o/i)):(l=this._getRoundNum(e),this._updateScale(this._iScale,l+" ft",l/e))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Pl=function(t){return new uo(t)},kl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xs=Ci.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(I.inlineSvg?kl+" ":"")+"Leaflet</a>"},initialize:function(t){A(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Rt("div","leaflet-control-attribution"),ar(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});Xt.mergeOptions({attributionControl:!0}),Xt.addInitHook(function(){this.options.attributionControl&&new xs().addTo(this)});var Tl=function(t){return new xs(t)};Ci.Layers=co,Ci.Zoom=ws,Ci.Scale=uo,Ci.Attribution=xs,lr.layers=wl,lr.zoom=xl,lr.scale=Pl,lr.attribution=Tl;var Zi=Qt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zi.addTo=function(t,e){return t.addHandler(e,this),this};var Ll={Events:ht},ho=I.touch?"touchstart mousedown":"mousedown",hn=H.extend({options:{clickTolerance:3},initialize:function(t,e,i,o){A(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(At(this._dragStartTarget,ho,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(hn._dragging===this&&this.finishDrag(!0),Ee(this._dragStartTarget,ho,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Bn(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){hn._dragging===this&&this.finishDrag();return}if(!(hn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(hn._dragging=this,this._preventOutline&&vs(this._element),ds(),Vi(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=no(this._element);this._startPoint=new B(e.clientX,e.clientY),this._startPos=ai(this._element),this._parentScale=_s(i);var o=t.type==="mousedown";At(document,o?"mousemove":"touchmove",this._onMove,this),At(document,o?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,i=new B(e.clientX,e.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ke(t),this._moved||(this.fire("dragstart"),this._moved=!0,Mt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Mt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ge(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ee(document,"mousemove touchmove",this._onMove,this),Ee(document,"mouseup touchend touchcancel",this._onUp,this),hs(),kn();var e=this._moved&&this._moving;this._moving=!1,hn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function fo(t,e,i){var o,l=[1,4,2,8],f,m,w,T,$,U,vt,jt;for(f=0,U=t.length;f<U;f++)t[f]._code=En(t[f],e);for(w=0;w<4;w++){for(vt=l[w],o=[],f=0,U=t.length,m=U-1;f<U;m=f++)T=t[f],$=t[m],T._code&vt?$._code&vt||(jt=Nr($,T,vt,e,i),jt._code=En(jt,e),o.push(jt)):($._code&vt&&(jt=Nr($,T,vt,e,i),jt._code=En(jt,e),o.push(jt)),o.push(T));t=o}return t}function vo(t,e){var i,o,l,f,m,w,T,$,U;if(!t||t.length===0)throw new Error("latlngs not passed");xi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var vt=W([0,0]),jt=ct(t),li=jt.getNorthWest().distanceTo(jt.getSouthWest())*jt.getNorthEast().distanceTo(jt.getNorthWest());li<1700&&(vt=Ps(t));var Ue=t.length,Pi=[];for(i=0;i<Ue;i++){var fi=W(t[i]);Pi.push(e.project(W([fi.lat-vt.lat,fi.lng-vt.lng])))}for(w=T=$=0,i=0,o=Ue-1;i<Ue;o=i++)l=Pi[i],f=Pi[o],m=l.y*f.x-f.y*l.x,T+=(l.x+f.x)*m,$+=(l.y+f.y)*m,w+=m*3;w===0?U=Pi[0]:U=[T/w,$/w];var Wn=e.unproject(q(U));return W([Wn.lat+vt.lat,Wn.lng+vt.lng])}function Ps(t){for(var e=0,i=0,o=0,l=0;l<t.length;l++){var f=W(t[l]);e+=f.lat,i+=f.lng,o++}return W([e/o,i/o])}var El={__proto__:null,clipPolygon:fo,polygonCenter:vo,centroid:Ps};function _o(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Ml(t,i),t=zl(t,i),t}function po(t,e,i){return Math.sqrt(cr(t,e,i,!0))}function Sl(t,e,i){return cr(t,e,i)}function zl(t,e){var i=t.length,o=typeof Uint8Array<"u"?Uint8Array:Array,l=new o(i);l[0]=l[i-1]=1,ks(t,l,e,0,i-1);var f,m=[];for(f=0;f<i;f++)l[f]&&m.push(t[f]);return m}function ks(t,e,i,o,l){var f=0,m,w,T;for(w=o+1;w<=l-1;w++)T=cr(t[w],t[o],t[l],!0),T>f&&(m=w,f=T);f>i&&(e[m]=1,ks(t,e,i,o,m),ks(t,e,i,m,l))}function Ml(t,e){for(var i=[t[0]],o=1,l=0,f=t.length;o<f;o++)Cl(t[o],t[l])>e&&(i.push(t[o]),l=o);return l<f-1&&i.push(t[f-1]),i}var mo;function go(t,e,i,o,l){var f=o?mo:En(t,i),m=En(e,i),w,T,$;for(mo=m;;){if(!(f|m))return[t,e];if(f&m)return!1;w=f||m,T=Nr(t,e,w,i,l),$=En(T,i),w===f?(t=T,f=$):(e=T,m=$)}}function Nr(t,e,i,o,l){var f=e.x-t.x,m=e.y-t.y,w=o.min,T=o.max,$,U;return i&8?($=t.x+f*(T.y-t.y)/m,U=T.y):i&4?($=t.x+f*(w.y-t.y)/m,U=w.y):i&2?($=T.x,U=t.y+m*(T.x-t.x)/f):i&1&&($=w.x,U=t.y+m*(w.x-t.x)/f),new B($,U,l)}function En(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Cl(t,e){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o}function cr(t,e,i,o){var l=e.x,f=e.y,m=i.x-l,w=i.y-f,T=m*m+w*w,$;return T>0&&($=((t.x-l)*m+(t.y-f)*w)/T,$>1?(l=i.x,f=i.y):$>0&&(l+=m*$,f+=w*$)),m=t.x-l,w=t.y-f,o?m*m+w*w:new B(l,f)}function xi(t){return!j(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function yo(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xi(t)}function bo(t,e){var i,o,l,f,m,w,T,$;if(!t||t.length===0)throw new Error("latlngs not passed");xi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var U=W([0,0]),vt=ct(t),jt=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());jt<1700&&(U=Ps(t));var li=t.length,Ue=[];for(i=0;i<li;i++){var Pi=W(t[i]);Ue.push(e.project(W([Pi.lat-U.lat,Pi.lng-U.lng])))}for(i=0,o=0;i<li-1;i++)o+=Ue[i].distanceTo(Ue[i+1])/2;if(o===0)$=Ue[0];else for(i=0,f=0;i<li-1;i++)if(m=Ue[i],w=Ue[i+1],l=m.distanceTo(w),f+=l,f>o){T=(f-o)/l,$=[w.x-T*(w.x-m.x),w.y-T*(w.y-m.y)];break}var fi=e.unproject(q($));return W([fi.lat+U.lat,fi.lng+U.lng])}var Al={__proto__:null,simplify:_o,pointToSegmentDistance:po,closestPointOnSegment:Sl,clipSegment:go,_getEdgeIntersection:Nr,_getBitCode:En,_sqClosestPointOnSegment:cr,isFlat:xi,_flat:yo,polylineCenter:bo},Ts={project:function(t){return new B(t.lng,t.lat)},unproject:function(t){return new gt(t.y,t.x)},bounds:new et([-180,-90],[180,90])},Ls={R:6378137,R_MINOR:6356752314245179e-9,bounds:new et([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,i=this.R,o=t.lat*e,l=this.R_MINOR/i,f=Math.sqrt(1-l*l),m=f*Math.sin(o),w=Math.tan(Math.PI/4-o/2)/Math.pow((1-m)/(1+m),f/2);return o=-i*Math.log(Math.max(w,1e-10)),new B(t.lng*e*i,o)},unproject:function(t){for(var e=180/Math.PI,i=this.R,o=this.R_MINOR/i,l=Math.sqrt(1-o*o),f=Math.exp(-t.y/i),m=Math.PI/2-2*Math.atan(f),w=0,T=.1,$;w<15&&Math.abs(T)>1e-7;w++)$=l*Math.sin(m),$=Math.pow((1-$)/(1+$),l/2),T=Math.PI/2-2*Math.atan(f*$)-m,m+=T;return new gt(m*e,t.x*e/i)}},Ol={__proto__:null,LonLat:Ts,Mercator:Ls,SphericalMercator:C},Il=u({},be,{code:"EPSG:3395",projection:Ls,transformation:(function(){var t=.5/(Math.PI*Ls.R);return Q(t,.5,-t,.5)})()}),wo=u({},be,{code:"EPSG:4326",projection:Ts,transformation:Q(1/180,1,-1/180,.5)}),$l=u({},It,{projection:Ts,transformation:Q(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(i*i+o*o)},infinite:!0});It.Earth=be,It.EPSG3395=Il,It.EPSG3857=nt,It.EPSG900913=$t,It.EPSG4326=wo,It.Simple=$l;var Ai=H.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[p(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[p(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Xt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=p(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=p(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return p(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?j(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[p(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=p(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var o in this._zoomBoundLayers){var l=this._zoomBoundLayers[o].options;t=l.minZoom===void 0?t:Math.min(t,l.minZoom),e=l.maxZoom===void 0?e:Math.max(e,l.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Ai.extend({initialize:function(t,e){A(this,e),this._layers={};var i,o;if(t)for(i=0,o=t.length;i<o;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),i,o;for(i in this._layers)o=this._layers[i],o[t]&&o[t].apply(o,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return p(t)}}),Dl=function(t,e){return new qn(t,e)},Gi=qn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),qn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),qn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ft;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Nl=function(t,e){return new Gi(t,e)},Rn=Qt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){A(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(i,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(o,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o},_setIconStyles:function(t,e){var i=this.options,o=i[e+"Size"];typeof o=="number"&&(o=[o,o]);var l=q(o),f=q(e==="shadow"&&i.shadowAnchor||i.iconAnchor||l&&l.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),f&&(t.style.marginLeft=-f.x+"px",t.style.marginTop=-f.y+"px"),l&&(t.style.width=l.x+"px",t.style.height=l.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return I.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Zl(t){return new Rn(t)}var ur=Rn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof ur.imagePath!="string"&&(ur.imagePath=this._detectIconPath()),(this.options.imagePath||ur.imagePath)+Rn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(i,o,l){var f=o.exec(i);return f&&f[l]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Rt("div","leaflet-default-icon-path",document.body),e=Je(t,"background-image")||Je(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),xo=Zi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new hn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Mt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,o=this._marker.options.autoPanSpeed,l=this._marker.options.autoPanPadding,f=ai(e._icon),m=i.getPixelBounds(),w=i.getPixelOrigin(),T=pt(m.min._subtract(w).add(l),m.max._subtract(w).subtract(l));if(!T.contains(f)){var $=q((Math.max(T.max.x,f.x)-T.max.x)/(m.max.x-T.max.x)-(Math.min(T.min.x,f.x)-T.min.x)/(m.min.x-T.min.x),(Math.max(T.max.y,f.y)-T.max.y)/(m.max.y-T.max.y)-(Math.min(T.min.y,f.y)-T.min.y)/(m.min.y-T.min.y)).multiplyBy(o);i.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),ge(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=wt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Ot(this._panRequest),this._panRequest=wt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,o=ai(e._icon),l=e._map.layerPointToLatLng(o);i&&ge(i,o),e._latlng=l,t.latlng=l,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Ot(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Zr=Ai.extend({options:{icon:new ur,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){A(this,e),this._latlng=W(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),o=!1;i!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(i.title=t.title),i.tagName==="IMG"&&(i.alt=t.alt||"")),Mt(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(i,"focus",this._panOnFocus,this);var l=t.icon.createShadow(this._shadow),f=!1;l!==this._shadow&&(this._removeShadow(),f=!0),l&&(Mt(l,e),l.alt=""),this._shadow=l,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),l&&f&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(this._icon,"focus",this._panOnFocus,this),xe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ge(this._icon,t),this._shadow&&ge(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Mt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ae(this._icon,t),this._shadow&&Ae(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?q(e.iconSize):q(0,0),o=e.iconAnchor?q(e.iconAnchor):q(0,0);t.panInside(this._latlng,{paddingTopLeft:o,paddingBottomRight:i.subtract(o)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Bl(t,e){return new Zr(t,e)}var fn=Ai.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return A(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Br=fn.extend({options:{fill:!0,radius:10},initialize:function(t,e){A(this,e),this._latlng=W(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=W(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return fn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),o=[t+i,e+i];this._pxBounds=new et(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ql(t,e){return new Br(t,e)}var Es=Br.extend({initialize:function(t,e,i){if(typeof e=="number"&&(e=u({},i,{radius:e})),A(this,e),this._latlng=W(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:fn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,o=i.options.crs;if(o.distance===be.distance){var l=Math.PI/180,f=this._mRadius/be.R/l,m=i.project([e+f,t]),w=i.project([e-f,t]),T=m.add(w).divideBy(2),$=i.unproject(T).lat,U=Math.acos((Math.cos(f*l)-Math.sin(e*l)*Math.sin($*l))/(Math.cos(e*l)*Math.cos($*l)))/l;(isNaN(U)||U===0)&&(U=f/Math.cos(Math.PI/180*e)),this._point=T.subtract(i.getPixelOrigin()),this._radius=isNaN(U)?0:T.x-i.project([$,t-U]).x,this._radiusY=T.y-m.y}else{var vt=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(vt).x}this._updateBounds()}});function Rl(t,e,i){return new Es(t,e,i)}var Yi=fn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){A(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,i=null,o=cr,l,f,m=0,w=this._parts.length;m<w;m++)for(var T=this._parts[m],$=1,U=T.length;$<U;$++){l=T[$-1],f=T[$];var vt=o(t,l,f,!0);vt<e&&(e=vt,i=o(t,l,f))}return i&&(i.distance=Math.sqrt(e)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=W(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ft,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=xi(t),o=0,l=t.length;o<l;o++)i?(e[o]=W(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new et;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new B(t,t);this._rawPxBounds&&(this._pxBounds=new et([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var o=t[0]instanceof gt,l=t.length,f,m;if(o){for(m=[],f=0;f<l;f++)m[f]=this._map.latLngToLayerPoint(t[f]),i.extend(m[f]);e.push(m)}else for(f=0;f<l;f++)this._projectLatlngs(t[f],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,i,o,l,f,m,w,T;for(i=0,l=0,f=this._rings.length;i<f;i++)for(T=this._rings[i],o=0,m=T.length;o<m-1;o++)w=go(T[o],T[o+1],t,o,!0),w&&(e[l]=e[l]||[],e[l].push(w[0]),(w[1]!==T[o+1]||o===m-2)&&(e[l].push(w[1]),l++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,o=t.length;i<o;i++)t[i]=_o(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,o,l,f,m,w,T=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,f=this._parts.length;i<f;i++)for(w=this._parts[i],o=0,m=w.length,l=m-1;o<m;l=o++)if(!(!e&&o===0)&&po(t,w[l],w[o])<=T)return!0;return!1}});function jl(t,e){return new Yi(t,e)}Yi._flat=yo;var jn=Yi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Yi.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof gt&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Yi.prototype._setLatLngs.call(this,t),xi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new B(e,e);if(t=new et(t.min.subtract(i),t.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var o=0,l=this._rings.length,f;o<l;o++)f=fo(this._rings[o],t,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,i,o,l,f,m,w,T,$;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(f=0,T=this._parts.length;f<T;f++)for(i=this._parts[f],m=0,$=i.length,w=$-1;m<$;w=m++)o=i[m],l=i[w],o.y>t.y!=l.y>t.y&&t.x<(l.x-o.x)*(t.y-o.y)/(l.y-o.y)+o.x&&(e=!e);return e||Yi.prototype._containsPoint.call(this,t,!0)}});function Fl(t,e){return new jn(t,e)}var Ji=Gi.extend({initialize:function(t,e){A(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=j(t)?t:t.features,i,o,l;if(e){for(i=0,o=e.length;i<o;i++)l=e[i],(l.geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var f=this.options;if(f.filter&&!f.filter(t))return this;var m=qr(t,f);return m?(m.feature=Fr(t),m.defaultOptions=m.options,this.resetStyle(m),f.onEachFeature&&f.onEachFeature(t,m),this.addLayer(m)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function qr(t,e){var i=t.type==="Feature"?t.geometry:t,o=i?i.coordinates:null,l=[],f=e&&e.pointToLayer,m=e&&e.coordsToLatLng||Ss,w,T,$,U;if(!o&&!i)return null;switch(i.type){case"Point":return w=m(o),Po(f,t,w,e);case"MultiPoint":for($=0,U=o.length;$<U;$++)w=m(o[$]),l.push(Po(f,t,w,e));return new Gi(l);case"LineString":case"MultiLineString":return T=Rr(o,i.type==="LineString"?0:1,m),new Yi(T,e);case"Polygon":case"MultiPolygon":return T=Rr(o,i.type==="Polygon"?1:2,m),new jn(T,e);case"GeometryCollection":for($=0,U=i.geometries.length;$<U;$++){var vt=qr({geometry:i.geometries[$],type:"Feature",properties:t.properties},e);vt&&l.push(vt)}return new Gi(l);case"FeatureCollection":for($=0,U=i.features.length;$<U;$++){var jt=qr(i.features[$],e);jt&&l.push(jt)}return new Gi(l);default:throw new Error("Invalid GeoJSON object.")}}function Po(t,e,i,o){return t?t(e,i):new Zr(i,o&&o.markersInheritOptions&&o)}function Ss(t){return new gt(t[1],t[0],t[2])}function Rr(t,e,i){for(var o=[],l=0,f=t.length,m;l<f;l++)m=e?Rr(t[l],e-1,i):(i||Ss)(t[l]),o.push(m);return o}function zs(t,e){return t=W(t),t.alt!==void 0?[P(t.lng,e),P(t.lat,e),P(t.alt,e)]:[P(t.lng,e),P(t.lat,e)]}function jr(t,e,i,o){for(var l=[],f=0,m=t.length;f<m;f++)l.push(e?jr(t[f],xi(t[f])?0:e-1,i,o):zs(t[f],o));return!e&&i&&l.length>0&&l.push(l[0].slice()),l}function Fn(t,e){return t.feature?u({},t.feature,{geometry:e}):Fr(e)}function Fr(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Ms={toGeoJSON:function(t){return Fn(this,{type:"Point",coordinates:zs(this.getLatLng(),t)})}};Zr.include(Ms),Es.include(Ms),Br.include(Ms),Yi.include({toGeoJSON:function(t){var e=!xi(this._latlngs),i=jr(this._latlngs,e?1:0,!1,t);return Fn(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),jn.include({toGeoJSON:function(t){var e=!xi(this._latlngs),i=e&&!xi(this._latlngs[0]),o=jr(this._latlngs,i?2:e?1:0,!0,t);return e||(o=[o]),Fn(this,{type:(i?"Multi":"")+"Polygon",coordinates:o})}}),qn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),Fn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var i=e==="GeometryCollection",o=[];return this.eachLayer(function(l){if(l.toGeoJSON){var f=l.toGeoJSON(t);if(i)o.push(f.geometry);else{var m=Fr(f);m.type==="FeatureCollection"?o.push.apply(o,m.features):o.push(m)}}}),i?Fn(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});function ko(t,e){return new Ji(t,e)}var Hl=ko,Hr=Ai.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=ct(e),A(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Mt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ui(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ct(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:Rt("img");if(Mt(e,"leaflet-image-layer"),this._zoomAnimated&&Mt(e,"leaflet-zoom-animated"),this.options.className&&Mt(e,this.options.className),e.onselectstart=b,e.onmousemove=b,e.onload=d(this.fire,this,"load"),e.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;gi(this._image,i,e)},_reset:function(){var t=this._image,e=new et(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();ge(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Ae(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Wl=function(t,e,i){return new Hr(t,e,i)},To=Hr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:Rt("video");if(Mt(e,"leaflet-image-layer"),this._zoomAnimated&&Mt(e,"leaflet-zoom-animated"),this.options.className&&Mt(e,this.options.className),e.onselectstart=b,e.onmousemove=b,e.onloadeddata=d(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),o=[],l=0;l<i.length;l++)o.push(i[l].src);this._url=i.length>0?o:[e.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var m=Rt("source");m.src=this._url[f],e.appendChild(m)}}});function Ul(t,e,i){return new To(t,e,i)}var Lo=Hr.extend({_initImage:function(){var t=this._image=this._url;Mt(t,"leaflet-image-layer"),this._zoomAnimated&&Mt(t,"leaflet-zoom-animated"),this.options.className&&Mt(t,this.options.className),t.onselectstart=b,t.onmousemove=b}});function Vl(t,e,i){return new Lo(t,e,i)}var Bi=Ai.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof gt||j(t))?(this._latlng=W(t),A(this,e)):(A(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ae(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ae(this._container,1),this.bringToFront(),this.options.interactive&&(Mt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ae(this._container,0),this._removeTimeout=setTimeout(d(xe,void 0,this._container),200)):xe(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=W(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ui(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Gi){e=null;var i=this._source._layers;for(var o in i)if(i[o]._map){e=i[o];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=q(this.options.offset),i=this._getAnchor();this._zoomAnimated?ge(this._container,t.add(i)):e=e.add(t).add(i);var o=this._containerBottom=-e.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=l+"px"}},_getAnchor:function(){return[0,0]}});Xt.include({_initOverlay:function(t,e,i,o){var l=e;return l instanceof t||(l=new t(o).setContent(e)),i&&l.setLatLng(i),l}}),Ai.include({_initOverlay:function(t,e,i,o){var l=i;return l instanceof t?(A(l,o),l._source=this):(l=e&&!o?e:new t(o,this),l.setContent(i)),l}});var Wr=Bi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Bi.prototype.openOn.call(this,t)},onAdd:function(t){Bi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof fn||this._source.on("preclick",Tn))},onRemove:function(t){Bi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof fn||this._source.off("preclick",Tn))},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=Rt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=Rt("div",t+"-content-wrapper",e);if(this._contentNode=Rt("div",t+"-content",i),ar(e),ys(this._contentNode),At(e,"contextmenu",Tn),this._tipContainer=Rt("div",t+"-tip-container",e),this._tip=Rt("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=Rt("a",t+"-close-button",e);o.setAttribute("role","button"),o.setAttribute("aria-label","Close popup"),o.href="#close",o.innerHTML='<span aria-hidden="true">&#215;</span>',At(o,"click",function(l){Ke(l),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,l=this.options.maxHeight,f="leaflet-popup-scrolled";l&&o>l?(e.height=l+"px",Mt(t,f)):Ze(t,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();ge(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Je(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,o=this._containerWidth,l=new B(this._containerLeft,-i-this._containerBottom);l._add(ai(this._container));var f=t.layerPointToContainerPoint(l),m=q(this.options.autoPanPadding),w=q(this.options.autoPanPaddingTopLeft||m),T=q(this.options.autoPanPaddingBottomRight||m),$=t.getSize(),U=0,vt=0;f.x+o+T.x>$.x&&(U=f.x+o-$.x+T.x),f.x-U-w.x<0&&(U=f.x-w.x),f.y+i+T.y>$.y&&(vt=f.y+i-$.y+T.y),f.y-vt-w.y<0&&(vt=f.y-w.y),(U||vt)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([U,vt]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gl=function(t,e){return new Wr(t,e)};Xt.mergeOptions({closePopupOnClick:!0}),Xt.include({openPopup:function(t,e,i){return this._initOverlay(Wr,t,e,i).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ai.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Wr,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Gi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Ln(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof fn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ur=Bi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Bi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Bi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Bi.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Rt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,o=this._map,l=this._container,f=o.latLngToContainerPoint(o.getCenter()),m=o.layerPointToContainerPoint(t),w=this.options.direction,T=l.offsetWidth,$=l.offsetHeight,U=q(this.options.offset),vt=this._getAnchor();w==="top"?(e=T/2,i=$):w==="bottom"?(e=T/2,i=0):w==="center"?(e=T/2,i=$/2):w==="right"?(e=0,i=$/2):w==="left"?(e=T,i=$/2):m.x<f.x?(w="right",e=0,i=$/2):(w="left",e=T+(U.x+vt.x)*2,i=$/2),t=t.subtract(q(e,i,!0)).add(U).add(vt),Ze(l,"leaflet-tooltip-right"),Ze(l,"leaflet-tooltip-left"),Ze(l,"leaflet-tooltip-top"),Ze(l,"leaflet-tooltip-bottom"),Mt(l,"leaflet-tooltip-"+w),ge(l,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ae(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Yl=function(t,e){return new Ur(t,e)};Xt.include({openTooltip:function(t,e,i){return this._initOverlay(Ur,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ai.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ur,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Gi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(At(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),At(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,i,o;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),o=this._map.containerPointToLayerPoint(i),e=this._map.layerPointToLatLng(o)),this._tooltip.setLatLng(e)}});var Eo=Rn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(cn(e),e.appendChild(i.html)):e.innerHTML=i.html!==!1?i.html:"",i.bgPos){var o=q(i.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Jl(t){return new Eo(t)}Rn.Default=ur;var dr=Ai.extend({options:{tileSize:256,opacity:1,updateWhenIdle:I.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){A(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),xe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ui(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=y(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof B?t:new B(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,i=-t(-1/0,1/0),o=0,l=e.length,f;o<l;o++)f=e[o].style.zIndex,e[o]!==this._container&&f&&(i=t(i,+f));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!I.ielt9){Ae(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var o in this._tiles){var l=this._tiles[o];if(!(!l.current||!l.loaded)){var f=Math.min(1,(t-l.loaded)/200);Ae(l.el,f),f<1?e=!0:(l.active?i=!0:this._onOpaqueTile(l),l.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(Ot(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this))}},_onOpaqueTile:b,_initContainer:function(){this._container||(this._container=Rt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(xe(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var o=this._levels[t],l=this._map;return o||(o=this._levels[t]={},o.el=Rt("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=l.project(l.unproject(l.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,l.getCenter(),l.getZoom()),b(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:b,_onRemoveLevel:b,_onCreateLevel:b,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)xe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,o){var l=Math.floor(t/2),f=Math.floor(e/2),m=i-1,w=new B(+l,+f);w.z=+m;var T=this._tileCoordsToKey(w),$=this._tiles[T];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),m>o?this._retainParent(l,f,m,o):!1)},_retainChildren:function(t,e,i,o){for(var l=2*t;l<2*t+2;l++)for(var f=2*e;f<2*e+2;f++){var m=new B(l,f);m.z=i+1;var w=this._tileCoordsToKey(m),T=this._tiles[w];if(T&&T.active){T.retain=!0;continue}else T&&T.loaded&&(T.retain=!0);i+1<o&&this._retainChildren(l,f,i+1,o)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,o){var l=Math.round(e);this.options.maxZoom!==void 0&&l>this.options.maxZoom||this.options.minZoom!==void 0&&l<this.options.minZoom?l=void 0:l=this._clampZoom(l);var f=this.options.updateWhenZooming&&l!==this._tileZoom;(!o||f)&&(this._tileZoom=l,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),l!==void 0&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var o=this._map.getZoomScale(i,t.zoom),l=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,i)).round();I.any3d?gi(t.el,l,o):ge(t.el,l)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),o=this._tileZoom,l=this._map.getPixelWorldBounds(this._tileZoom);l&&(this._globalTileRange=this._pxBoundsToTileRange(l)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(i,this._tileZoom),l=e.project(t,this._tileZoom).floor(),f=e.getSize().divideBy(o*2);return new et(l.subtract(f),l.add(f))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var o=this._getTiledPixelBounds(t),l=this._pxBoundsToTileRange(o),f=l.getCenter(),m=[],w=this.options.keepBuffer,T=new et(l.getBottomLeft().subtract([w,-w]),l.getTopRight().add([w,-w]));if(!(isFinite(l.min.x)&&isFinite(l.min.y)&&isFinite(l.max.x)&&isFinite(l.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var U=this._tiles[$].coords;(U.z!==this._tileZoom||!T.contains(new B(U.x,U.y)))&&(this._tiles[$].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(t,i);return}for(var vt=l.min.y;vt<=l.max.y;vt++)for(var jt=l.min.x;jt<=l.max.x;jt++){var li=new B(jt,vt);if(li.z=this._tileZoom,!!this._isValidTile(li)){var Ue=this._tiles[this._tileCoordsToKey(li)];Ue?Ue.current=!0:m.push(li)}}if(m.sort(function(fi,Wn){return fi.distanceTo(f)-Wn.distanceTo(f)}),m.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Pi=document.createDocumentFragment();for(jt=0;jt<m.length;jt++)this._addTile(m[jt],Pi);this._level.el.appendChild(Pi)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return ct(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),o=t.scaleBy(i),l=o.add(i),f=e.unproject(o,t.z),m=e.unproject(l,t.z);return[f,m]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new ft(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new B(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(xe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Mt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=b,t.onmousemove=b,I.ielt9&&this.options.opacity<1&&Ae(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),o=this._tileCoordsToKey(t),l=this.createTile(this._wrapCoords(t),d(this._tileReady,this,t));this._initTile(l),this.createTile.length<2&&wt(d(this._tileReady,this,t,null,l)),ge(l,i),this._tiles[o]={el:l,coords:t,current:!0},e.appendChild(l),this.fire("tileloadstart",{tile:l,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var o=this._tileCoordsToKey(t);i=this._tiles[o],i&&(i.loaded=+new Date,this._map._fadeAnimated?(Ae(i.el,0),Ot(this._fadeFrame),this._fadeFrame=wt(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(Mt(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),I.ielt9||!this._map._fadeAnimated?wt(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new B(this._wrapX?x(t.x,this._wrapX):t.x,this._wrapY?x(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new et(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Kl(t){return new dr(t)}var Hn=dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=A(this,e),e.detectRetina&&I.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return At(i,"load",d(this._tileOnLoad,this,e,i)),At(i,"error",d(this._tileOnError,this,e,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:I.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return at(this._url,u(e,this.options))},_tileOnLoad:function(t,e){I.ielt9?setTimeout(d(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,o=this.options.zoomOffset;return i&&(t=e-t),t+o},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=b,e.onerror=b,!e.complete)){e.src=K;var i=this._tiles[t].coords;xe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",K),dr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(!(!this._map||i&&i.getAttribute("src")===K))return dr.prototype._tileReady.call(this,t,e,i)}});function So(t,e){return new Hn(t,e)}var zo=Hn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=u({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);e=A(this,e);var l=e.detectRetina&&I.retina?2:1,f=this.getTileSize();i.width=f.x*l,i.height=f.y*l,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Hn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,o=pt(i.project(e[0]),i.project(e[1])),l=o.min,f=o.max,m=(this._wmsVersion>=1.3&&this._crs===wo?[l.y,l.x,f.y,f.x]:[l.x,l.y,f.x,f.y]).join(","),w=Hn.prototype.getTileUrl.call(this,t);return w+M(this.wmsParams,w,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+m},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function Xl(t,e){return new zo(t,e)}Hn.WMS=zo,So.wms=Xl;var Ki=Ai.extend({options:{padding:.1},initialize:function(t){A(this,t),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Mt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),o=this._map.getSize().multiplyBy(.5+this.options.padding),l=this._map.project(this._center,e),f=o.multiplyBy(-i).add(l).subtract(this._map._getNewPixelOrigin(t,e));I.any3d?gi(this._container,f,i):ge(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new et(i,i.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Mo=Ki.extend({options:{tolerance:0},getEvents:function(){var t=Ki.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ki.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");At(t,"mousemove",this._onMouseMove,this),At(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),At(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Ot(this._redrawRequest),delete this._ctx,xe(this._container),Ee(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ki.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),o=I.retina?2:1;ge(e,t.min),e.width=o*i.x,e.height=o*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",I.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ki.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[p(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,o=e.prev;i?i.prev=o:this._drawLast=o,o?o.next=i:this._drawFirst=i,delete t._order,delete this._layers[p(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),i=[],o,l;for(l=0;l<e.length;l++){if(o=Number(e[l]),isNaN(o))return;i.push(o)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||wt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new et,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,o,l,f,m=t._parts,w=m.length,T=this._ctx;if(w){for(T.beginPath(),i=0;i<w;i++){for(o=0,l=m[i].length;o<l;o++)f=m[i][o],T[o?"lineTo":"moveTo"](f.x,f.y);e&&T.closePath()}this._fillStroke(T,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,i=this._ctx,o=Math.max(Math.round(t._radius),1),l=(Math.max(Math.round(t._radiusY),1)||o)/o;l!==1&&(i.save(),i.scale(1,l)),i.beginPath(),i.arc(e.x,e.y/l,o,0,Math.PI*2,!1),l!==1&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),i,o,l=this._drawFirst;l;l=l.next)i=l.layer,i.options.interactive&&i._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(i))&&(o=i);this._fireEvent(o?[o]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,o,l=this._drawFirst;l;l=l.next)i=l.layer,i.options.interactive&&i._containsPoint(e)&&(o=i);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(Mt(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(i)i.prev=o;else return;o?o.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,o=e.prev;if(o)o.next=i;else return;i?i.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Co(t){return I.canvas?new Mo(t):null}var hr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ql={_initContainer:function(){this._container=Rt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ki.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hr("shape");Mt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;xe(e),t.removeInteractiveTarget(e),delete this._layers[p(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,o=t.options,l=t._container;l.stroked=!!o.stroke,l.filled=!!o.fill,o.stroke?(e||(e=t._stroke=hr("stroke")),l.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=j(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(l.removeChild(e),t._stroke=null),o.fill?(i||(i=t._fill=hr("fill")),l.appendChild(i),i.color=o.fillColor||o.color,i.opacity=o.fillOpacity):i&&(l.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),o=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+o+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ui(t._container)},_bringToBack:function(t){un(t._container)}},Vr=I.vml?hr:Ut,fr=Ki.extend({_initContainer:function(){this._container=Vr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xe(this._container),Ee(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ki.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),ge(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Vr("path");t.options.className&&Mt(e,t.options.className),t.options.interactive&&Mt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){xe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[p(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,_t(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),o=Math.max(Math.round(t._radiusY),1)||i,l="a"+i+","+o+" 0 1,0 ",f=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+l+i*2+",0 "+l+-i*2+",0 ";this._setPath(t,f)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ui(t._path)},_bringToBack:function(t){un(t._path)}});I.vml&&fr.include(Ql);function Ao(t){return I.svg||I.vml?new fr(t):null}Xt.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Co(t)||Ao(t)}});var Oo=jn.extend({initialize:function(t,e){jn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ct(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function tc(t,e){return new Oo(t,e)}fr.create=Vr,fr.pointsToPath=_t,Ji.geometryToLayer=qr,Ji.coordsToLatLng=Ss,Ji.coordsToLatLngs=Rr,Ji.latLngToCoords=zs,Ji.latLngsToCoords=jr,Ji.getFeature=Fn,Ji.asFeature=Fr,Xt.mergeOptions({boxZoom:!0});var Io=Zi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vi(),ds(),this._startPoint=this._map.mouseEventToContainerPoint(t),At(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Rt("div","leaflet-zoom-box",this._container),Mt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new et(this._point,this._startPoint),i=e.getSize();ge(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(xe(this._box),Ze(this._container,"leaflet-crosshair")),kn(),hs(),Ee(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var e=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xt.addInitHook("addHandler","boxZoom",Io),Xt.mergeOptions({doubleClickZoom:!0});var $o=Zi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),o=e.options.zoomDelta,l=t.originalEvent.shiftKey?i-o:i+o;e.options.doubleClickZoom==="center"?e.setZoom(l):e.setZoomAround(t.containerPoint,l)}});Xt.addInitHook("addHandler","doubleClickZoom",$o),Xt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Do=Zi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new hn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Mt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ct(this._map.options.maxBounds);this._offsetLimit=pt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,o=this._draggable._newPos.x,l=(o-e+i)%t+e-i,f=(o+e+i)%t-e-i,m=Math.abs(l+i)<Math.abs(f+i)?l:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=m},_onDragEnd:function(t){var e=this._map,i=e.options,o=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{this._prunePositions(+new Date);var l=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,m=i.easeLinearity,w=l.multiplyBy(m/f),T=w.distanceTo([0,0]),$=Math.min(i.inertiaMaxSpeed,T),U=w.multiplyBy($/T),vt=$/(i.inertiaDeceleration*m),jt=U.multiplyBy(-vt/2).round();!jt.x&&!jt.y?e.fire("moveend"):(jt=e._limitOffset(jt,e.options.maxBounds),wt(function(){e.panBy(jt,{duration:vt,easeLinearity:m,noMoveStart:!0,animate:!0})}))}}});Xt.addInitHook("addHandler","dragging",Do),Xt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var No=Zi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),At(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},i=this.keyCodes,o,l;for(o=0,l=i.left.length;o<l;o++)e[i.left[o]]=[-1*t,0];for(o=0,l=i.right.length;o<l;o++)e[i.right[o]]=[t,0];for(o=0,l=i.down.length;o<l;o++)e[i.down[o]]=[0,t];for(o=0,l=i.up.length;o<l;o++)e[i.up[o]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},i=this.keyCodes,o,l;for(o=0,l=i.zoomIn.length;o<l;o++)e[i.zoomIn[o]]=t;for(o=0,l=i.zoomOut.length;o<l;o++)e[i.zoomOut[o]]=-t},_addHooks:function(){At(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,i=this._map,o;if(e in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(o=this._panKeys[e],t.shiftKey&&(o=q(o).multiplyBy(3)),i.options.maxBounds&&(o=i._limitOffset(q(o),i.options.maxBounds)),i.options.worldCopyJump){var l=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(o)));i.panTo(l)}else i.panBy(o)}else if(e in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;Ln(t)}}});Xt.addInitHook("addHandler","keyboard",No),Xt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Zo=Zi.extend({addHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ao(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),o),Ln(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,f=i?Math.ceil(l/i)*i:l,m=t._limitZoom(e+(this._delta>0?f:-f))-e;this._delta=0,this._startTime=null,m&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+m):t.setZoomAround(this._lastMousePos,e+m))}});Xt.addInitHook("addHandler","scrollWheelZoom",Zo);var ec=600;Xt.mergeOptions({tapHold:I.touchNative&&I.safari&&I.mobile,tapTolerance:15});var Bo=Zi.extend({addHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new B(e.clientX,e.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(At(document,"touchend",Ke),At(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),ec),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ee(document,"touchend",Ke),Ee(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new B(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});Xt.addInitHook("addHandler","tapHold",Bo),Xt.mergeOptions({touchZoom:I.touch,bounceAtZoomLimits:!0});var qo=Zi.extend({addHooks:function(){Mt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(o)._divideBy(2))),this._startDist=i.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),Ke(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),l=i.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(l,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&l<1||this._zoom>e.getMaxZoom()&&l>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,l===1)return}else{var f=i._add(o)._divideBy(2)._subtract(this._centerPoint);if(l===1&&f.x===0&&f.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),Ot(this._animRequest);var m=d(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=wt(m,this,!0),Ke(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ot(this._animRequest),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xt.addInitHook("addHandler","touchZoom",qo),Xt.BoxZoom=Io,Xt.DoubleClickZoom=$o,Xt.Drag=Do,Xt.Keyboard=No,Xt.ScrollWheelZoom=Zo,Xt.TapHold=Bo,Xt.TouchZoom=qo,s.Bounds=et,s.Browser=I,s.CRS=It,s.Canvas=Mo,s.Circle=Es,s.CircleMarker=Br,s.Class=Qt,s.Control=Ci,s.DivIcon=Eo,s.DivOverlay=Bi,s.DomEvent=yl,s.DomUtil=ml,s.Draggable=hn,s.Evented=H,s.FeatureGroup=Gi,s.GeoJSON=Ji,s.GridLayer=dr,s.Handler=Zi,s.Icon=Rn,s.ImageOverlay=Hr,s.LatLng=gt,s.LatLngBounds=ft,s.Layer=Ai,s.LayerGroup=qn,s.LineUtil=Al,s.Map=Xt,s.Marker=Zr,s.Mixin=Ll,s.Path=fn,s.Point=B,s.PolyUtil=El,s.Polygon=jn,s.Polyline=Yi,s.Popup=Wr,s.PosAnimation=lo,s.Projection=Ol,s.Rectangle=Oo,s.Renderer=Ki,s.SVG=fr,s.SVGOverlay=Lo,s.TileLayer=Hn,s.Tooltip=Ur,s.Transformation=V,s.Util=ve,s.VideoOverlay=To,s.bind=d,s.bounds=pt,s.canvas=Co,s.circle=Rl,s.circleMarker=ql,s.control=lr,s.divIcon=Jl,s.extend=u,s.featureGroup=Nl,s.geoJSON=ko,s.geoJson=Hl,s.gridLayer=Kl,s.icon=Zl,s.imageOverlay=Wl,s.latLng=W,s.latLngBounds=ct,s.layerGroup=Dl,s.map=bl,s.marker=Bl,s.point=q,s.polygon=Fl,s.polyline=jl,s.popup=Gl,s.rectangle=tc,s.setOptions=A,s.stamp=p,s.svg=Ao,s.svgOverlay=Vl,s.tileLayer=So,s.tooltip=Yl,s.transformation=Q,s.version=a,s.videoOverlay=Ul;var ic=window.L;s.noConflict=function(){return window.L=ic,this},window.L=s}))})(yr,yr.exports)),yr.exports}var xd=wd();const Vn=yd(xd);var Pd=D('<div class="map-container svelte-1kh2itm"></div>');function pl(n,r){Fi(r,!0);let s=bi(r,"activities",19,()=>[]),a=bi(r,"center",19,()=>[51.505,-.09]),u=bi(r,"zoom",3,13),h,d=Et(void 0),_=[],p;Vu(()=>{if(h)return delete Vn.Icon.Default.prototype._getIconUrl,Vn.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"}),O(d,Vn.map(h).setView(a(),u()),!0),Vn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(c(d)),()=>{c(d)?.remove()}}),yn(()=>{c(d)&&c(d).flyTo(a(),u())}),yn(()=>{if(!c(d))return;_.forEach(b=>b.remove()),_=[],p&&(p.remove(),p=void 0);const x=[];s().forEach((b,P)=>{const E=Vn.marker([b.lat,b.lng]).addTo(c(d)).bindPopup(`<b>${P+1}. ${b.name}</b><br>${b.notes||""}`);_.push(E),x.push([b.lat,b.lng])}),x.length>1&&(p=Vn.polyline(x,{color:"#3b82f6",weight:4,opacity:.7,dashArray:"10, 10",lineCap:"round"}).addTo(c(d)))});var y=Pd();ju(y,x=>h=x,()=>h),S(n,y),Hi()}var kd=D('<li class="svelte-1qcwaj1"><button class="svelte-1qcwaj1"> </button></li>'),Td=D('<ul class="results svelte-1qcwaj1"></ul>'),Ld=D('<div class="search-container svelte-1qcwaj1"><div class="input-wrapper svelte-1qcwaj1"><!> <input type="text" placeholder="Search places..." class="svelte-1qcwaj1"/> <!></div> <!></div>');function Ed(n,r){Fi(r,!0);let s=Et(""),a=Et(ui([])),u=Et(!1),h;function d(){if(clearTimeout(h),c(s).length<3){O(a,[],!0);return}h=setTimeout(async()=>{O(u,!0);try{const M=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c(s))}&limit=5&accept-language=zh-TW,en`);M.ok&&O(a,await M.json(),!0)}catch(M){console.error(M)}finally{O(u,!1)}},500)}function _(M){r.onselect({name:M.display_name.split(",")[0],lat:parseFloat(M.lat),lng:parseFloat(M.lon),full_name:M.display_name}),O(a,[],!0),O(s,"")}var p=Ld(),y=v(p),x=v(y);od(x,{size:18,class:"search-icon"});var b=g(x,2);b.__input=d;var P=g(b,2);{var E=M=>{sd(M,{size:18,class:"loader"})};tt(P,M=>{c(u)&&M(E)})}var N=g(y,2);{var A=M=>{var Z=Td();Oe(Z,21,()=>c(a),Qe,(at,j)=>{var R=kd(),K=v(R);K.__click=()=>_(c(j));var Y=v(K);G(()=>z(Y,c(j).display_name)),S(at,R)}),S(M,Z)};tt(N,M=>{c(a).length>0&&M(A)})}Ii(b,()=>c(s),M=>O(s,M)),S(n,p),Hi()}Zn(["input","click"]);function Sd(n,r,s,a){const h=n*Math.PI/180,d=s*Math.PI/180,_=(s-n)*Math.PI/180,p=(a-r)*Math.PI/180,y=Math.sin(_/2)*Math.sin(_/2)+Math.cos(h)*Math.cos(d)*Math.sin(p/2)*Math.sin(p/2),b=6371e3*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)));return b<1e3?Math.round(b)+" m":(b/1e3).toFixed(2)+" km"}function zd(n){const r=`
    :root {
      --bg: #ffffff;
      --text: #333333;
      --heading: #111111;
      --card-bg: #f9f9f9;
      --card-border-l: #3b82f6;
      --meta: #666666;
      --border: #ccc;
      --tag-bg: #e0e7ff;
      --tag-text: #3730a3;
      --summary-bg: #f0fdf4;
      --summary-border: #bbf7d0;
      --gen-bg: #fff7ed;
      --gen-border: #ffedd5;
      --note-bg: #fff;
      --note-border: #eee;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #18181b;
        --text: #e4e4e7;
        --heading: #ffffff;
        --card-bg: #27272a;
        --card-border-l: #60a5fa;
        --meta: #a1a1aa;
        --border: #3f3f46;
        --tag-bg: #312e81;
        --tag-text: #e0e7ff;
        --summary-bg: #064e3b;
        --summary-border: #065f46;
        --gen-bg: #431407;
        --gen-border: #571e0c;
        --note-bg: #18181b;
        --note-border: #3f3f46;
      }
    }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; line-height: 1.6; color: var(--text); background: var(--bg); max-width: 800px; margin: 0 auto; padding: 20px; }
    h1 { border-bottom: 2px solid var(--heading); padding-bottom: 10px; margin-bottom: 10px; color: var(--heading); }
    h2 { margin-top: 30px; border-bottom: 1px solid var(--border); padding-bottom: 5px; color: var(--heading); font-size: 1.5em; }
    h3 { margin-top: 20px; color: var(--heading); font-size: 1.2em; }
    .trip-meta { color: var(--meta); margin-bottom: 30px; font-size: 1.1em; }
    .day-section { margin-bottom: 40px; page-break-inside: avoid; }
    .activity-item { margin-bottom: 15px; padding: 15px; background: var(--card-bg); border-left: 4px solid var(--card-border-l); border-radius: 4px; }
    .activity-header { display: flex; justify-content: space-between; align-items: baseline; font-weight: bold; font-size: 1.1em; margin-bottom: 5px; color: var(--heading); }
    .activity-details { font-size: 0.95em; color: var(--meta); }
    .detail-row { margin-bottom: 4px; }
    .expenses-section { margin-top: 10px; font-size: 0.9em; border-top: 1px dashed var(--border); padding-top: 5px; }
    .expense-tag { display: inline-block; background: var(--tag-bg); color: var(--tag-text); padding: 2px 8px; border-radius: 12px; margin-right: 5px; font-size: 0.85em; }
    .notes { font-style: italic; color: var(--meta); margin-top: 8px; background: var(--note-bg); padding: 8px; border-radius: 4px; border: 1px solid var(--note-border); }
    .total-summary { background: var(--summary-bg); border: 1px solid var(--summary-border); padding: 20px; border-radius: 8px; margin-bottom: 30px; }
    .general-expenses { background: var(--gen-bg); border: 1px solid var(--gen-border); padding: 20px; border-radius: 8px; margin-bottom: 30px; }
    ul { margin: 0; padding-left: 20px; }
    li { margin-bottom: 5px; }
    .print-button { display: none; }
    @media print {
      body { max-width: 100%; padding: 0; background: white; color: black; }
      .activity-item { break-inside: avoid; border: 1px solid #ddd; border-left: 4px solid #3b82f6; background: white; }
      .print-hide { display: none; }
      h1, h2, h3 { color: black; border-color: black; }
      .total-summary, .general-expenses { border: 1px solid #ddd; background: white; }
    }
  `,s=x=>{try{return new Date(x).toLocaleDateString(k.lang==="zh"?"zh-TW":void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return x}},a=(x,b)=>`${Li[b]||b} ${x.toFixed(2)}`,u={};n.generalExpenses?.forEach(x=>{const b=x.currency||n.currency||"USD";u[b]=(u[b]||0)+x.amount}),n.days.forEach(x=>{x.activities.forEach(b=>{b.expenses.forEach(P=>{const E=P.currency||n.currency||"USD";u[E]=(u[E]||0)+P.amount})})});const h=Object.entries(u).map(([x,b])=>`<div style="font-size: 1.2em; font-weight: bold;">${a(b,x)}</div>`).join("");let d="";n.days.forEach((x,b)=>{let P="";x.activities.length===0?P=`<p><em>${k.t("trip.emptyActivities")}</em></p>`:P=x.activities.map(E=>{const N=E.expenses.map(A=>`<span class="expense-tag">${A.name||k.t(`cat.${A.category}`)}: ${a(A.amount,A.currency||n.currency||"USD")}</span>`).join("");return`
          <div class="activity-item">
            <div class="activity-header">
              <span>${E.name}</span>
              ${E.estimatedCost?`<span style="color: var(--meta); font-weight: normal; font-size: 0.9em;">Est: ${a(E.estimatedCost,n.currency)}</span>`:""}
            </div>
            <div class="activity-details">
              ${E.address?`<div class="detail-row">ð ${E.address}</div>`:""}
              ${E.notes?`<div class="notes">ð ${E.notes}</div>`:""}
              ${N?`<div class="expenses-section">ð° ${N}</div>`:""}
            </div>
          </div>
        `}).join(""),d+=`
      <div class="day-section">
        <h2>${k.day(b+1)}: ${s(x.date)}</h2>
        ${P}
      </div>
    `});let _="";if(n.generalExpenses&&n.generalExpenses.length>0){const x=n.generalExpenses.map(b=>`<li><strong>${b.name||k.t(`cat.${b.category}`)}</strong>: ${a(b.amount,b.currency||n.currency||"USD")} <span style="color: var(--meta); font-size: 0.9em;">(${k.t(`cat.${b.category}`)})</span></li>`).join("");_=`
        <div class="general-expenses">
            <h3>${k.t("finance.view.all")} ${k.t("finance.finances")}</h3>
            <ul>${x}</ul>
        </div>
      `}const p=k.lang==="zh"?"è¡ç¨ï¼":"Trip to ",y=k.lang==="zh"?"æ¥æï¼":"Date: ";return`
    <!DOCTYPE html>
    <html lang="${k.lang}">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="color-scheme" content="light dark">
      <title>${n.destination} - Itinerary</title>
      <style>${r}</style>
    </head>
    <body>
      <h1>${p}${n.destination}</h1>
      <div class="trip-meta">
        ${y}${s(n.startDate)} - ${s(n.endDate)}
      </div>

      <div class="total-summary">
        <h3>${k.t("finance.totalActual")}</h3>
        ${h||k.t("modal.noExpenses")}
      </div>

      ${_}
      ${d}

      <div class="print-hide" style="margin-top: 50px; text-align: center; color: var(--meta); font-size: 0.8em;">
        Generated by TripPlanner ${new Date().toLocaleDateString()}
      </div>
    </body>
    </html>
  `}var Md=D('<div class="empty-state"><p>è¯·éæ©è¡ç¨</p></div>'),Cd=D('<button><span class="day-label svelte-disb9k"> </span> <span class="date-label svelte-disb9k"> </span></button>'),Ad=D('<div class="empty-state">å°ç¡éç¨è²»ç¨è¨é</div>'),Od=D('<div class="general-expense-name svelte-disb9k"> </div>'),Id=D('<div class="general-expense-item svelte-disb9k"><div class="general-expense-content svelte-disb9k"><!> <div class="general-expense-cat svelte-disb9k"> </div></div> <div class="general-expense-amount svelte-disb9k"> </div> <div class="general-expense-actions svelte-disb9k"><button class="icon-btn svelte-disb9k"><!></button> <button class="icon-btn danger svelte-disb9k"><!></button></div></div>'),$d=D('<div class="view-card default-cursor svelte-disb9k"><div class="card-header svelte-disb9k"><span class="act-name svelte-disb9k">è²»ç¨æ¸å®</span> <div class="card-actions svelte-disb9k"><span class="cost-tag actual svelte-disb9k"> </span></div></div> <div class="general-expense-list svelte-disb9k"></div></div>'),Dd=D('<div class="day-header-info svelte-disb9k"><span class="today-label svelte-disb9k">è¡ç¨éç¨è²»ç¨</span> <span class="date-display svelte-disb9k">æ©ç¥¨ãä¿éªãç°½è­...</span></div> <div class="day-content svelte-disb9k"><div class="actions-bar svelte-disb9k"><button class="add-act-btn svelte-disb9k"><!> <span> </span></button></div> <div class="timeline-list svelte-disb9k"><!></div></div>',1),Nd=D('<div class="empty-state"> </div>'),Zd=D('<span class="time-label start svelte-disb9k">start</span>'),Bd=D('<span class="time-label end svelte-disb9k">end</span>'),qd=D('<div class="distance-pill svelte-disb9k"> </div>'),Rd=D('<div class="line-container svelte-disb9k"><div class="line"></div> <!></div>'),jd=D('<p class="act-notes svelte-disb9k"> </p>'),Fd=D('<span class="actual svelte-disb9k"> </span>'),Hd=D('<span class="est svelte-disb9k"> </span>'),Wd=D('<div class="cost-tag svelte-disb9k"><!></div>'),Ud=D('<div class="timeline-item svelte-disb9k" draggable="true" role="listitem"><div class="time-col svelte-disb9k"><!> <!></div> <div class="visual-col svelte-disb9k"><div class="dot-container svelte-disb9k"><div class="dot svelte-disb9k"><div class="inner-dot svelte-disb9k"></div></div></div> <!></div> <div class="content-col svelte-disb9k"><div class="view-card svelte-disb9k" role="button" tabindex="0"><div class="card-header svelte-disb9k"><span class="act-name svelte-disb9k"> </span> <div class="card-actions svelte-disb9k"><!> <button class="icon-btn expense-btn svelte-disb9k"><!></button> <button class="icon-btn svelte-disb9k"><!></button></div></div> <!> <!></div></div></div>'),Vd=D('<div class="day-header-info svelte-disb9k"><span class="today-label svelte-disb9k"> </span> <span class="date-display svelte-disb9k"> </span> <button class="map-toggle-btn"><!> <span> </span></button></div> <div class="day-content svelte-disb9k"><div class="actions-bar svelte-disb9k"><button class="add-act-btn svelte-disb9k"><!> <span> </span></button></div> <div class="timeline-list svelte-disb9k"><!> <!></div></div>',1),Gd=D('<div class="days-nav svelte-disb9k"><button><span class="day-label svelte-disb9k" style="font-size: 0.8rem; white-space: nowrap;">éç¨</span> <span class="date-label svelte-disb9k">è¡å/å¾</span></button> <!></div> <!>',1),Yd=D('<div class="field search-field svelte-disb9k"><label for="location-search" class="svelte-disb9k"> </label> <div id="location-search"><!></div></div>'),Jd=D('<span class="expense-item-name svelte-disb9k"> </span>'),Kd=D('<div class="expense-item svelte-disb9k"><div class="expense-item-content svelte-disb9k"><!> <span class="expense-item-category svelte-disb9k"> </span> <span class="expense-item-amount svelte-disb9k"> </span></div> <button class="icon-btn danger svelte-disb9k"><!></button></div>'),Xd=D('<fieldset class="svelte-disb9k"><legend class="svelte-disb9k"> </legend> <div class="expense-list svelte-disb9k"></div> <div class="total-actual-cost svelte-disb9k"><strong> </strong> <span> </span></div></fieldset>'),Qd=D('<div class="edit-view svelte-disb9k"><div class="edit-header-bar svelte-disb9k"><button class="back-link svelte-disb9k"> </button> <h3 class="svelte-disb9k"> </h3></div> <div class="edit-form-content svelte-disb9k"><!> <div class="field svelte-disb9k"><label for="edit-name" class="svelte-disb9k"> </label> <input id="edit-name" type="text" class="svelte-disb9k"/></div> <div class="field svelte-disb9k"><label for="edit-notes" class="svelte-disb9k"> </label> <textarea id="edit-notes" rows="5" class="svelte-disb9k"></textarea></div> <!> <div class="edit-footer svelte-disb9k"><button class="icon-btn danger delete-btn svelte-disb9k"><!> <span> </span></button> <div class="save-actions svelte-disb9k"><button class="secondary svelte-disb9k"> </button> <button class="primary svelte-disb9k"> </button></div></div></div></div>'),th=D('<div class="map-panel svelte-disb9k"><!></div>'),eh=D('<div class="trip-details"><header class="trip-header svelte-disb9k"><div class="title-with-actions svelte-disb9k"><h2 class="svelte-disb9k"> </h2> <button class="icon-btn export-btn svelte-disb9k"><!></button></div></header> <div class="content-split svelte-disb9k"><div class="itinerary-panel svelte-disb9k"><!></div> <!></div></div>'),ih=D('<div class="context-menu svelte-disb9k"><button class="svelte-disb9k"><!> <span> </span></button> <button class="svelte-disb9k"><!> <span> </span></button></div>'),nh=D('<button class="name-tag svelte-disb9k" type="button"> </button>'),rh=D('<div class="name-tags svelte-disb9k"></div>'),sh=D("<option> </option>"),oh=D('<button type="button"><!> <span> </span></button>'),ah=D('<div class="expense-form-header svelte-disb9k"><h3 class="svelte-disb9k"> </h3></div> <div class="field svelte-disb9k"><label for="expense-name" class="svelte-disb9k"> </label> <input id="expense-name" type="text" class="svelte-disb9k"/> <!></div> <div class="form-row svelte-disb9k"><div class="field amount-field svelte-disb9k"><label for="expense-amount" class="svelte-disb9k"> </label> <div class="input-with-icon svelte-disb9k"><span class="currency-symbol svelte-disb9k"> </span> <input id="expense-amount" type="number" placeholder="0.00" class="svelte-disb9k"/></div></div> <div class="field currency-field svelte-disb9k"><label for="expense-currency" class="svelte-disb9k"> </label> <select id="expense-currency" class="svelte-disb9k"></select></div></div> <div class="field category-field svelte-disb9k"><span style="font-size: 0.875rem; font-weight: 600; color: #71717a; display: block; margin-bottom: 0.5rem;"> </span> <div class="category-options svelte-disb9k"></div></div> <div class="expense-form-actions svelte-disb9k"><button class="secondary svelte-disb9k"> </button> <button class="primary svelte-disb9k"> </button></div>',1),lh=D('<p class="empty-list svelte-disb9k"> </p>'),ch=D('<div class="expense-icon svelte-disb9k"><!></div>'),uh=D('<span class="expense-name svelte-disb9k"> </span> <div class="expense-meta svelte-disb9k"><span class="expense-cat-badge svelte-disb9k"> </span> <span class="expense-date svelte-disb9k"> </span></div>',1),dh=D('<span class="expense-name svelte-disb9k"> </span> <span class="expense-date svelte-disb9k"> </span>',1),hh=D('<div class="expense-item-modal svelte-disb9k"><div class="expense-details svelte-disb9k"><!> <div class="expense-info svelte-disb9k"><!></div></div> <div class="expense-right svelte-disb9k"><div class="expense-amt svelte-disb9k"> </div> <div class="expense-actions svelte-disb9k"><button class="icon-btn svelte-disb9k"><!></button> <button class="icon-btn danger svelte-disb9k"><!></button></div></div></div>'),fh=D('<div class="modal-header svelte-disb9k"><h3 class="svelte-disb9k"> </h3> <button class="close-btn svelte-disb9k"><!></button></div> <div class="expense-list-modal svelte-disb9k"><!> <!></div> <div class="modal-actions svelte-disb9k"><button class="primary svelte-disb9k"> </button></div>',1),vh=D('<div class="modal-overlay svelte-disb9k" role="dialog" tabindex="-1"><div class="modal svelte-disb9k" role="presentation"><!></div></div>'),_h=D('<div class="itinerary-view svelte-disb9k"><!> <!> <!></div>');function ph(n,r){Fi(r,!0);let s=Et(0),a=ne(()=>r.tripId?Re.getTrip(r.tripId):null),u=ne(()=>c(a)?c(a).days[c(s)]:null),h=Et(ui([51.505,-.09])),d=ne(()=>c(u)?c(u).activities:[]),_=Et(ui(typeof window<"u"&&window.innerWidth>768));Da(()=>{if(typeof window>"u")return;const C=()=>{O(_,window.innerWidth>768)};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)});function p(){if(!c(a))return;const C=zd(c(a)),V=new Blob([C],{type:"text/html"}),Q=URL.createObjectURL(V),nt=document.createElement("a");nt.href=Q,nt.download=`${c(a).destination.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_itinerary.html`,document.body.appendChild(nt),nt.click(),document.body.removeChild(nt),URL.revokeObjectURL(Q)}let y=Et(null),x=Et(!1),b=Et(ui({visible:!1,x:0,y:0,activity:null})),P=Et(null),E=Et(!1),N=Et(null),A=Et(ui({name:"",amount:0,category:"other",currency:"USD"}));function M(C,V){C.preventDefault(),C.stopPropagation(),ht(V);let Q=C.clientX,nt=C.clientY;const $t=160;typeof window<"u"&&Q+$t>window.innerWidth&&(Q=window.innerWidth-$t-10),O(b,{visible:!0,x:Q,y:nt,activity:V},!0);const Ut=()=>{c(b).visible=!1,window.removeEventListener("click",Ut)};setTimeout(()=>window.addEventListener("click",Ut),0)}function Z(C){O(P,C,!0),O(E,!1),O(N,null)}function at(){O(P,null),O(E,!0),F()}function j(C){if(!c(b).activity)return;const V=c(b).activity;C==="edit"?(O(y,JSON.parse(JSON.stringify(V)),!0),O(x,!1)):C==="google"&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(V.address||V.name)}`,"_blank"),c(b).visible=!1}function R(){O(x,!0),O(y,{id:ir(),name:"",address:"",lat:0,lng:0,estimatedCost:0,expenses:[],category:"other",transportType:"walk",notes:"",completed:!1},!0)}function K(C){c(y)&&(c(y).name=C.name,c(y).address=C.full_name,c(y).lat=C.lat,c(y).lng=C.lng,O(h,[C.lat,C.lng],!0))}function Y(){if(!c(y)||!c(u)||!r.tripId)return;console.log("Saving activity:",c(y));const C=JSON.parse(JSON.stringify(c(y)));if(c(x)){if(!C.name)return;Re.addActivity(r.tripId,c(s),C)}else Re.updateActivity(r.tripId,c(s),C);O(y,null),O(x,!1)}function J(C){O(N,C,!0),O(A,{name:C.name||"",amount:C.amount,category:C.category,currency:C.currency||c(a)?.currency||"USD"},!0)}function F(){O(N,"new");const C=wt[c(A).category]||k.t(`cat.${c(A).category}`);O(A,{name:C,amount:0,category:"other",currency:c(a)?.currency||"USD"},!0)}function ot(C){c(A).category=C;const V=k.t(`cat.${C}`),Q=k.t(`cat.${Object.keys(et).find(nt=>wt[nt]===c(A).name)||"other"}`);(c(A).name===Q||c(A).name==="")&&(c(A).name=V)}function lt(C){if(!c(a))return[];const V=new Set;for(let Q=c(a).days.length-1;Q>=0;Q--){const nt=c(a).days[Q];for(let $t=nt.activities.length-1;$t>=0;$t--){const Ut=nt.activities[$t];for(let _t=Ut.expenses.length-1;_t>=0;_t--){const Vt=Ut.expenses[_t];if(Vt.category===C&&Vt.name&&(V.add(Vt.name),V.size>=3))return Array.from(V)}}}if(c(a).generalExpenses)for(let Q=c(a).generalExpenses.length-1;Q>=0;Q--){const nt=c(a).generalExpenses[Q];if(nt.category===C&&nt.name&&(V.add(nt.name),V.size>=3))return Array.from(V)}return Array.from(V)}const wt={transport:k.t("cat.transport"),food:k.t("cat.food"),stay:k.t("cat.stay"),shopping:k.t("cat.shopping"),medical:k.t("cat.medical"),other:k.t("cat.other")};function Ot(){if(!c(P)&&!c(E)||!c(a)||c(A).amount<=0)return;const C={id:c(N)==="new"?ir():c(N).id,name:c(A).name||void 0,amount:c(A).amount,category:c(A).category,date:new Date().toISOString().split("T")[0],currency:c(A).currency};c(E)?c(N)==="new"?Re.addGeneralExpense(c(a).id,C):Re.updateGeneralExpense(c(a).id,C):c(P)&&(c(N)==="new"?Re.addExpense(c(a).id,c(s),c(P).id,C):Re.updateExpense(c(a).id,c(s),c(P).id,C)),O(N,null),c(E)&&O(E,!1)}function ve(C){c(a)&&(c(E)?Re.removeGeneralExpense(c(a).id,C):c(P)&&Re.removeExpense(c(a).id,c(s),c(P).id,C))}function Qt(C){if(!C||C.length===0)return"";const V={};return C.forEach(Q=>{const nt=Q.currency||c(a)?.currency||"USD";V[nt]=(V[nt]||0)+Q.amount}),Object.entries(V).map(([Q,nt])=>`${Li[Q]||"$"}${nt}`).join(", ")}ui({destination:"",startDate:"",endDate:"",currency:"TWD"});function Ft(C){r.tripId&&Re.removeActivity(r.tripId,c(s),C)}function ht(C){O(h,[C.lat,C.lng],!0)}let H=null;function B(C,V){H=V,C.dataTransfer&&(C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",V.toString()))}function kt(C,V){if(H===null||!c(u)||!r.tripId)return;const Q=H,nt=V;if(Q===nt)return;const $t=[...c(u).activities],[Ut]=$t.splice(Q,1);$t.splice(nt,0,Ut),c(u).activities=$t,H=null}const q={transport:ll,food:_l,stay:hl,shopping:vl,medical:dl,other:fl},et={transport:"#f97316",food:"#ef4444",stay:"#8b5cf6",shopping:"#ec4899",medical:"#e91e63",other:"#64748b"};var pt=_h(),ft=v(pt);{var ct=C=>{var V=Md();S(C,V)},gt=C=>{var V=eh(),Q=v(V),nt=v(Q),$t=v(nt),Ut=v($t),_t=g($t,2);_t.__click=p;var Vt=v(_t);io(Vt,{size:20});var te=g(Q,2),_e=v(te),De=v(_e);{var pe=ue=>{var oe=Gd(),Me=st(oe),mt=v(Me);mt.__click=()=>O(s,-1);let rt;var ut=g(mt,2);Oe(ut,19,()=>c(a).days,xt=>xt.date,(xt,Pt,Gt)=>{var St=Cd();St.__click=()=>O(s,c(Gt),!0);let ae;var Ht=v(St),Yt=v(Ht),Le=g(Ht,2),we=v(Le);G((Ce,Bt)=>{ae=Si(St,1,"svelte-disb9k",null,ae,{active:c(s)===c(Gt)}),z(Yt,Ce),z(we,Bt)},[()=>k.day(c(Gt)+1),()=>c(Pt).date.slice(5)]),S(xt,St)});var it=g(Me,2);{var Zt=xt=>{var Pt=Dd(),Gt=g(st(Pt),2),St=v(Gt),ae=v(St);ae.__click=at;var Ht=v(ae);Mr(Ht,{size:18});var Yt=g(Ht,2),Le=v(Yt),we=g(St,2),Ce=v(we);{var Bt=dt=>{var de=Ad();S(dt,de)},me=dt=>{var de=$d(),yt=v(de),qt=g(v(yt),2),ee=v(qt),Tt=v(ee),zt=g(yt,2);Oe(zt,21,()=>c(a).generalExpenses,Wt=>Wt.id,(Wt,X)=>{const I=ne(()=>et[c(X).category]);var bt=Id(),Kt=v(bt),le=v(Kt);{var he=hi=>{var ei=Od(),Di=v(ei);G(()=>{ii(ei,`color: ${c(I)??""}`),z(Di,c(X).name)}),S(hi,ei)};tt(le,hi=>{c(X).name&&hi(he)})}var ie=g(le,2),Ne=v(ie),Fe=g(Kt,2),di=v(Fe),si=g(Fe,2),qe=v(si);qe.__click=()=>{at(),J(c(X))};var We=v(qe);Kr(We,{size:16});var oi=g(qe,2);oi.__click=()=>{O(E,!0),ve(c(X).id)};var mi=v(oi);zn(mi,{size:16}),G(hi=>{ii(bt,`border-left: 3px solid ${c(I)??""}`),z(Ne,hi),z(di,`${Li[c(X).currency||c(a)?.currency||"USD"]??""}${c(X).amount??""}`)},[()=>k.t(`cat.${c(X).category}`)]),S(Wt,bt)}),G(Wt=>z(Tt,Wt),[()=>Qt(c(a).generalExpenses)]),S(dt,de)};tt(Ce,dt=>{!c(a).generalExpenses||c(a).generalExpenses.length===0?dt(Bt):dt(me,!1)})}G(dt=>z(Le,dt),[()=>k.t("modal.addNewExpense")]),S(xt,Pt)},Lt=xt=>{var Pt=Vd(),Gt=st(Pt),St=v(Gt),ae=v(St),Ht=g(St,2),Yt=v(Ht),Le=g(Ht,2);Le.__click=()=>O(_,!c(_));var we=v(Le);Jn(we,{size:18});var Ce=g(we,2),Bt=v(Ce),me=g(Gt,2),dt=v(me),de=v(dt);de.__click=R;var yt=v(de);Mr(yt,{size:18});var qt=g(yt,2),ee=v(qt),Tt=g(dt,2),zt=v(Tt);{var Wt=bt=>{var Kt=Nd(),le=v(Kt);G(he=>z(le,he),[()=>k.t("trip.emptyActivities")]),S(bt,Kt)};tt(zt,bt=>{c(u)&&c(u).activities.length===0&&bt(Wt)})}var X=g(zt,2);{var I=bt=>{var Kt=Dt(),le=st(Kt);Oe(le,19,()=>c(u).activities,he=>he.id,(he,ie,Ne)=>{const Fe=ne(()=>c(u).activities[c(Ne)+1]),di=ne(()=>c(Fe)?Sd(c(ie).lat,c(ie).lng,c(Fe).lat,c(Fe).lng):null),si=ne(()=>c(ie).expenses.length>0);var qe=Ud(),We=v(qe),oi=v(We);{var mi=Ct=>{var Ae=Zd();S(Ct,Ae)};tt(oi,Ct=>{c(Ne)===0&&Ct(mi)})}var hi=g(oi,2);{var ei=Ct=>{var Ae=Bd();S(Ct,Ae)};tt(hi,Ct=>{c(Ne)===c(u).activities.length-1&&Ct(ei)})}var Di=g(We,2),Wi=g(v(Di),2);{var ln=Ct=>{var Ae=Rd(),Pn=g(v(Ae),2);{var dn=gi=>{var ge=qd(),ai=v(ge);G(()=>z(ai,c(di))),S(gi,ge)};tt(Pn,gi=>{c(di)&&gi(dn)})}S(Ct,Ae)};tt(Wi,Ct=>{c(Ne)<c(u).activities.length-1&&Ct(ln)})}var xn=g(Di,2),Jt=v(xn);Jt.__contextmenu=Ct=>M(Ct,c(ie)),Jt.__click=()=>ht(c(ie)),Jt.__keydown=Ct=>{Ct.key==="Enter"&&ht(c(ie))};var Ie=v(Jt),Be=v(Ie),Ge=v(Be),Ye=g(Be,2),Je=v(Ye);{var Rt=Ct=>{Qu(Ct,{size:16,class:"check-icon"})};tt(Je,Ct=>{c(ie).completed&&Ct(Rt)})}var xe=g(Je,2);xe.__click=Ct=>{Ct.stopPropagation(),Z(c(ie))};var cn=v(xe);eo(cn,{size:16});var Ui=g(xe,2);Ui.__click=Ct=>M(Ct,c(ie));var un=v(Ui);nd(un,{size:16});var Bn=g(Ie,2);{var Mt=Ct=>{var Ae=jd(),Pn=v(Ae);G(()=>z(Pn,c(ie).notes)),S(Ct,Ae)};tt(Bn,Ct=>{c(ie).notes&&Ct(Mt)})}var Ze=g(Bn,2);{var sr=Ct=>{var Ae=Wd(),Pn=v(Ae);{var dn=ge=>{var ai=Fd(),Vi=v(ai);G(kn=>z(Vi,kn),[()=>Qt(c(ie).expenses)]),S(ge,ai)},gi=ge=>{var ai=Hd(),Vi=v(ai);G(()=>z(Vi,`Est. ${Li[c(a)?.currency||"USD"]??""}${c(ie).estimatedCost??""}`)),S(ge,ai)};tt(Pn,ge=>{c(si)?ge(dn):ge(gi,!1)})}S(Ct,Ae)};tt(Ze,Ct=>{(c(ie).estimatedCost>0||c(si))&&Ct(sr)})}G(()=>z(Ge,c(ie).name)),As("dragstart",qe,Ct=>B(Ct,c(Ne))),As("dragover",qe,Ct=>Ct.preventDefault()),As("drop",qe,Ct=>kt(Ct,c(Ne))),S(he,qe)}),S(bt,Kt)};tt(X,bt=>{c(u)&&bt(I)})}G((bt,Kt,le,he)=>{z(ae,bt),z(Yt,c(u)?.date),$e(Le,"title",Kt),z(Bt,le),z(ee,he)},[()=>k.day(c(s)+1).toUpperCase(),()=>c(_)?k.t("trip.hideMap"):k.t("trip.showMap"),()=>c(_)?k.t("trip.hideMap"):k.t("trip.showMap"),()=>k.t("trip.addActivity")]),S(xt,Pt)};tt(it,xt=>{c(s)===-1?xt(Zt):xt(Lt,!1)})}G(()=>rt=Si(mt,1,"svelte-disb9k",null,rt,{active:c(s)===-1})),S(ue,oe)},Te=ue=>{var oe=Qd(),Me=v(oe),mt=v(Me);mt.__click=()=>O(y,null);var rt=v(mt),ut=g(mt,2),it=v(ut),Zt=g(Me,2),Lt=v(Zt);{var xt=I=>{var bt=Yd(),Kt=v(bt),le=v(Kt),he=g(Kt,2),ie=v(he);Ed(ie,{onselect:K}),G(Ne=>z(le,Ne),[()=>k.t("trip.searchLocation")]),S(I,bt)};tt(Lt,I=>{c(x)&&I(xt)})}var Pt=g(Lt,2),Gt=v(Pt),St=v(Gt),ae=g(Gt,2),Ht=g(Pt,2),Yt=v(Ht),Le=v(Yt),we=g(Yt,2),Ce=g(Ht,2);{var Bt=I=>{var bt=Xd(),Kt=v(bt),le=v(Kt),he=g(Kt,2);Oe(he,23,()=>c(y).expenses,qe=>qe.id,(qe,We)=>{const oi=ne(()=>et[c(We).category]);var mi=Kd(),hi=v(mi),ei=v(hi);{var Di=Ge=>{var Ye=Jd(),Je=v(Ye);G(()=>{ii(Ye,`color: ${c(oi)??""}`),z(Je,c(We).name)}),S(Ge,Ye)};tt(ei,Ge=>{c(We).name&&Ge(Di)})}var Wi=g(ei,2),ln=v(Wi),xn=g(Wi,2),Jt=v(xn),Ie=g(hi,2);Ie.__click=()=>c(y)&&Re.removeExpense(c(a).id,c(s),c(y).id,c(We).id);var Be=v(Ie);zn(Be,{size:16}),G(Ge=>{ii(mi,`border-left: 3px solid ${c(oi)??""}`),ii(Wi,`color: ${c(oi)??""}`),z(ln,Ge),z(Jt,`${Li[c(We).currency||c(a)?.currency||"USD"]??""}${c(We).amount??""}`)},[()=>k.t(`cat.${c(We).category}`)]),S(qe,mi)});var ie=g(he,2),Ne=v(ie),Fe=v(Ne),di=g(Ne,2),si=v(di);G((qe,We,oi)=>{z(le,qe),z(Fe,We),z(si,oi)},[()=>k.t("trip.expenses"),()=>k.t("trip.totalActual"),()=>Qt(c(y).expenses)]),S(I,bt)};tt(Ce,I=>{c(y)&&c(y).expenses.length>0&&I(Bt)})}var me=g(Ce,2),dt=v(me);dt.__click=()=>{const I=c(u)?.activities.findIndex(bt=>bt.id===c(y).id);I!==void 0&&I!==-1&&Ft(I),O(y,null)};var de=v(dt);zn(de,{size:20});var yt=g(de,2),qt=v(yt),ee=g(dt,2),Tt=v(ee);Tt.__click=()=>O(y,null);var zt=v(Tt),Wt=g(Tt,2);Wt.__click=Y;var X=v(Wt);G((I,bt,Kt,le,he,ie,Ne)=>{z(rt,`â ${I??""}`),z(it,bt),z(St,Kt),z(Le,le),z(qt,he),z(zt,ie),z(X,Ne)},[()=>k.t("trip.backToList"),()=>c(x)?k.t("trip.newActivity"):k.t("trip.editActivity"),()=>k.t("trip.name"),()=>k.t("trip.notes"),()=>k.t("trip.deleteActivity"),()=>k.t("trip.cancel"),()=>k.t("trip.saveChanges")]),Ii(ae,()=>c(y).name,I=>c(y).name=I),Ii(we,()=>c(y).notes,I=>c(y).notes=I),S(ue,oe)};tt(De,ue=>{c(y)?ue(Te,!1):ue(pe)})}var Se=g(_e,2);{var ze=ue=>{var oe=th(),Me=v(oe);pl(Me,{get activities(){return c(d)},get center(){return c(h)}}),S(ue,oe)};tt(Se,ue=>{c(_)&&ue(ze)})}G(ue=>{z(Ut,c(a).destination),$e(_t,"title",ue)},[()=>k.t("journal.export")]),S(C,V)};tt(ft,C=>{c(a)?C(gt,!1):C(ct)})}var W=g(ft,2);{var It=C=>{var V=ih(),Q=v(V);Q.__click=()=>j("edit");var nt=v(Q);Kr(nt,{size:16});var $t=g(nt,2),Ut=v($t),_t=g(Q,2);_t.__click=()=>j("google");var Vt=v(_t);Jn(Vt,{size:16});var te=g(Vt,2),_e=v(te);G((De,pe)=>{ii(V,`top: ${c(b).y??""}px; left: ${c(b).x??""}px;`),z(Ut,De),z(_e,pe)},[()=>k.t("trip.editPlan"),()=>k.t("trip.googleMaps")]),S(C,V)};tt(W,C=>{c(b).visible&&C(It)})}var be=g(W,2);{var Nt=C=>{var V=vh();V.__click=()=>{O(P,null),O(E,!1)},V.__keydown=_t=>_t.key==="Escape"&&(O(P,null),O(E,!1));var Q=v(V);Q.__click=_t=>_t.stopPropagation(),Q.__keydown=_t=>_t.stopPropagation();var nt=v(Q);{var $t=_t=>{var Vt=ah(),te=st(Vt),_e=v(te),De=v(_e),pe=g(te,2),Te=v(pe),Se=v(Te),ze=g(Te,2),ue=g(ze,2);{var oe=yt=>{var qt=rh();Oe(qt,20,()=>lt(c(A).category),ee=>ee,(ee,Tt)=>{var zt=nh();zt.__click=()=>c(A).name=Tt;var Wt=v(zt);G(()=>z(Wt,Tt)),S(ee,zt)}),S(yt,qt)};tt(ue,yt=>{lt(c(A).category).length>0&&yt(oe)})}var Me=g(pe,2),mt=v(Me),rt=v(mt),ut=v(rt),it=g(rt,2),Zt=v(it),Lt=v(Zt),xt=g(Zt,2),Pt=g(mt,2),Gt=v(Pt),St=v(Gt),ae=g(Gt,2);Oe(ae,20,()=>cd,yt=>yt,(yt,qt)=>{var ee=sh(),Tt=v(ee),zt={};G(()=>{z(Tt,qt),zt!==(zt=qt)&&(ee.value=(ee.__value=qt)??"")}),S(yt,ee)});var Ht=g(Me,2),Yt=v(Ht),Le=v(Yt),we=g(Yt,2);Oe(we,21,()=>Object.entries(et),([yt,qt])=>yt,(yt,qt)=>{var ee=ne(()=>br(c(qt),2));let Tt=()=>c(ee)[0],zt=()=>c(ee)[1];const Wt=ne(()=>q[Tt()]);var X=oh();X.__click=()=>ot(Tt());var I=v(X);rn(I,()=>c(Wt),(le,he)=>{he(le,{size:18})});var bt=g(I,2),Kt=v(bt);G((le,he)=>{Si(X,1,`category-btn ${c(A).category===Tt()?"active":""}`,"svelte-disb9k"),ii(X,c(A).category===Tt()?`background-color: ${zt()}20; border-color: ${zt()}; color: ${zt()};`:""),$e(X,"title",le),z(Kt,he)},[()=>k.t(`cat.${Tt()}`),()=>k.t(`cat.${Tt()}`)]),S(yt,X)});var Ce=g(Ht,2),Bt=v(Ce);Bt.__click=()=>{O(N,null),c(E)&&O(E,!1)};var me=v(Bt),dt=g(Bt,2);dt.__click=Ot;var de=v(dt);G((yt,qt,ee,Tt,zt,Wt,X,I)=>{z(De,yt),z(Se,qt),$e(ze,"placeholder",ee),z(ut,Tt),z(Lt,Li[c(A).currency]),z(St,zt),z(Le,Wt),z(me,X),dt.disabled=c(A).amount<=0,z(de,I)},[()=>c(N)==="new"?k.t("modal.addExpense"):k.t("modal.editExpense"),()=>k.t("trip.name"),()=>k.t("trip.name"),()=>k.t("modal.amount"),()=>k.t("trip.currency"),()=>k.t("finance.breakdown"),()=>k.t("trip.cancel"),()=>k.t("modal.save")]),Ii(ze,()=>c(A).name,yt=>c(A).name=yt),Ii(xt,()=>c(A).amount,yt=>c(A).amount=yt),nl(ae,()=>c(A).currency,yt=>c(A).currency=yt),S(_t,Vt)},Ut=_t=>{var Vt=fh(),te=st(Vt),_e=v(te),De=v(_e),pe=g(_e,2);pe.__click=()=>O(P,null);var Te=v(pe);Tr(Te,{size:20});var Se=g(te,2),ze=v(Se);{var ue=ut=>{var it=lh(),Zt=v(it);G(Lt=>z(Zt,Lt),[()=>k.t("modal.noExpenses")]),S(ut,it)};tt(ze,ut=>{c(P)?.expenses.length===0&&ut(ue)})}var oe=g(ze,2);Oe(oe,17,()=>c(P)?.expenses,ut=>ut.id,(ut,it)=>{const Zt=ne(()=>q[c(it).category]),Lt=ne(()=>et[c(it).category]),xt=ne(()=>k.t(`cat.${c(it).category}`));var Pt=hh(),Gt=v(Pt),St=v(Gt);{var ae=Tt=>{var zt=ch(),Wt=v(zt);rn(Wt,()=>c(Zt),(X,I)=>{I(X,{size:20})}),G(()=>ii(zt,`background-color: ${c(Lt)??""}20; color: ${c(Lt)??""}`)),S(Tt,zt)};tt(St,Tt=>{c(Zt)&&Tt(ae)})}var Ht=g(St,2),Yt=v(Ht);{var Le=Tt=>{var zt=uh(),Wt=st(zt),X=v(Wt),I=g(Wt,2),bt=v(I),Kt=v(bt),le=g(bt,2),he=v(le);G(()=>{ii(Wt,`color: ${c(Lt)??""}`),z(X,c(it).name),ii(bt,`background-color: ${c(Lt)??""}15; color: ${c(Lt)??""}`),z(Kt,c(xt)),z(he,c(it).date)}),S(Tt,zt)},we=Tt=>{var zt=dh(),Wt=st(zt),X=v(Wt),I=g(Wt,2),bt=v(I);G(()=>{ii(Wt,`color: ${c(Lt)??""}`),z(X,c(xt)),z(bt,c(it).date)}),S(Tt,zt)};tt(Yt,Tt=>{c(it).name&&c(it).name!==c(xt)?Tt(Le):Tt(we,!1)})}var Ce=g(Gt,2),Bt=v(Ce),me=v(Bt),dt=g(Bt,2),de=v(dt);de.__click=()=>J(c(it));var yt=v(de);Kr(yt,{size:16});var qt=g(de,2);qt.__click=()=>ve(c(it).id);var ee=v(qt);zn(ee,{size:16}),G((Tt,zt)=>{ii(Pt,`border-left: 4px solid ${c(Lt)??""}`),ii(Bt,`color: ${c(Lt)??""}`),z(me,`${Li[c(it).currency||c(a)?.currency||"USD"]??""}${c(it).amount??""}`),$e(de,"aria-label",Tt),$e(qt,"aria-label",zt)},[()=>k.t("modal.editExpense"),()=>k.t("trip.deleteActivity")]),S(ut,Pt)});var Me=g(Se,2),mt=v(Me);mt.__click=F;var rt=v(mt);G((ut,it)=>{z(De,`${c(P)?.name??""} - ${ut??""}`),z(rt,it)},[()=>k.t("trip.expenses"),()=>k.t("modal.addNewExpense")]),S(_t,Vt)};tt(nt,_t=>{c(N)?_t($t):_t(Ut,!1)})}S(C,V)};tt(be,C=>{(c(P)||c(E))&&C(Nt)})}S(n,pt),Hi()}Zn(["click","contextmenu","keydown"]);var mh=tl('<circle cx="0" cy="0" fill="transparent" stroke-width="40" transform="rotate(-90)"></circle>'),gh=D('<div class="pie-chart-container svelte-6s3h9y"><svg viewBox="-100 -100 200 200" class="svelte-6s3h9y"></svg> <div class="center-label svelte-6s3h9y"><span class="svelte-6s3h9y">Total</span> <strong class="svelte-6s3h9y"> </strong></div></div>');function yh(n,r){Fi(r,!0);let s=bi(r,"currencySymbol",3,"$");const a=80,u=2*Math.PI*a;let h=ne(()=>{const b=Object.values(r.data).reduce((E,N)=>E+N.actual,0);if(b===0)return[];let P=0;return Object.entries(r.data).map(([E,{actual:N}])=>{if(N===0)return null;const A=N/b,M=`${A*u} ${u}`,Z=-(P*u);return P+=A,{category:E,dasharray:M,offset:Z,color:r.colors[E]}}).filter(E=>E!==null)});var d=gh(),_=v(d);Oe(_,21,()=>c(h),Qe,(b,P)=>{var E=mh();$e(E,"r",a),G(()=>{$e(E,"stroke",c(P).color),$e(E,"stroke-dasharray",c(P).dasharray),$e(E,"stroke-dashoffset",c(P).offset)}),S(b,E)});var p=g(_,2),y=g(v(p),2),x=v(y);G(b=>z(x,`${s()??""}${b??""}`),[()=>Object.values(r.data).reduce((b,P)=>b+P.actual,0).toLocaleString()]),S(n,d),Hi()}var bh=D('<div class="empty-state"><p>è¯·éæ©è¡ç¨</p></div>'),wh=D('<button><span class="day-num svelte-5oriq5"> </span> <span class="day-date svelte-5oriq5"> </span></button>'),xh=D('<div class="day-picker-dropdown svelte-5oriq5"></div> <button class="backdrop svelte-5oriq5" aria-label="close day picker"></button>',1),Ph=D('<div class="day-navigator svelte-5oriq5"><button class="nav-btn svelte-5oriq5"><!></button> <div class="current-day-display svelte-5oriq5"><button class="day-toggle svelte-5oriq5"><span class="day-label svelte-5oriq5"> </span> <span class="date-label svelte-5oriq5"> </span></button> <!></div> <button class="nav-btn svelte-5oriq5"><!></button></div>'),kh=D('<div class="curr-total svelte-5oriq5"> </div>'),Th=D('<div class="curr-total svelte-5oriq5"> </div>'),Lh=D('<div class="breakdown-item svelte-5oriq5"><div class="cat-info svelte-5oriq5"><div class="cat-label-group svelte-5oriq5"><!> <span class="cat-label svelte-5oriq5"> </span></div> <span class="cat-values svelte-5oriq5"><span class="actual svelte-5oriq5"> </span></span></div> <div class="mini-track svelte-5oriq5"><div class="mini-fill svelte-5oriq5"></div></div></div>'),Eh=D('<div class="breakdown-section card svelte-5oriq5"><h3 class="svelte-5oriq5"> </h3> <div class="breakdown-content svelte-5oriq5"><div class="chart-container svelte-5oriq5"><!></div> <div class="breakdown-list svelte-5oriq5"></div></div></div>'),Sh=D('<div class="expense-row svelte-5oriq5"><div class="exp-main svelte-5oriq5"><span class="exp-activity svelte-5oriq5"> </span> <div class="exp-cat svelte-5oriq5"><!> <span> </span></div></div> <div class="exp-amount svelte-5oriq5"><span class="amt svelte-5oriq5"> </span></div></div>'),zh=D('<div class="date-group svelte-5oriq5"><div class="date-header svelte-5oriq5"> </div> <!></div>'),Mh=D('<div class="expense-details-section card svelte-5oriq5"><h3> </h3> <div class="expense-table svelte-5oriq5"></div></div>'),Ch=D("<!> <!>",1),Ah=D('<header class="svelte-5oriq5"><div class="header-top"><div class="header-title-row svelte-5oriq5"><h2 class="svelte-5oriq5"> </h2> <button class="export-btn svelte-5oriq5"><!></button></div></div> <div class="view-controls svelte-5oriq5"><div class="toggle-group svelte-5oriq5"><button> </button> <button> </button></div> <!></div></header> <div class="dashboard-grid svelte-5oriq5"><div class="stat-card svelte-5oriq5"><div class="label svelte-5oriq5"> </div> <div class="value-list svelte-5oriq5"><!></div></div></div> <!>',1),Oh=D('<div class="finance-view svelte-5oriq5"><!></div>');function Ih(n,r){Fi(r,!0);let s=ne(()=>r.tripId?Re.getTrip(r.tripId):null),a=Et("all"),u=Et(0),h=Et(!1);yn(()=>{if(r.tripId)if(O(h,!1),c(s)){const j=new Date().toISOString().split("T")[0],R=c(s).days.findIndex(K=>K.date===j);R!==-1?(O(a,"daily"),O(u,R,!0)):(O(u,0),O(a,"all"))}else O(u,0)});function d(){c(s)&&c(u)<c(s).days.length-1&&tr(u)}function _(){c(u)>0&&tr(u,-1)}function p(at){O(u,at,!0),O(h,!1)}function y(){if(!c(s)||!c(x))return;let j="\uFEFF";j+=`${k.t("csv.summary")}
`;const R=["transport","food","stay","shopping","medical","other"],K=[k.t("csv.headers.currency"),...R.map(lt=>k.t(`cat.${lt}`)),k.t("csv.headers.total")];j+=K.join(",")+`
`,Object.entries(c(x).actuals).forEach(([lt,wt])=>{const Ot=[lt,...R.map(ve=>wt.breakdown[ve]||0),wt.total];j+=Ot.join(",")+`
`}),j+=`

`,j+=`${k.t("csv.details")}
`;const Y=[k.t("csv.headers.date"),k.t("csv.headers.day"),k.t("csv.headers.activity"),k.t("csv.headers.category"),k.t("csv.headers.currency"),k.t("csv.headers.amount"),k.t("csv.headers.notes")];j+=Y.join(",")+`
`,c(s).days.forEach((lt,wt)=>{lt.activities.forEach(Ot=>{Ot.expenses.forEach(ve=>{const Qt=[lt.date,k.day(wt+1),`"${Ot.name.replace(/"/g,'""')}"`,k.t(`cat.${ve.category}`),ve.currency||c(s)?.currency||"USD",ve.amount,`"${(Ot.notes||"").replace(/"/g,'""')}"`];j+=Qt.join(",")+`
`})})}),c(s).generalExpenses&&c(s).generalExpenses.forEach(lt=>{const wt=[lt.date||"","General",`"${(lt.name||"").replace(/"/g,'""')}"`,k.t(`cat.${lt.category}`),lt.currency||c(s)?.currency||"USD",lt.amount,""];j+=wt.join(",")+`
`});const J=new Blob([j],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(J),ot=document.createElement("a");ot.href=F,ot.setAttribute("download",`${c(s).destination}_Expenses.csv`),document.body.appendChild(ot),ot.click(),document.body.removeChild(ot)}let x=ne(()=>{if(!c(s))return null;const at={},j=Y=>(at[Y]||(at[Y]={total:0,breakdown:{transport:0,food:0,stay:0,shopping:0,medical:0,other:0}}),at[Y]),R={};c(s).days.forEach((Y,J)=>{c(a)==="daily"&&J!==c(u)||Y.activities.forEach(F=>{F.expenses.forEach(ot=>{const lt=ot.currency||c(s)?.currency||"USD",wt=j(lt);wt.total+=ot.amount,wt.breakdown[ot.category]!==void 0?wt.breakdown[ot.category]+=ot.amount:wt.breakdown.other+=ot.amount,R[Y.date]||(R[Y.date]=[]),R[Y.date].push({...ot,activityName:F.name,currency:lt})})})}),c(a)==="all"&&c(s).generalExpenses&&c(s).generalExpenses.forEach(Y=>{const J=Y.currency||c(s)?.currency||"USD",F=j(J);F.total+=Y.amount,F.breakdown[Y.category]!==void 0?F.breakdown[Y.category]+=Y.amount:F.breakdown.other+=Y.amount;const ot=Y.date||"General";R[ot]||(R[ot]=[]),R[ot].push({...Y,activityName:Y.name||k.t("cat.other"),currency:J,isGeneral:!0})});const K=Object.entries(R).map(([Y,J])=>({date:Y,items:J.sort((F,ot)=>ot.amount-F.amount)})).sort((Y,J)=>new Date(J.date).getTime()-new Date(Y.date).getTime());return{actuals:at,groupedExpenses:K}});const b={transport:"#f97316",food:"#ef4444",stay:"#8b5cf6",shopping:"#ec4899",medical:"#e91e63",other:"#64748b"},P={transport:ll,food:_l,stay:hl,shopping:vl,medical:dl,other:fl};let E=ne(()=>({transport:k.t("cat.transport"),food:k.t("cat.food"),stay:k.t("cat.stay"),shopping:k.t("cat.shopping"),medical:k.t("cat.medical"),other:k.t("cat.other")}));var N=Oh(),A=v(N);{var M=at=>{var j=bh();S(at,j)},Z=at=>{var j=Ah(),R=st(j),K=v(R),Y=v(K),J=v(Y),F=v(J),ot=g(J,2);ot.__click=y;var lt=v(ot);io(lt,{size:20});var wt=g(K,2),Ot=v(wt),ve=v(Ot);ve.__click=()=>O(a,"all");var Qt=v(ve),Ft=g(ve,2);Ft.__click=()=>O(a,"daily");var ht=v(Ft),H=g(Ot,2);{var B=Nt=>{var C=Ph(),V=v(C);V.__click=_;var Q=v(V);cl(Q,{size:20});var nt=g(V,2),$t=v(nt);$t.__click=()=>O(h,!c(h));var Ut=v($t),_t=v(Ut),Vt=g(Ut,2),te=v(Vt),_e=g($t,2);{var De=Se=>{var ze=xh(),ue=st(ze);Oe(ue,21,()=>c(s).days,Qe,(Me,mt,rt)=>{var ut=wh();ut.__click=()=>p(rt);var it=v(ut),Zt=v(it),Lt=g(it,2),xt=v(Lt);G(Pt=>{Si(ut,1,`day-option ${rt===c(u)?"selected":""}`,"svelte-5oriq5"),z(Zt,Pt),z(xt,c(mt).date)},[()=>k.day(rt+1)]),S(Me,ut)});var oe=g(ue,2);oe.__click=()=>O(h,!1),S(Se,ze)};tt(_e,Se=>{c(h)&&Se(De)})}var pe=g(nt,2);pe.__click=d;var Te=v(pe);ul(Te,{size:20}),G(Se=>{V.disabled=c(u)===0,z(_t,Se),z(te,c(s).days[c(u)].date),pe.disabled=c(u)===c(s).days.length-1},[()=>k.day(c(u)+1)]),S(Nt,C)};tt(H,Nt=>{c(a)==="daily"&&Nt(B)})}var kt=g(R,2),q=v(kt),et=v(q),pt=v(et),ft=g(et,2),ct=v(ft);{var gt=Nt=>{var C=Dt(),V=st(C);Oe(V,17,()=>Object.entries(c(x).actuals),Qe,(Q,nt)=>{var $t=ne(()=>br(c(nt),2));let Ut=()=>c($t)[0],_t=()=>c($t)[1];var Vt=kh(),te=v(Vt);G(_e=>z(te,`${(Li[Ut()]||Ut())??""} ${_e??""}`),[()=>_t().total.toLocaleString()]),S(Q,Vt)}),S(Nt,C)},W=Nt=>{var C=Th(),V=v(C);G(()=>z(V,`${Li[c(s).currency]??""}0`)),S(Nt,C)};tt(ct,Nt=>{c(x)&&Object.keys(c(x).actuals).length>0?Nt(gt):Nt(W,!1)})}var It=g(kt,2);{var be=Nt=>{var C=Ch(),V=st(C);Oe(V,17,()=>Object.entries(c(x).actuals),Qe,($t,Ut)=>{var _t=ne(()=>br(c(Ut),2));let Vt=()=>c(_t)[0],te=()=>c(_t)[1];var _e=Dt(),De=st(_e);{var pe=Te=>{const Se=ne(()=>Object.entries(te().breakdown).reduce((it,[Zt,Lt])=>(it[Zt]={actual:Lt,estimated:0},it),{}));var ze=Eh(),ue=v(ze),oe=v(ue),Me=g(ue,2),mt=v(Me),rt=v(mt);{let it=ne(()=>Li[Vt()]||"$");yh(rt,{get data(){return c(Se)},get colors(){return b},get currencySymbol(){return c(it)}})}var ut=g(mt,2);Oe(ut,21,()=>Object.entries(te().breakdown),Qe,(it,Zt)=>{var Lt=ne(()=>br(c(Zt),2));let xt=()=>c(Lt)[0],Pt=()=>c(Lt)[1];const Gt=ne(()=>P[xt()]);var St=Lh(),ae=v(St),Ht=v(ae),Yt=v(Ht);rn(Yt,()=>c(Gt),(yt,qt)=>{qt(yt,{size:18,get style(){return`color: ${b[xt()]??""}`}})});var Le=g(Yt,2),we=v(Le),Ce=g(Ht,2),Bt=v(Ce),me=v(Bt),dt=g(ae,2),de=v(dt);G(yt=>{z(we,c(E)[xt()]),z(me,`${(Li[Vt()]||"$")??""}${yt??""}`),ii(de,`
                                                    width: ${te().total?Pt()/te().total*100:0}%;
                                                    background-color: ${b[xt()]??""};
                                                `)},[()=>Pt().toLocaleString()]),S(it,St)}),G(it=>z(oe,`${it??""} (${Vt()??""})`),[()=>k.t("finance.breakdown")]),S(Te,ze)};tt(De,Te=>{te().total>0&&Te(pe)})}S($t,_e)});var Q=g(V,2);{var nt=$t=>{var Ut=Mh(),_t=v(Ut),Vt=v(_t),te=g(_t,2);Oe(te,21,()=>c(x).groupedExpenses,Qe,(_e,De)=>{var pe=zh(),Te=v(pe),Se=v(Te),ze=g(Te,2);Oe(ze,17,()=>c(De).items,Qe,(ue,oe)=>{const Me=ne(()=>P[c(oe).category]);var mt=Sh(),rt=v(mt),ut=v(rt),it=v(ut),Zt=g(ut,2),Lt=v(Zt);rn(Lt,()=>c(Me),(Ht,Yt)=>{Yt(Ht,{size:14})});var xt=g(Lt,2),Pt=v(xt),Gt=g(rt,2),St=v(Gt),ae=v(St);G(Ht=>{z(it,c(oe).activityName),ii(Zt,`background-color: ${b[c(oe).category]??""}15; color: ${b[c(oe).category]??""}`),z(Pt,c(E)[c(oe).category]),z(ae,`${Li[c(oe).currency]??""}${Ht??""}`)},[()=>c(oe).amount.toLocaleString()]),S(ue,mt)}),G(()=>z(Se,c(De).date)),S(_e,pe)}),G(_e=>z(Vt,_e),[()=>k.t("finance.detailed")]),S($t,Ut)};tt(Q,$t=>{c(x).groupedExpenses.length>0&&$t(nt)})}S(Nt,C)};tt(It,Nt=>{c(x)&&Nt(be)})}G((Nt,C,V,Q,nt)=>{z(F,`${c(s).destination??""} ${Nt??""}`),$e(ot,"title",C),Si(ve,1,`toggle-btn ${c(a)==="all"?"active":""}`,"svelte-5oriq5"),z(Qt,V),Si(Ft,1,`toggle-btn ${c(a)==="daily"?"active":""}`,"svelte-5oriq5"),z(ht,Q),z(pt,nt)},[()=>k.t("finance.finances"),()=>k.t("csv.export"),()=>k.t("finance.view.all"),()=>k.t("finance.view.daily"),()=>k.t("finance.totalActual")]),S(at,j)};tt(A,at=>{c(s)?at(Z,!1):at(M)})}S(n,N),Hi()}Zn(["click"]);var $h=D('<div class="empty-state"><p>è¯·éæ©è¡ç¨</p></div>'),Dh=D('<button><span class="day-num svelte-qzlmfm"> </span> <span class="day-date svelte-qzlmfm"> </span></button>'),Nh=D('<div class="day-picker-dropdown svelte-qzlmfm"></div> <div class="backdrop svelte-qzlmfm" role="button" tabindex="0"></div>',1),Zh=D('<div class="empty-state"><p> </p></div>'),Bh=D('<img alt="Journal entry" class="card-image svelte-qzlmfm"/>'),qh=D('<div class="weather-icon svelte-qzlmfm"><!></div>'),Rh=D('<div class="location-row svelte-qzlmfm"><!><span class="location svelte-qzlmfm"> </span></div>'),jh=D('<div role="button" tabindex="0"><!> <div class="card-overlay svelte-qzlmfm"><div class="card-header-info svelte-qzlmfm"><span class="time svelte-qzlmfm"> </span> <!></div> <div class="card-footer-info svelte-qzlmfm"><!> <p class="card-content svelte-qzlmfm"> </p></div></div></div>'),Fh=D('<div class="meta-row svelte-qzlmfm"><!><span> </span></div>'),Hh=D('<div class="meta-row weather svelte-qzlmfm"><!><span> </span></div>'),Wh=D('<img alt="Journal" class="svelte-qzlmfm"/>'),Uh=D('<div class="viewer-photos svelte-qzlmfm"></div>'),Vh=D('<div class="editor-overlay svelte-qzlmfm" role="button" tabindex="0"><div class="editor-modal viewer-modal svelte-qzlmfm" role="dialog"><div class="editor-header svelte-qzlmfm"><h3 class="svelte-qzlmfm"> </h3> <div class="header-actions svelte-qzlmfm"><button class="edit-action-btn svelte-qzlmfm" title="ç·¨è¼¯æ­¤æ¥è¨"><!><span>ç·¨è¼¯</span></button> <button class="close-btn svelte-qzlmfm"><!></button></div></div> <div class="editor-body svelte-qzlmfm"><div class="viewer-meta svelte-qzlmfm"><div class="meta-row svelte-qzlmfm"><!><span> </span></div> <!> <!></div> <!> <div class="viewer-content-field svelte-qzlmfm"><p class="viewer-content svelte-qzlmfm"> </p></div></div></div></div>'),Gh=D("<button><!></button>"),Yh=D('<div class="photo-thumb svelte-qzlmfm"><img alt="Thumbnail" class="svelte-qzlmfm"/><button class="remove-photo svelte-qzlmfm"><!></button></div>'),Jh=D('<button class="icon-btn danger svelte-qzlmfm"><!>åªé¤</button>'),Kh=D("<div></div>"),Xh=D('<div class="editor-overlay svelte-qzlmfm" role="button" tabindex="0"><div class="editor-modal svelte-qzlmfm" role="dialog"><div class="editor-header svelte-qzlmfm"><h3 class="svelte-qzlmfm"> </h3> <button class="close-btn svelte-qzlmfm"><!></button></div> <div class="editor-body svelte-qzlmfm"><div class="row"><div class="field time-field svelte-qzlmfm"><label for="entry-time" class="svelte-qzlmfm"> </label><div class="input-wrap svelte-qzlmfm"><!><input id="entry-time" type="time" class="svelte-qzlmfm"/></div></div> <div class="field loc-field svelte-qzlmfm"><label for="entry-location" class="svelte-qzlmfm"> </label><div class="input-wrap svelte-qzlmfm"><!><input id="entry-location" type="text" class="svelte-qzlmfm"/></div></div></div> <div class="field svelte-qzlmfm"><fieldset class="svelte-qzlmfm"><legend class="svelte-qzlmfm"> </legend> <div class="weather-options svelte-qzlmfm"></div></fieldset></div> <div class="field svelte-qzlmfm"><fieldset class="svelte-qzlmfm"><legend class="svelte-qzlmfm"> </legend> <div class="photo-upload-area"><input type="file" id="photo-upload" accept="image/*" multiple class="svelte-qzlmfm"/> <div class="photo-grid svelte-qzlmfm"><!> <label for="photo-upload" class="add-photo-btn svelte-qzlmfm" role="button" tabindex="0"><!><span> </span></label></div></div></fieldset></div> <div class="field content-field svelte-qzlmfm"><textarea class="svelte-qzlmfm"></textarea></div></div> <div class="editor-footer svelte-qzlmfm"><!> <button class="primary-btn svelte-qzlmfm"> </button></div></div></div>'),Qh=D('<header class="svelte-qzlmfm"><div class="header-title-row svelte-qzlmfm"><h2 class="svelte-qzlmfm"> </h2> <button class="export-btn svelte-qzlmfm"><!></button></div> <div class="day-navigator svelte-qzlmfm"><button class="nav-btn svelte-qzlmfm"><!></button> <div class="current-day-display svelte-qzlmfm"><button class="day-toggle svelte-qzlmfm"><span class="day-label svelte-qzlmfm"> </span> <span class="date-label svelte-qzlmfm"> </span></button> <!></div> <button class="nav-btn svelte-qzlmfm"><!></button></div></header> <div class="journal-list svelte-qzlmfm"><!> <!></div> <button class="fab svelte-qzlmfm"><!></button> <!> <!>',1),tf=D('<div class="journal-view"><!></div>');function ef(n,r){Fi(r,!0);let s=ne(()=>r.tripId?Re.getTrip(r.tripId):null),a=Et(0),u=Et(!1),h=ne(()=>c(s)?.days[c(a)]?.journals||[]),d=Et(null),_=Et(!1),p=Et(null),y=Et(""),x=Et(""),b=Et(null),P=Et(""),E=Et(ui([]));function N(H){O(d,H,!0)}function A(){O(d,null)}function M(){if(!c(s))return;const H=ft=>ft.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");let kt=`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>${c(s).destination} Journal</title><style>
            body { font-family: system-ui, -apple-system, sans-serif; background: #f4f4f5; color: #18181b; margin: 0; padding: 2rem; }
            .container { max-width: 800px; margin: 0 auto; }
            h1 { text-align: center; margin-bottom: 0.5rem; color: #18181b; }
            .dates { text-align: center; color: #71717a; margin-bottom: 3rem; }
            .day-section { margin-bottom: 4rem; page-break-after: always; }
            .day-section:last-child { page-break-after: auto; }
            .day-header { font-size: 1.5rem; font-weight: bold; margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #e4e4e7; color: #3b82f6; }
            .entry-card { background: white; border-radius: 1rem; overflow: hidden; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); height: auto; page-break-inside: avoid; }
            .entry-header { padding: 1.5rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #f4f4f5; }
            .meta { display: flex; gap: 1rem; align-items: center; color: #71717a; font-size: 0.9rem; }
            .meta span { display: flex; align-items: center; gap: 0.25rem; }
            .content { padding: 1.5rem; line-height: 1.8; white-space: pre-wrap; font-size: 1.1rem; overflow-wrap: break-word; }
            .photos { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.5rem; }
            .photos img { width: 100%; height: auto; object-fit: contain; max-height: 400px; background: #000; }
            .weather-badge { background: #eff6ff; color: #3b82f6; padding: 0.25rem 0.75rem; border-radius: 1rem; font-size: 0.85rem; font-weight: 500; }
            @media (prefers-color-scheme: dark) {
                body { background: #18181b; color: #f4f4f5; }
                .entry-card { background: #27272a; }
                .day-header { border-bottom-color: #3f3f46; }
                .entry-header { border-bottom-color: #3f3f46; }
                .meta { color: #a1a1aa; }
                .weather-badge { background: #1e3a8a; color: #bfdbfe; }
            }
        </style></head><body><div class="container"><h1>${H(c(s).destination)}</h1><div class="dates">${c(s).startDate} â ${c(s).endDate}</div>`;c(s).days.forEach((ft,ct)=>{if(ft.journals.length===0)return;kt+=`<div class="day-section"><div class="day-header">${k.day(ct+1)} - ${ft.date}</div>`,[...ft.journals].sort((W,It)=>W.timestamp.localeCompare(It.timestamp)).forEach(W=>{kt+=`<div class="entry-card"><div class="entry-header"><div class="meta"><span>ð ${W.timestamp}</span>${W.location?`<span>ð ${H(W.location)}</span>`:""}</div>${W.weather?`<div class="weather-badge">${k.t(`journal.${W.weather}`)}</div>`:""}</div>${W.photos&&W.photos.length>0?`<div class="photos">${W.photos.map(It=>`<img src="${It}" loading="lazy" />`).join("")}</div>`:""}<div class="content">${H(W.content)}</div></div>`}),kt+="</div>"}),kt+="</div></body></html>";const q=new Blob([kt],{type:"text/html"}),et=URL.createObjectURL(q),pt=document.createElement("a");pt.href=et,pt.download=`${c(s).destination}_Journal.html`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt)}function Z(H){if(O(_,!0),H)O(p,H,!0),O(y,H.content,!0),O(x,H.location||"",!0),O(b,H.weather,!0),O(P,H.timestamp,!0),O(E,[...H.photos||[]],!0);else{O(p,null),O(y,""),O(x,""),O(b,null),O(E,[],!0);const B=new Date;O(P,`${String(B.getHours()).padStart(2,"0")}:${String(B.getMinutes()).padStart(2,"0")}`)}c(d)&&A()}function at(){O(_,!1),O(p,null)}function j(){if(!c(s)||!c(s).days[c(a)])return;const H={id:c(p)?c(p).id:ir(),timestamp:c(P),content:c(y),location:c(x),weather:c(b),photos:c(E)};c(p)?Re.updateJournalEntry(c(s).id,c(a),H):Re.addJournalEntry(c(s).id,c(a),H),at()}function R(){!c(s)||!c(p)||(Re.removeJournalEntry(c(s).id,c(a),c(p).id),at())}async function K(H){const B=H.target;if(console.log("upload image"),!B.files||B.files.length===0)return;const kt=Array.from(B.files);for(const q of kt)try{const et=await Y(q);c(E).push(et)}catch(et){console.error("Failed to process image",et)}B.value=""}function Y(H){return new Promise((B,kt)=>{const q=new FileReader;q.readAsDataURL(H),q.onload=et=>{const pt=new Image;pt.src=et.target?.result,pt.onload=()=>{const ft=document.createElement("canvas"),ct=1200,gt=1200;let W=pt.width,It=pt.height;W>It?W>ct&&(It*=ct/W,W=ct):It>gt&&(W*=gt/It,It=gt),ft.width=W,ft.height=It,ft.getContext("2d")?.drawImage(pt,0,0,W,It),B(ft.toDataURL("image/jpeg",.8))},pt.onerror=ft=>kt(ft)},q.onerror=et=>kt(et)})}function J(H){c(E).splice(H,1),O(E,[...c(E)],!0)}yn(()=>{if(r.tripId)if(O(u,!1),c(s)){const B=new Date().toISOString().split("T")[0],kt=c(s).days.findIndex(q=>q.date===B);kt!==-1?O(a,kt,!0):O(a,0)}else O(a,0)});function F(){c(s)&&c(a)<c(s).days.length-1&&tr(a)}function ot(){c(a)>0&&tr(a,-1)}function lt(H){O(a,H,!0),O(u,!1)}const wt=[{type:"sunny",icon:ad,label:"journal.sunny"},{type:"cloudy",icon:id,label:"journal.cloudy"},{type:"rainy",icon:td,label:"journal.rainy"},{type:"snowy",icon:ed,label:"journal.snowy"},{type:"windy",icon:ld,label:"journal.windy"}];function Ot(H){return wt.find(B=>B.type===H)?.icon}var ve=tf(),Qt=v(ve);{var Ft=H=>{var B=$h();S(H,B)},ht=H=>{var B=Qh(),kt=st(B),q=v(kt),et=v(q),pt=v(et),ft=g(et,2);ft.__click=M;var ct=v(ft);io(ct,{size:20});var gt=g(q,2),W=v(gt);W.__click=ot;var It=v(W);cl(It,{size:20});var be=g(W,2),Nt=v(be);Nt.__click=()=>O(u,!c(u));var C=v(Nt),V=v(C),Q=g(C,2),nt=v(Q),$t=g(Nt,2);{var Ut=mt=>{var rt=Nh(),ut=st(rt);Oe(ut,21,()=>c(s).days,Qe,(Zt,Lt,xt)=>{var Pt=Dh();Pt.__click=()=>lt(xt);var Gt=v(Pt),St=v(Gt),ae=g(Gt,2),Ht=v(ae);G(Yt=>{Si(Pt,1,`day-option ${xt===c(a)?"selected":""}`,"svelte-qzlmfm"),z(St,Yt),z(Ht,c(Lt).date)},[()=>k.day(xt+1)]),S(Zt,Pt)});var it=g(ut,2);it.__click=()=>O(u,!1),it.__keydown=Zt=>Zt.key==="Escape"&&O(u,!1),S(mt,rt)};tt($t,mt=>{c(u)&&mt(Ut)})}var _t=g(be,2);_t.__click=F;var Vt=v(_t);ul(Vt,{size:20});var te=g(kt,2),_e=v(te);{var De=mt=>{var rt=Zh(),ut=v(rt),it=v(ut);G(Zt=>z(it,Zt),[()=>k.t("journal.empty")]),S(mt,rt)};tt(_e,mt=>{c(h).length===0&&mt(De)})}var pe=g(_e,2);Oe(pe,17,()=>c(h),Qe,(mt,rt)=>{var ut=jh();ut.__click=()=>N(c(rt)),ut.__keydown=Bt=>Bt.key==="Enter"&&N(c(rt));var it=v(ut);{var Zt=Bt=>{var me=Bh();G(()=>$e(me,"src",c(rt).photos[0])),S(Bt,me)};tt(it,Bt=>{c(rt).photos&&c(rt).photos.length>0&&Bt(Zt)})}var Lt=g(it,2),xt=v(Lt),Pt=v(xt),Gt=v(Pt),St=g(Pt,2);{var ae=Bt=>{const me=ne(()=>Ot(c(rt).weather));var dt=Dt(),de=st(dt);{var yt=qt=>{var ee=qh(),Tt=v(ee);rn(Tt,()=>c(me),(zt,Wt)=>{Wt(zt,{size:14})}),S(qt,ee)};tt(de,qt=>{c(me)&&qt(yt)})}S(Bt,dt)};tt(St,Bt=>{c(rt).weather&&Bt(ae)})}var Ht=g(xt,2),Yt=v(Ht);{var Le=Bt=>{var me=Rh(),dt=v(me);Jn(dt,{size:14});var de=g(dt),yt=v(de);G(()=>z(yt,c(rt).location)),S(Bt,me)};tt(Yt,Bt=>{c(rt).location&&Bt(Le)})}var we=g(Yt,2),Ce=v(we);G(()=>{Si(ut,1,`journal-card ${c(rt).photos&&c(rt).photos.length>0?"has-photo":"no-photo"}`,"svelte-qzlmfm"),z(Gt,c(rt).timestamp),z(Ce,c(rt).content)}),S(mt,ut)});var Te=g(te,2);Te.__click=()=>Z();var Se=v(Te);Mr(Se,{size:24});var ze=g(Te,2);{var ue=mt=>{var rt=Vh();rt.__click=A,rt.__keydown=X=>X.key==="Escape"&&A();var ut=v(rt);ut.__click=X=>X.stopPropagation(),ut.__keydown=X=>X.stopPropagation();var it=v(ut),Zt=v(it),Lt=v(Zt),xt=g(Zt,2),Pt=v(xt);Pt.__click=()=>Z(c(d));var Gt=v(Pt);Kr(Gt,{size:20});var St=g(Pt,2);St.__click=A;var ae=v(St);Tr(ae,{size:20});var Ht=g(it,2),Yt=v(Ht),Le=v(Yt),we=v(Le);oa(we,{size:16});var Ce=g(we),Bt=v(Ce),me=g(Le,2);{var dt=X=>{var I=Fh(),bt=v(I);Jn(bt,{size:16});var Kt=g(bt),le=v(Kt);G(()=>z(le,c(d).location)),S(X,I)};tt(me,X=>{c(d).location&&X(dt)})}var de=g(me,2);{var yt=X=>{const I=ne(()=>Ot(c(d).weather));var bt=Dt(),Kt=st(bt);{var le=he=>{var ie=Hh(),Ne=v(ie);rn(Ne,()=>c(I),(si,qe)=>{qe(si,{size:16})});var Fe=g(Ne),di=v(Fe);G(si=>z(di,si),[()=>k.t(`journal.${c(d).weather}`)]),S(he,ie)};tt(Kt,he=>{c(I)&&he(le)})}S(X,bt)};tt(de,X=>{c(d).weather&&X(yt)})}var qt=g(Yt,2);{var ee=X=>{var I=Uh();Oe(I,21,()=>c(d).photos,Qe,(bt,Kt)=>{var le=Wh();G(()=>$e(le,"src",c(Kt))),S(bt,le)}),S(X,I)};tt(qt,X=>{c(d).photos&&c(d).photos.length>0&&X(ee)})}var Tt=g(qt,2),zt=v(Tt),Wt=v(zt);G(X=>{z(Lt,X),z(Bt,c(d).timestamp),z(Wt,c(d).content)},[()=>k.t("journal.viewEntry")]),S(mt,rt)};tt(ze,mt=>{c(d)&&mt(ue)})}var oe=g(ze,2);{var Me=mt=>{var rt=Xh();rt.__click=at,rt.__keydown=Jt=>Jt.key==="Escape"&&at();var ut=v(rt);ut.__click=Jt=>Jt.stopPropagation(),ut.__keydown=Jt=>Jt.stopPropagation();var it=v(ut),Zt=v(it),Lt=v(Zt),xt=g(Zt,2);xt.__click=at;var Pt=v(xt);Tr(Pt,{size:20});var Gt=g(it,2),St=v(Gt),ae=v(St),Ht=v(ae),Yt=v(Ht),Le=g(Ht),we=v(Le);oa(we,{size:16,class:"input-icon"});var Ce=g(we),Bt=g(ae,2),me=v(Bt),dt=v(me),de=g(me),yt=v(de);Jn(yt,{size:16,class:"input-icon"});var qt=g(yt),ee=g(St,2),Tt=v(ee),zt=v(Tt),Wt=v(zt),X=g(zt,2);Oe(X,21,()=>wt,Qe,(Jt,Ie)=>{var Be=Gh();Be.__click=()=>O(b,c(Ie).type,!0);var Ge=v(Be);rn(Ge,()=>c(Ie).icon,(Ye,Je)=>{Je(Ye,{size:20})}),G(Ye=>{Si(Be,1,`weather-btn ${c(b)===c(Ie).type?"active":""}`,"svelte-qzlmfm"),$e(Be,"title",Ye)},[()=>k.t(c(Ie).label)]),S(Jt,Be)});var I=g(ee,2),bt=v(I),Kt=v(bt),le=v(Kt),he=g(Kt,2),ie=v(he);ie.__change=K;var Ne=g(ie,2),Fe=v(Ne);Oe(Fe,17,()=>c(E),Qe,(Jt,Ie,Be)=>{var Ge=Yh(),Ye=v(Ge),Je=g(Ye);Je.__click=()=>J(Be);var Rt=v(Je);Tr(Rt,{size:12}),G(()=>$e(Ye,"src",c(Ie))),S(Jt,Ge)});var di=g(Fe,2);di.__keydown=Jt=>Jt.key==="Enter"&&document.getElementById("photo-upload")?.click();var si=v(di);rd(si,{size:24});var qe=g(si),We=v(qe),oi=g(I,2),mi=v(oi),hi=g(Gt,2),ei=v(hi);{var Di=Jt=>{var Ie=Jh();Ie.__click=R;var Be=v(Ie);zn(Be,{size:20}),S(Jt,Ie)},Wi=Jt=>{var Ie=Kh();S(Jt,Ie)};tt(ei,Jt=>{c(p)?Jt(Di):Jt(Wi,!1)})}var ln=g(ei,2);ln.__click=j;var xn=v(ln);G((Jt,Ie,Be,Ge,Ye,Je,Rt,xe,cn)=>{z(Lt,Jt),z(Yt,Ie),z(dt,Be),$e(qt,"placeholder",Ge),z(Wt,Ye),z(le,Je),z(We,Rt),$e(mi,"placeholder",xe),z(xn,cn)},[()=>c(p)?k.t("journal.editEntry"):k.t("journal.addEntry"),()=>k.t("journal.time"),()=>k.t("journal.location"),()=>k.t("journal.locationPlaceholder"),()=>k.t("journal.weather"),()=>k.t("journal.photos"),()=>k.t("journal.addPhotos"),()=>k.t("journal.placeholder"),()=>k.t("modal.save")]),Ii(Ce,()=>c(P),Jt=>O(P,Jt)),Ii(qt,()=>c(x),Jt=>O(x,Jt)),Ii(mi,()=>c(y),Jt=>O(y,Jt)),S(mt,rt)};tt(oe,mt=>{c(_)&&mt(Me)})}G((mt,rt,ut)=>{z(pt,`${c(s).destination??""} ${mt??""}`),$e(ft,"title",rt),W.disabled=c(a)===0,z(V,ut),z(nt,c(s).days[c(a)].date),_t.disabled=c(a)===c(s).days.length-1},[()=>k.t("journal.title"),()=>k.t("journal.export"),()=>k.day(c(a)+1)]),S(H,B)};tt(Qt,H=>{c(s)?H(ht,!1):H(Ft)})}S(n,ve),Hi()}Zn(["click","keydown","change"]);var nf=D('<p class="empty-msg svelte-1n46o8q"> </p>'),rf=D('<div class="trip-card svelte-1n46o8q"><button class="trip-content svelte-1n46o8q"><div class="trip-header svelte-1n46o8q"><h2 class="svelte-1n46o8q"> </h2></div> <div class="trip-dates svelte-1n46o8q"> </div> <div class="trip-meta svelte-1n46o8q"><span> </span></div></button> <button class="delete-trip-btn svelte-1n46o8q"><!></button></div>'),sf=D('<div class="trip-grid svelte-1n46o8q"></div>'),of=D('<div class="trip-list-view svelte-1n46o8q"><div class="trip-list-container svelte-1n46o8q"><div class="list-header svelte-1n46o8q"><h1 class="svelte-1n46o8q"> </h1> <button class="add-trip-btn svelte-1n46o8q"><!> <span> </span></button></div> <!></div></div>'),af=D('<div class="full-map-view svelte-1n46o8q"><div class="map-wrapper svelte-1n46o8q"><!></div></div>'),lf=D('<div class="modal-overlay svelte-1n46o8q" role="dialog" tabindex="-1"><div class="modal svelte-1n46o8q" role="presentation"><div class="modal-header svelte-1n46o8q"><div><h2 class="svelte-1n46o8q"> </h2> <p class="modal-subtitle svelte-1n46o8q"> </p></div> <button class="close-btn svelte-1n46o8q"><!></button></div> <div class="modal-body svelte-1n46o8q"><div class="form-section svelte-1n46o8q"><h3 class="section-title svelte-1n46o8q"> </h3> <div class="form-group svelte-1n46o8q"><label for="destination" class="svelte-1n46o8q"> <span class="required svelte-1n46o8q">*</span></label> <div class="input-wrapper svelte-1n46o8q"><!> <input id="destination" type="text" class="svelte-1n46o8q"/></div></div></div> <div class="form-section svelte-1n46o8q"><h3 class="section-title svelte-1n46o8q"> </h3> <div class="date-row svelte-1n46o8q"><div class="form-group flex-1 svelte-1n46o8q"><label for="start-date" class="svelte-1n46o8q"> <span class="required svelte-1n46o8q">*</span></label> <div class="input-wrapper svelte-1n46o8q"><!> <input id="start-date" type="date" class="svelte-1n46o8q"/></div></div> <div class="form-group flex-1 svelte-1n46o8q"><label for="end-date" class="svelte-1n46o8q"> <span class="required svelte-1n46o8q">*</span></label> <div class="input-wrapper svelte-1n46o8q"><!> <input id="end-date" type="date" class="svelte-1n46o8q"/></div></div></div></div> <div class="form-section svelte-1n46o8q"><h3 class="section-title svelte-1n46o8q"> </h3> <div class="form-group svelte-1n46o8q"><label for="currency" class="svelte-1n46o8q"> </label> <div class="input-wrapper svelte-1n46o8q"><!> <select id="currency" class="svelte-1n46o8q"><option> </option><option> </option><option> </option></select></div></div></div></div> <div class="modal-footer svelte-1n46o8q"><button class="cancel-btn svelte-1n46o8q"> </button> <button class="create-btn svelte-1n46o8q"><!> <span> </span></button></div></div></div>'),cf=D('<div class="modal-overlay svelte-1n46o8q" role="alertdialog" tabindex="-1"><div class="confirm-modal svelte-1n46o8q" role="presentation"><div class="confirm-icon svelte-1n46o8q"><!></div> <h2 class="svelte-1n46o8q"> </h2> <div class="confirm-message svelte-1n46o8q"><p class="svelte-1n46o8q"> </p> <p class="warning svelte-1n46o8q"> </p></div> <div class="confirm-actions svelte-1n46o8q"><button class="cancel-btn svelte-1n46o8q"> </button> <button class="delete-btn svelte-1n46o8q"> </button></div></div></div>'),uf=D("<!> <!> <!>",1);function df(n,r){Fi(r,!0);let s=Et("itinerary"),a=Et(null),u=Et(!1),h=Et(null),d=Et(ui({destination:"",startDate:"",endDate:"",currency:"TWD"})),_=ne(()=>Re.trips),p=ne(()=>{if(c(a)){const J=Re.getTrip(c(a));return J?J.days.flatMap(F=>F.activities):[]}else return Re.trips.flatMap(J=>J.days.flatMap(F=>F.activities))});function y(J){O(a,J,!0),O(s,"itinerary")}function x(){O(a,null),O(s,"itinerary")}function b(){O(u,!0),O(d,{destination:"",startDate:"",endDate:"",currency:"TWD"},!0)}function P(){O(u,!1),O(d,{destination:"",startDate:"",endDate:"",currency:"TWD"},!0)}function E(){if(!c(d).destination||!c(d).startDate||!c(d).endDate)return;const J=new Date(c(d).startDate),F=new Date(c(d).endDate),ot=Math.floor((F.getTime()-J.getTime())/(1e3*60*60*24))+1;if(ot<=0)return;const lt=[];for(let Ot=0;Ot<ot;Ot++){const ve=new Date(J);ve.setDate(ve.getDate()+Ot),lt.push({date:ve.toISOString().split("T")[0],activities:[],journals:[]})}const wt={id:ir(),destination:c(d).destination,startDate:c(d).startDate,endDate:c(d).endDate,days:lt,currency:c(d).currency,generalExpenses:[]};Re.addTrip(wt),P()}function N(J){O(h,J,!0)}function A(){O(h,null)}function M(){c(h)&&(Re.removeTrip(c(h)),O(h,null))}var Z=uf(),at=st(Z);{let J=ne(()=>c(a)!==null);gd(at,{get hasTrip(){return c(J)},onBackTrip:x,get view(){return c(s)},set view(F){O(s,F,!0)},children:(F,ot)=>{var lt=Dt(),wt=st(lt);{var Ot=Qt=>{var Ft=of(),ht=v(Ft),H=v(ht),B=v(H),kt=v(B),q=g(B,2);q.__click=b;var et=v(q);Mr(et,{size:20});var pt=g(et,2),ft=v(pt),ct=g(H,2);{var gt=It=>{var be=nf(),Nt=v(be);G(C=>z(Nt,C),[()=>k.t("trip.empty")]),S(It,be)},W=It=>{var be=sf();Oe(be,21,()=>c(_),Qe,(Nt,C)=>{var V=rf(),Q=v(V);Q.__click=()=>y(c(C).id);var nt=v(Q),$t=v(nt),Ut=v($t),_t=g(nt,2),Vt=v(_t),te=g(_t,2),_e=v(te),De=v(_e),pe=g(Q,2);pe.__click=()=>N(c(C).id);var Te=v(pe);zn(Te,{size:16}),G((Se,ze)=>{z(Ut,c(C).destination),z(Vt,`${c(C).startDate??""} ~ ${c(C).endDate??""}`),z(De,`${c(C).days.length??""} ${Se??""}`),$e(pe,"title",ze)},[()=>k.t("trip.days"),()=>k.t("trip.deleteTrip")]),S(Nt,V)}),S(It,be)};tt(ct,It=>{c(_).length===0?It(gt):It(W,!1)})}G((It,be)=>{z(kt,It),z(ft,be)},[()=>k.t("trip.myTrips"),()=>k.t("trip.planNew")]),S(Qt,Ft)},ve=Qt=>{var Ft=Dt(),ht=st(Ft);{var H=kt=>{ph(kt,{get tripId(){return c(a)}})},B=kt=>{var q=Dt(),et=st(q);{var pt=ct=>{Ih(ct,{get tripId(){return c(a)}})},ft=ct=>{var gt=Dt(),W=st(gt);{var It=Nt=>{ef(Nt,{get tripId(){return c(a)}})},be=Nt=>{var C=Dt(),V=st(C);{var Q=nt=>{var $t=af(),Ut=v($t),_t=v(Ut);pl(_t,{get activities(){return c(p)},zoom:2}),S(nt,$t)};tt(V,nt=>{c(s)==="map"&&nt(Q)},!0)}S(Nt,C)};tt(W,Nt=>{c(s)==="journal"?Nt(It):Nt(be,!1)},!0)}S(ct,gt)};tt(et,ct=>{c(s)==="finance"?ct(pt):ct(ft,!1)},!0)}S(kt,q)};tt(ht,kt=>{c(s)==="itinerary"?kt(H):kt(B,!1)},!0)}S(Qt,Ft)};tt(wt,Qt=>{c(a)?Qt(ve,!1):Qt(Ot)})}S(F,lt)},$$slots:{default:!0}})}var j=g(at,2);{var R=J=>{var F=lf();F.__click=P,F.__keydown=dt=>dt.key==="Escape"&&P();var ot=v(F);ot.__click=dt=>dt.stopPropagation(),ot.__keydown=dt=>dt.stopPropagation();var lt=v(ot),wt=v(lt),Ot=v(wt),ve=v(Ot),Qt=g(Ot,2),Ft=v(Qt),ht=g(wt,2);ht.__click=P;var H=v(ht);Tr(H,{size:20});var B=g(lt,2),kt=v(B),q=v(kt),et=v(q),pt=g(q,2),ft=v(pt),ct=v(ft),gt=g(ft,2),W=v(gt);Jn(W,{size:16,class:"input-icon"});var It=g(W,2),be=g(kt,2),Nt=v(be),C=v(Nt),V=g(Nt,2),Q=v(V),nt=v(Q),$t=v(nt),Ut=g(nt,2),_t=v(Ut);Ws(_t,{size:16,class:"input-icon"});var Vt=g(_t,2),te=g(Q,2),_e=v(te),De=v(_e),pe=g(_e,2),Te=v(pe);Ws(Te,{size:16,class:"input-icon"});var Se=g(Te,2),ze=g(be,2),ue=v(ze),oe=v(ue),Me=g(ue,2),mt=v(Me),rt=v(mt),ut=g(mt,2),it=v(ut);eo(it,{size:16,class:"input-icon"});var Zt=g(it,2),Lt=v(Zt),xt=v(Lt);Lt.value=Lt.__value="TWD";var Pt=g(Lt),Gt=v(Pt);Pt.value=Pt.__value="JPY";var St=g(Pt),ae=v(St);St.value=St.__value="USD";var Ht=g(B,2),Yt=v(Ht);Yt.__click=P;var Le=v(Yt),we=g(Yt,2);we.__click=E;var Ce=v(we);Mr(Ce,{size:18});var Bt=g(Ce,2),me=v(Bt);G((dt,de,yt,qt,ee,Tt,zt,Wt,X,I,bt)=>{z(ve,dt),z(Ft,de),z(et,yt),z(ct,`${qt??""} `),$e(It,"placeholder",k.lang==="en"?"e.g. Tokyo":"ä¾å¦ï¼æ±äº¬"),z(C,ee),z($t,`${Tt??""} `),z(De,`${zt??""} `),z(oe,Wt),z(rt,X),z(xt,`TWD - ${k.lang==="en"?"Taiwan Dollar":"æ°å°å¹£"}`),z(Gt,`JPY - ${k.lang==="en"?"Japanese Yen":"æ¥å"}`),z(ae,`USD - ${k.lang==="en"?"US Dollar":"ç¾å"}`),z(Le,I),we.disabled=!c(d).destination||!c(d).startDate||!c(d).endDate,z(me,bt)},[()=>k.t("trip.planNewAdventure"),()=>k.t("trip.fillBasicInfo"),()=>k.t("trip.basicInfo"),()=>k.t("trip.destination"),()=>k.t("trip.dates"),()=>k.t("trip.startDate"),()=>k.t("trip.endDate"),()=>k.t("trip.otherSettings"),()=>k.t("trip.currency"),()=>k.t("trip.cancel"),()=>k.t("trip.startYourPlan")]),Ii(It,()=>c(d).destination,dt=>c(d).destination=dt),Ii(Vt,()=>c(d).startDate,dt=>c(d).startDate=dt),Ii(Se,()=>c(d).endDate,dt=>c(d).endDate=dt),nl(Zt,()=>c(d).currency,dt=>c(d).currency=dt),S(J,F)};tt(j,J=>{c(u)&&J(R)})}var K=g(j,2);{var Y=J=>{var F=cf();F.__click=A,F.__keydown=ct=>ct.key==="Escape"&&A();var ot=v(F);ot.__click=ct=>ct.stopPropagation(),ot.__keydown=ct=>ct.stopPropagation();var lt=v(ot),wt=v(lt);zn(wt,{size:32});var Ot=g(lt,2),ve=v(Ot),Qt=g(Ot,2),Ft=v(Qt),ht=v(Ft),H=g(Ft,2),B=v(H),kt=g(Qt,2),q=v(kt);q.__click=A;var et=v(q),pt=g(q,2);pt.__click=M;var ft=v(pt);G(ct=>{z(ve,k.lang==="en"?"Confirm Delete Trip?":"ç¢ºèªåªé¤è¡ç¨ï¼"),z(ht,k.lang==="en"?"This trip will be permanently deleted.":"å°æ°¸ä¹åªé¤æ­¤è¡ç¨ã"),z(B,k.lang==="en"?"This action will also delete all associated activities, expenses, and journal entries. This cannot be undone.":"æ­¤æä½å°ä¸ä½µåªé¤ææç¸éçæ´»åãè²»ç¨è¨éåæ¥è¨ï¼ä¸ç¡æ³æ¢å¾©ã"),z(et,ct),z(ft,k.lang==="en"?"Confirm Delete":"ç¢ºèªåªé¤")},[()=>k.t("trip.cancel")]),S(J,F)};tt(K,J=>{c(h)&&J(Y)})}S(n,Z),Hi()}Zn(["click","keydown"]);Eu(df,{target:document.getElementById("app")});
